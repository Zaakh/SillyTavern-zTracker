import*as e from"../../../../power-user.js";import*as t from"../../../../../script.js";import*as n from"../../../../world-info.js";import*as r from"../../../../slash-commands.js";import*as a from"../../../../personas.js";import*as o from"../../../../instruct-mode.js";import*as i from"../../../../chats.js";import*as l from"../../../../openai.js";import*as s from"../../../../authors-note.js";import*as u from"../../../../group-chats.js";import*as c from"../../../regex/engine.js";import*as f from"../../../../utils.js";import*as d from"../../../../slash-commands/SlashCommandCommonEnumsProvider.js";import*as p from"../../../../slash-commands/SlashCommandEnumValue.js";import*as h from"../../../../popup.js";import*as m from"../../../../../lib/dialog-polyfill.esm.js";var g={27:(e,t,n)=>{function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.parseWithoutProcessing=u,t.parse=function(e,t){var n=u(e,t);return new o.default(t).accept(n)};var a=r(n(201)),o=r(n(915)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(425)),l=n(849);t.parser=a.default;var s={};function u(e,t){return"Program"===e.type?e:(a.default.yy=s,s.locInfo=function(e){return new s.SourceLocation(t&&t.srcName,e)},a.default.parse(e))}l.extend(s,i)},97:(e,t,n)=>{t.__esModule=!0;var r=n(849);t.default=function(e){e.registerHelper("blockHelperMissing",function(t,n){var a=n.inverse,o=n.fn;if(!0===t)return o(this);if(!1===t||null==t)return a(this);if(r.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):a(this);if(n.data&&n.ids){var i=r.createFrame(n.data);i.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:i}}return o(t,n)})},e.exports=t.default},127:(e,t,n)=>{function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.Compiler=s,t.precompile=function(e,t,n){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new a.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);"data"in(t=t||{})||(t.data=!0);t.compat&&(t.useDepths=!0);var r=n.parse(e,t),o=(new n.Compiler).compile(r,t);return(new n.JavaScriptCompiler).compile(o,t)},t.compile=function(e,t,n){void 0===t&&(t={});if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new a.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);"data"in(t=o.extend({},t))||(t.data=!0);t.compat&&(t.useDepths=!0);var r=void 0;function i(){var r=n.parse(e,t),a=(new n.Compiler).compile(r,t),o=(new n.JavaScriptCompiler).compile(a,t,void 0,!0);return n.template(o)}function l(e,t){return r||(r=i()),r.call(this,e,t)}return l._setup=function(e){return r||(r=i()),r._setup(e)},l._child=function(e,t,n,a){return r||(r=i()),r._child(e,t,n,a)},l};var a=r(n(769)),o=n(849),i=r(n(919)),l=[].slice;function s(){}function u(e,t){if(e===t)return!0;if(o.isArray(e)&&o.isArray(t)&&e.length===t.length){for(var n=0;n<e.length;n++)if(!u(e[n],t[n]))return!1;return!0}}function c(e){if(!e.path.parts){var t=e.path;e.path={type:"PathExpression",data:!1,depth:0,parts:[t.original+""],original:t.original+"",loc:t.loc}}}s.prototype={compiler:s,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],a=e.opcodes[n];if(r.opcode!==a.opcode||!u(r.args,a.args))return!1}t=this.children.length;for(n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[],t.knownHelpers=o.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},t.knownHelpers),this.accept(e)},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[n]=t,this.useDepths=this.useDepths||t.useDepths,n},accept:function(e){if(!this[e.type])throw new a.default("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,n=t.length,r=0;r<n;r++)this.accept(t[r]);return this.options.blockParams.shift(),this.isSimple=1===n,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){c(e);var t=e.program,n=e.inverse;t=t&&this.compileProgram(t),n=n&&this.compileProgram(n);var r=this.classifySexpr(e);"helper"===r?this.helperSexpr(e,t,n):"simple"===r?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,n),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),n=this.setupFullMustacheParams(e,t,void 0),r=e.path;this.useDecorators=!0,this.opcode("registerDecorator",n.length,r.original)},PartialStatement:function(e){this.usePartial=!0;var t=e.program;t&&(t=this.compileProgram(e.program));var n=e.params;if(n.length>1)throw new a.default("Unsupported number of partial arguments: "+n.length,e);n.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):n.push({type:"PathExpression",parts:[],depth:0}));var r=e.name.original,o="SubExpression"===e.name.type;o&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0);var i=e.indent||"";this.options.preventIndent&&i&&(this.opcode("appendContent",i),i=""),this.opcode("invokePartial",o,r,i),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){c(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,n){var r=e.path,a=r.parts[0],o=null!=t||null!=n;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),r.strict=!0,this.accept(r),this.opcode("invokeAmbiguous",a,o)},simpleSexpr:function(e){var t=e.path;t.strict=!0,this.accept(t),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),o=e.path,l=o.parts[0];if(this.options.knownHelpers[l])this.opcode("invokeKnownHelper",r.length,l);else{if(this.options.knownHelpersOnly)throw new a.default("You specified knownHelpersOnly, but used the unknown helper "+l,e);o.strict=!0,o.falsy=!0,this.accept(o),this.opcode("invokeHelper",r.length,o.original,i.default.helpers.simpleId(o))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],n=i.default.helpers.scopedId(e),r=!e.depth&&!n&&this.blockParamIndex(t);r?this.opcode("lookupBlockParam",r,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,n):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,n=0,r=t.length;for(this.opcode("pushHash");n<r;n++)this.pushParam(t[n].value);for(;n--;)this.opcode("assignToHash",t[n].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:l.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=i.default.helpers.simpleId(e.path),n=t&&!!this.blockParamIndex(e.path.parts[0]),r=!n&&i.default.helpers.helperExpression(e),a=!n&&(r||t);if(a&&!r){var o=e.path.parts[0],l=this.options;l.knownHelpers[o]?r=!0:l.knownHelpersOnly&&(a=!1)}return r?"helper":a?"ambiguous":"simple"},pushParams:function(e){for(var t=0,n=e.length;t<n;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var n=void 0;if(!e.parts||i.default.helpers.scopedId(e)||e.depth||(n=this.blockParamIndex(e.parts[0])),n){var r=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",n,r)}else(t=e.original||t).replace&&(t=t.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,n,r){var a=e.params;return this.pushParams(a),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.accept(e.hash):this.opcode("emptyHash",r),a},blockParamIndex:function(e){for(var t=0,n=this.options.blockParams.length;t<n;t++){var r=this.options.blockParams[t],a=r&&o.indexOf(r,e);if(r&&a>=0)return[t,a]}}}},148:(e,t)=>{t.__esModule=!0,t.default=function(e){"object"!=typeof globalThis&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__);var t=globalThis.Handlebars;e.noConflict=function(){return globalThis.Handlebars===e&&(globalThis.Handlebars=t),e}},e.exports=t.default},201:(e,t)=>{t.__esModule=!0;var n=function(){var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,n,r,a,o,i){var l=o.length-1;switch(a){case 1:return o[l-1];case 2:this.$=r.prepareProgram(o[l]);break;case 3:case 4:case 5:case 6:case 7:case 8:case 20:case 27:case 28:case 33:case 34:case 40:case 41:this.$=o[l];break;case 9:this.$={type:"CommentStatement",value:r.stripComment(o[l]),strip:r.stripFlags(o[l],o[l]),loc:r.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:o[l],value:o[l],loc:r.locInfo(this._$)};break;case 11:this.$=r.prepareRawBlock(o[l-2],o[l-1],o[l],this._$);break;case 12:this.$={path:o[l-3],params:o[l-2],hash:o[l-1]};break;case 13:this.$=r.prepareBlock(o[l-3],o[l-2],o[l-1],o[l],!1,this._$);break;case 14:this.$=r.prepareBlock(o[l-3],o[l-2],o[l-1],o[l],!0,this._$);break;case 15:this.$={open:o[l-5],path:o[l-4],params:o[l-3],hash:o[l-2],blockParams:o[l-1],strip:r.stripFlags(o[l-5],o[l])};break;case 16:case 17:this.$={path:o[l-4],params:o[l-3],hash:o[l-2],blockParams:o[l-1],strip:r.stripFlags(o[l-5],o[l])};break;case 18:this.$={strip:r.stripFlags(o[l-1],o[l-1]),program:o[l]};break;case 19:var s=r.prepareBlock(o[l-2],o[l-1],o[l],o[l],!1,this._$),u=r.prepareProgram([s],o[l-1].loc);u.chained=!0,this.$={strip:o[l-2].strip,program:u,chain:!0};break;case 21:this.$={path:o[l-1],strip:r.stripFlags(o[l-2],o[l])};break;case 22:case 23:this.$=r.prepareMustache(o[l-3],o[l-2],o[l-1],o[l-4],r.stripFlags(o[l-4],o[l]),this._$);break;case 24:this.$={type:"PartialStatement",name:o[l-3],params:o[l-2],hash:o[l-1],indent:"",strip:r.stripFlags(o[l-4],o[l]),loc:r.locInfo(this._$)};break;case 25:this.$=r.preparePartialBlock(o[l-2],o[l-1],o[l],this._$);break;case 26:this.$={path:o[l-3],params:o[l-2],hash:o[l-1],strip:r.stripFlags(o[l-4],o[l])};break;case 29:this.$={type:"SubExpression",path:o[l-3],params:o[l-2],hash:o[l-1],loc:r.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:o[l],loc:r.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:r.id(o[l-2]),value:o[l],loc:r.locInfo(this._$)};break;case 32:this.$=r.id(o[l-1]);break;case 35:this.$={type:"StringLiteral",value:o[l],original:o[l],loc:r.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(o[l]),original:Number(o[l]),loc:r.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===o[l],original:"true"===o[l],loc:r.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:r.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:r.locInfo(this._$)};break;case 42:this.$=r.preparePath(!0,o[l],this._$);break;case 43:this.$=r.preparePath(!1,o[l],this._$);break;case 44:o[l-2].push({part:r.id(o[l]),original:o[l],separator:o[l-1]}),this.$=o[l-2];break;case 45:this.$=[{part:r.id(o[l]),original:o[l]}];break;case 46:case 48:case 50:case 58:case 64:case 70:case 78:case 82:case 86:case 90:case 94:this.$=[];break;case 47:case 49:case 51:case 59:case 65:case 71:case 79:case 83:case 87:case 91:case 95:case 99:case 101:o[l-1].push(o[l]);break;case 98:case 100:this.$=[o[l]]}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,n=[0],r=[null],a=[],o=this.table,i="",l=0,s=0,u=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var c=this.lexer.yylloc;a.push(c);var f=this.lexer.options&&this.lexer.options.ranges;function d(){var e;return"number"!=typeof(e=t.lexer.lex()||1)&&(e=t.symbols_[e]||e),e}"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,h,m,g,v,y,b,k,w,S={};;){if(m=n[n.length-1],this.defaultActions[m]?g=this.defaultActions[m]:(null==p&&(p=d()),g=o[m]&&o[m][p]),void 0===g||!g.length||!g[0]){var E="";if(!u){for(y in w=[],o[m])this.terminals_[y]&&y>2&&w.push("'"+this.terminals_[y]+"'");E=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(E,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:c,expected:w})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(g[0]){case 1:n.push(p),r.push(this.lexer.yytext),a.push(this.lexer.yylloc),n.push(g[1]),p=null,h?(p=h,h=null):(s=this.lexer.yyleng,i=this.lexer.yytext,l=this.lexer.yylineno,c=this.lexer.yylloc,u>0&&u--);break;case 2:if(b=this.productions_[g[1]][1],S.$=r[r.length-b],S._$={first_line:a[a.length-(b||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(b||1)].first_column,last_column:a[a.length-1].last_column},f&&(S._$.range=[a[a.length-(b||1)].range[0],a[a.length-1].range[1]]),void 0!==(v=this.performAction.call(S,i,s,l,this.yy,g[1],r,a)))return v;b&&(n=n.slice(0,-1*b*2),r=r.slice(0,-1*b),a=a.slice(0,-1*b)),n.push(this.productions_[g[1]][0]),r.push(S.$),a.push(S._$),k=o[n[n.length-2]][n[n.length-1]],n.push(k);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var a=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[a[0],a[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,n,r,a;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),i=0;i<o.length&&(!(n=this._input.match(this.rules[o[i]]))||t&&!(n[0].length>t[0].length)||(t=n,r=i,this.options.flex));i++);return t?((a=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=a.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:a?a[a.length-1].length-a[a.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,t,n,r){function a(e,n){return t.yytext=t.yytext.substring(e,t.yyleng-n+e)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(a(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(a(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 15;break;case 1:case 5:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(a(5,9),"END_RAW_BLOCK");case 6:case 22:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:case 23:return 48;case 21:this.unput(t.yytext),this.popState(),this.begin("com");break;case 24:return 73;case 25:case 26:case 41:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return t.yytext=a(1,2).replace(/\\"/g,'"'),80;case 32:return t.yytext=a(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 42:return t.yytext=t.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return e}();function n(){this.yy={}}return e.lexer=t,n.prototype=e,e.Parser=n,new n}();t.default=n,e.exports=t.default},221:(e,t,n)=>{
/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var r=n(540);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var i={d:{f:o,r:function(){throw Error(a(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},l=Symbol.for("react.portal");var s=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(a(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:l,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=s.T,n=i.p;try{if(s.T=null,i.p=2,e)return e()}finally{s.T=t,i.p=n,i.d.f()}},t.preconnect=function(e,t){"string"==typeof e&&(t?t="string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,i.d.C(e,t))},t.prefetchDNS=function(e){"string"==typeof e&&i.d.D(e)},t.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,r=u(n,t.crossOrigin),a="string"==typeof t.integrity?t.integrity:void 0,o="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?i.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:o}):"script"===n&&i.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:o,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=u(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&i.d.M(e)},t.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,r=u(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=u(t.as,t.crossOrigin);i.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else i.d.m(e)},t.requestFormReset=function(e){i.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},t.useFormStatus=function(){return s.H.useHostTransitionStatus()},t.version="19.1.1"},247:(e,t,n)=>{var r=n(982),a=n(540),o=n(961);
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function s(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function u(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(s(e)!==e)throw Error(i(188))}function f(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=f(e)))return t;e=e.sibling}return null}var d=Object.assign,p=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),w=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope");var T=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var C=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var N=Symbol.iterator;function O(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=N&&e[N]||e["@@iterator"])?e:null}var A=Symbol.for("react.client.reference");function I(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===A?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case E:return"Suspense";case x:return"SuspenseList";case T:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case m:return"Portal";case w:return(e.displayName||"Context")+".Provider";case k:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:I(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return I(e(t))}catch(e){}}return null}var j=Array.isArray,M=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},R=[],z=-1;function F(e){return{current:e}}function B(e){0>z||(e.current=R[z],R[z]=null,z--)}function H(e,t){z++,R[z]=e.current,e.current=t}var U=F(null),$=F(null),V=F(null),q=F(null);function G(e,t){switch(H(V,t),H($,e),H(U,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?af(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=of(t=af(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(U),H(U,e)}function W(){B(U),B($),B(V)}function Y(e){null!==e.memoizedState&&H(q,e);var t=U.current,n=of(t,e.type);t!==n&&(H($,e),H(U,n))}function X(e){$.current===e&&(B(U),B($)),q.current===e&&(B(q),Xf._currentValue=L)}var K=Object.prototype.hasOwnProperty,J=r.unstable_scheduleCallback,Q=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ae=r.unstable_UserBlockingPriority,oe=r.unstable_NormalPriority,ie=r.unstable_LowPriority,le=r.unstable_IdlePriority,se=r.log,ue=r.unstable_setDisableYieldValue,ce=null,fe=null;function de(e){if("function"==typeof se&&ue(e),fe&&"function"==typeof fe.setStrictMode)try{fe.setStrictMode(ce,e)}catch(e){}}var pe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(he(e)/me|0)|0},he=Math.log,me=Math.LN2;var ge=256,ve=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var a=0,o=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var l=134217727&r;return 0!==l?0!==(r=l&~o)?a=ye(r):0!==(i&=l)?a=ye(i):n||0!==(n=l&~e)&&(a=ye(n)):0!==(l=r&~o)?a=ye(l):0!==i?a=ye(i):n||0!==(n=r&~e)&&(a=ye(n)),0===a?0:0!==t&&t!==a&&0===(t&o)&&((o=a&-a)>=(n=t&-t)||32===o&&4194048&n)?t:a}function ke(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function we(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Se(){var e=ge;return!(4194048&(ge<<=1))&&(ge=256),e}function Ee(){var e=ve;return!(62914560&(ve<<=1))&&(ve=4194304),e}function xe(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _e(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Pe(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-pe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Te(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-pe(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}function Ce(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ne(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Oe(){var e=D.p;return 0!==e?e:void 0===(e=window.event)?32:cd(e.type)}var Ae=Math.random().toString(36).slice(2),Ie="__reactFiber$"+Ae,je="__reactProps$"+Ae,Me="__reactContainer$"+Ae,De="__reactEvents$"+Ae,Le="__reactListeners$"+Ae,Re="__reactHandles$"+Ae,ze="__reactResources$"+Ae,Fe="__reactMarker$"+Ae;function Be(e){delete e[Ie],delete e[je],delete e[De],delete e[Le],delete e[Re]}function He(e){var t=e[Ie];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Me]||n[Ie]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=kf(e);null!==e;){if(n=e[Ie])return n;e=kf(e)}return t}n=(e=n).parentNode}return null}function Ue(e){if(e=e[Ie]||e[Me]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function $e(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(i(33))}function Ve(e){var t=e[ze];return t||(t=e[ze]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function qe(e){e[Fe]=!0}var Ge=new Set,We={};function Ye(e,t){Xe(e,t),Xe(e+"Capture",t)}function Xe(e,t){for(We[e]=t,e=0;e<t.length;e++)Ge.add(t[e])}var Ke,Je,Qe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(a=t,K.call(et,a)||!K.call(Ze,a)&&(Qe.test(a)?et[a]=!0:(Ze[a]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var a}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function at(e){if(void 0===Ke)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Ke=t&&t[1]||"",Je=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ke+e+Je}var ot=!1;function it(e,t){if(!e||ot)return"";ot=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(e){if(e&&r&&"string"==typeof e.stack)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),i=o[0],l=o[1];if(i&&l){var s=i.split("\n"),u=l.split("\n");for(a=r=0;r<s.length&&!s[r].includes("DetermineComponentFrameRoot");)r++;for(;a<u.length&&!u[a].includes("DetermineComponentFrameRoot");)a++;if(r===s.length||a===u.length)for(r=s.length-1,a=u.length-1;1<=r&&0<=a&&s[r]!==u[a];)a--;for(;1<=r&&0<=a;r--,a--)if(s[r]!==u[a]){if(1!==r||1!==a)do{if(r--,0>--a||s[r]!==u[a]){var c="\n"+s[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=a);break}}}finally{ot=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?at(n):""}function lt(e){switch(e.tag){case 26:case 27:case 5:return at(e.type);case 16:return at("Lazy");case 13:return at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return it(e.type,!1);case 11:return it(e.type.render,!1);case 1:return it(e.type,!0);case 31:return at("Activity");default:return""}}function st(e){try{var t="";do{t+=lt(e),e=e.return}while(e);return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ct(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){e._valueTracker||(e._valueTracker=function(e){var t=ct(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function dt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ct(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function pt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ht=/[\n"\\]/g;function mt(e){return e.replace(ht,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,a,o,i,l){e.name="",null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?yt(e,i,ut(t)):null!=n?yt(e,i,ut(n)):null!=r&&e.removeAttribute("value"),null==a&&null!=o&&(e.defaultChecked=!!o),null!=a&&(e.checked=a&&"function"!=typeof a&&"symbol"!=typeof a),null!=l&&"function"!=typeof l&&"symbol"!=typeof l&&"boolean"!=typeof l?e.name=""+ut(l):e.removeAttribute("name")}function vt(e,t,n,r,a,o,i,l){if(null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(e.type=o),null!=t||null!=n){if(("submit"===o||"reset"===o)&&null==t)return;n=null!=n?""+ut(n):"",t=null!=t?""+ut(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:a)&&"symbol"!=typeof r&&!!r,e.checked=l?e.checked:!!r,e.defaultChecked=!!r,null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i&&(e.name=i)}function yt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ut(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function kt(e,t,n){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ut(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(i(92));if(j(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ut(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||Et.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function _t(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(i(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&xt(e,a,r)}else for(var o in t)t.hasOwnProperty(o)&&xt(e,o,t[o])}function Pt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ct=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nt(e){return Ct.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ot=null;function At(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var It=null,jt=null;function Mt(e){var t=Ue(e);if(t&&(e=t.stateNode)){var n=e[je]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[je]||null;if(!a)throw Error(i(90));gt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&dt(r)}break e;case"textarea":kt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Dt=!1;function Lt(e,t,n){if(Dt)return e(t,n);Dt=!0;try{return e(t)}finally{if(Dt=!1,(null!==It||null!==jt)&&(Hu(),It&&(t=It,e=jt,jt=It=null,Mt(t),e)))for(t=0;t<e.length;t++)Mt(e[t])}}function Rt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[je]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(i(231,t,typeof n));return n}var zt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Ft=!1;if(zt)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){Ft=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(e){Ft=!1}var Ht=null,Ut=null,$t=null;function Vt(){if($t)return $t;var e,t,n=Ut,r=n.length,a="value"in Ht?Ht.value:Ht.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return $t=a.slice(e,1<t?1-t:void 0)}function qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function Wt(){return!1}function Yt(e){function t(t,n,r,a,o){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?Gt:Wt,this.isPropagationStopped=Wt,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var Xt,Kt,Jt,Qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Yt(Qt),en=d({},Qt,{view:0,detail:0}),tn=Yt(en),nn=d({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jt&&(Jt&&"mousemove"===e.type?(Xt=e.screenX-Jt.screenX,Kt=e.screenY-Jt.screenY):Kt=Xt=0,Jt=e),Xt)},movementY:function(e){return"movementY"in e?e.movementY:Kt}}),rn=Yt(nn),an=Yt(d({},nn,{dataTransfer:0})),on=Yt(d({},en,{relatedTarget:0})),ln=Yt(d({},Qt,{animationName:0,elapsedTime:0,pseudoElement:0})),sn=Yt(d({},Qt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),un=Yt(d({},Qt,{data:0})),cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=dn[e])&&!!t[e]}function hn(){return pn}var mn=Yt(d({},en,{key:function(e){if(e.key){var t=cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?fn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hn,charCode:function(e){return"keypress"===e.type?qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Yt(d({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Yt(d({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hn})),yn=Yt(d({},Qt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Yt(d({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),kn=Yt(d({},Qt,{newState:0,oldState:0})),wn=[9,13,27,32],Sn=zt&&"CompositionEvent"in window,En=null;zt&&"documentMode"in document&&(En=document.documentMode);var xn=zt&&"TextEvent"in window&&!En,_n=zt&&(!Sn||En&&8<En&&11>=En),Pn=String.fromCharCode(32),Tn=!1;function Cn(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var On=!1;var An={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function In(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!An[e.type]:"textarea"===t}function jn(e,t,n,r){It?jt?jt.push(r):jt=[r]:It=r,0<(t=Vc(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Mn=null,Dn=null;function Ln(e){Lc(e,0)}function Rn(e){if(dt($e(e)))return e}function zn(e,t){if("change"===e)return t}var Fn=!1;if(zt){var Bn;if(zt){var Hn="oninput"in document;if(!Hn){var Un=document.createElement("div");Un.setAttribute("oninput","return;"),Hn="function"==typeof Un.oninput}Bn=Hn}else Bn=!1;Fn=Bn&&(!document.documentMode||9<document.documentMode)}function $n(){Mn&&(Mn.detachEvent("onpropertychange",Vn),Dn=Mn=null)}function Vn(e){if("value"===e.propertyName&&Rn(Dn)){var t=[];jn(t,Dn,e,At(e)),Lt(Ln,t)}}function qn(e,t,n){"focusin"===e?($n(),Dn=n,(Mn=t).attachEvent("onpropertychange",Vn)):"focusout"===e&&$n()}function Gn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Rn(Dn)}function Wn(e,t){if("click"===e)return Rn(t)}function Yn(e,t){if("input"===e||"change"===e)return Rn(t)}var Xn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Kn(e,t){if(Xn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!K.call(t,a)||!Xn(e[a],t[a]))return!1}return!0}function Jn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qn(e,t){var n,r=Jn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Jn(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=zt&&"documentMode"in document&&11>=document.documentMode,rr=null,ar=null,or=null,ir=!1;function lr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ir||null==rr||rr!==pt(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},or&&Kn(or,r)||(or=r,0<(r=Vc(ar,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function sr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ur={animationend:sr("Animation","AnimationEnd"),animationiteration:sr("Animation","AnimationIteration"),animationstart:sr("Animation","AnimationStart"),transitionrun:sr("Transition","TransitionRun"),transitionstart:sr("Transition","TransitionStart"),transitioncancel:sr("Transition","TransitionCancel"),transitionend:sr("Transition","TransitionEnd")},cr={},fr={};function dr(e){if(cr[e])return cr[e];if(!ur[e])return e;var t,n=ur[e];for(t in n)if(n.hasOwnProperty(t)&&t in fr)return cr[e]=n[t];return e}zt&&(fr=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);var pr=dr("animationend"),hr=dr("animationiteration"),mr=dr("animationstart"),gr=dr("transitionrun"),vr=dr("transitionstart"),yr=dr("transitioncancel"),br=dr("transitionend"),kr=new Map,wr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){kr.set(e,t),Ye(t,[e])}wr.push("scrollEnd");var Er=new WeakMap;function xr(e,t){if("object"==typeof e&&null!==e){var n=Er.get(e);return void 0!==n?n:(t={value:e,source:t,stack:st(t)},Er.set(e,t),t)}return{value:e,source:t,stack:st(t)}}var _r=[],Pr=0,Tr=0;function Cr(){for(var e=Pr,t=Tr=Pr=0;t<e;){var n=_r[t];_r[t++]=null;var r=_r[t];_r[t++]=null;var a=_r[t];_r[t++]=null;var o=_r[t];if(_r[t++]=null,null!==r&&null!==a){var i=r.pending;null===i?a.next=a:(a.next=i.next,i.next=a),r.pending=a}0!==o&&Ir(n,a,o)}}function Nr(e,t,n,r){_r[Pr++]=e,_r[Pr++]=t,_r[Pr++]=n,_r[Pr++]=r,Tr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Or(e,t,n,r){return Nr(e,t,n,r),jr(e)}function Ar(e,t){return Nr(e,null,null,t),jr(e)}function Ir(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var a=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(r=o.alternate)&&(r.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(a=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,a&&null!==t&&(a=31-pe(n),null===(r=(e=o.hiddenUpdates)[a])?e[a]=[t]:r.push(t),t.lane=536870912|n),o):null}function jr(e){if(50<Iu)throw Iu=0,ju=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Mr={};function Dr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(e,t,n,r){return new Dr(e,t,n,r)}function Rr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zr(e,t){var n=e.alternate;return null===n?((n=Lr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Fr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Br(e,t,n,r,a,o){var l=0;if(r=e,"function"==typeof e)Rr(e)&&(l=1);else if("string"==typeof e)l=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,U.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case T:return(e=Lr(31,n,t,a)).elementType=T,e.lanes=o,e;case g:return Hr(n.children,a,o,t);case v:l=8,a|=24;break;case y:return(e=Lr(12,n,t,2|a)).elementType=y,e.lanes=o,e;case E:return(e=Lr(13,n,t,a)).elementType=E,e.lanes=o,e;case x:return(e=Lr(19,n,t,a)).elementType=x,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case b:case w:l=10;break e;case k:l=9;break e;case S:l=11;break e;case _:l=14;break e;case P:l=16,r=null;break e}l=29,n=Error(i(130,null===e?"null":typeof e,"")),r=null}return(t=Lr(l,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Hr(e,t,n,r){return(e=Lr(7,e,r,t)).lanes=n,e}function Ur(e,t,n){return(e=Lr(6,e,null,t)).lanes=n,e}function $r(e,t,n){return(t=Lr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vr=[],qr=0,Gr=null,Wr=0,Yr=[],Xr=0,Kr=null,Jr=1,Qr="";function Zr(e,t){Vr[qr++]=Wr,Vr[qr++]=Gr,Gr=e,Wr=t}function ea(e,t,n){Yr[Xr++]=Jr,Yr[Xr++]=Qr,Yr[Xr++]=Kr,Kr=e;var r=Jr;e=Qr;var a=32-pe(r)-1;r&=~(1<<a),n+=1;var o=32-pe(t)+a;if(30<o){var i=a-a%5;o=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Jr=1<<32-pe(t)+a|n<<a|r,Qr=o+e}else Jr=1<<o|n<<a|r,Qr=e}function ta(e){null!==e.return&&(Zr(e,1),ea(e,1,0))}function na(e){for(;e===Gr;)Gr=Vr[--qr],Vr[qr]=null,Wr=Vr[--qr],Vr[qr]=null;for(;e===Kr;)Kr=Yr[--Xr],Yr[Xr]=null,Qr=Yr[--Xr],Yr[Xr]=null,Jr=Yr[--Xr],Yr[Xr]=null}var ra=null,aa=null,oa=!1,ia=null,la=!1,sa=Error(i(519));function ua(e){throw ma(xr(Error(i(418,"")),e)),sa}function ca(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ie]=e,t[je]=r,n){case"dialog":Rc("cancel",t),Rc("close",t);break;case"iframe":case"object":case"embed":Rc("load",t);break;case"video":case"audio":for(n=0;n<Mc.length;n++)Rc(Mc[n],t);break;case"source":Rc("error",t);break;case"img":case"image":case"link":Rc("error",t),Rc("load",t);break;case"details":Rc("toggle",t);break;case"input":Rc("invalid",t),vt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ft(t);break;case"select":Rc("invalid",t);break;case"textarea":Rc("invalid",t),wt(t,r.value,r.defaultValue,r.children),ft(t)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Kc(t.textContent,n)?(null!=r.popover&&(Rc("beforetoggle",t),Rc("toggle",t)),null!=r.onScroll&&Rc("scroll",t),null!=r.onScrollEnd&&Rc("scrollend",t),null!=r.onClick&&(t.onclick=Jc),t=!0):t=!1,t||ua(e)}function fa(e){for(ra=e.return;ra;)switch(ra.tag){case 5:case 13:return void(la=!1);case 27:case 3:return void(la=!0);default:ra=ra.return}}function da(e){if(e!==ra)return!1;if(!oa)return fa(e),oa=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||lf(e.type,e.memoizedProps)),t=!t),t&&aa&&ua(e),fa(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){aa=yf(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}aa=null}}else 27===n?(n=aa,hf(e.type)?(e=bf,bf=null,aa=e):aa=n):aa=ra?yf(e.stateNode.nextSibling):null;return!0}function pa(){aa=ra=null,oa=!1}function ha(){var e=ia;return null!==e&&(null===bu?bu=e:bu.push.apply(bu,e),ia=null),e}function ma(e){null===ia?ia=[e]:ia.push(e)}var ga=F(null),va=null,ya=null;function ba(e,t,n){H(ga,t._currentValue),t._currentValue=n}function ka(e){e._currentValue=ga.current,B(ga)}function wa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t,n,r){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var o=a.dependencies;if(null!==o){var l=a.child;o=o.firstContext;e:for(;null!==o;){var s=o;o=a;for(var u=0;u<t.length;u++)if(s.context===t[u]){o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),wa(o.return,n,e),r||(l=null);break e}o=s.next}}else if(18===a.tag){if(null===(l=a.return))throw Error(i(341));l.lanes|=n,null!==(o=l.alternate)&&(o.lanes|=n),wa(l,n,e),l=null}else l=a.child;if(null!==l)l.return=a;else for(l=a;null!==l;){if(l===e){l=null;break}if(null!==(a=l.sibling)){a.return=l.return,l=a;break}l=l.return}a=l}}function Ea(e,t,n,r){e=null;for(var a=t,o=!1;null!==a;){if(!o)if(524288&a.flags)o=!0;else if(262144&a.flags)break;if(10===a.tag){var l=a.alternate;if(null===l)throw Error(i(387));if(null!==(l=l.memoizedProps)){var s=a.type;Xn(a.pendingProps.value,l.value)||(null!==e?e.push(s):e=[s])}}else if(a===q.current){if(null===(l=a.alternate))throw Error(i(387));l.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(Xf):e=[Xf])}a=a.return}null!==e&&Sa(t,e,n,r),t.flags|=262144}function xa(e){for(e=e.firstContext;null!==e;){if(!Xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _a(e){va=e,ya=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Pa(e){return Ca(va,e)}function Ta(e,t){return null===va&&_a(e),Ca(e,t)}function Ca(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ya){if(null===e)throw Error(i(308));ya=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ya=ya.next=t;return n}var Na="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Oa=r.unstable_scheduleCallback,Aa=r.unstable_NormalPriority,Ia={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ja(){return{controller:new Na,data:new Map,refCount:0}}function Ma(e){e.refCount--,0===e.refCount&&Oa(Aa,function(){e.controller.abort()})}var Da=null,La=0,Ra=0,za=null;function Fa(){if(0===--La&&null!==Da){null!==za&&(za.status="fulfilled");var e=Da;Da=null,Ra=0,za=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ba=M.S;M.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Da){var n=Da=[];La=0,Ra=Nc(),za={status:"pending",value:void 0,then:function(e){n.push(e)}}}La++,t.then(Fa,Fa)}(0,t),null!==Ba&&Ba(e,t)};var Ha=F(null);function Ua(){var e=Ha.current;return null!==e?e:ru.pooledCache}function $a(e,t){H(Ha,null===t?Ha.current:t.pool)}function Va(){var e=Ua();return null===e?null:{parent:Ia._currentValue,pool:e}}var qa=Error(i(460)),Ga=Error(i(474)),Wa=Error(i(542)),Ya={then:function(){}};function Xa(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Ka(){}function Ja(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Ka,Ka),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e;default:if("string"==typeof t.status)t.then(Ka,Ka);else{if(null!==(e=ru)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e}throw Qa=t,qa}}var Qa=null;function Za(){if(null===Qa)throw Error(i(459));var e=Qa;return Qa=null,e}function eo(e){if(e===qa||e===Wa)throw Error(i(483))}var to=!1;function no(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ro(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ao(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&nu){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,t=jr(e),Ir(e,null,n),t}return Nr(e,r,t,n),jr(e)}function io(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Te(e,n)}}function lo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?a=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?a=o=t:o=o.next=t}else a=o=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var so=!1;function uo(){if(so){if(null!==za)throw za}}function co(e,t,n,r){so=!1;var a=e.updateQueue;to=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(null!==l){a.shared.pending=null;var s=l,u=s.next;s.next=null,null===i?o=u:i.next=u,i=s;var c=e.alternate;null!==c&&((l=(c=c.updateQueue).lastBaseUpdate)!==i&&(null===l?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=s))}if(null!==o){var f=a.baseState;for(i=0,c=u=s=null,l=o;;){var p=-536870913&l.lane,h=p!==l.lane;if(h?(ou&p)===p:(r&p)===p){0!==p&&p===Ra&&(so=!0),null!==c&&(c=c.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var m=e,g=l;p=t;var v=n;switch(g.tag){case 1:if("function"==typeof(m=g.payload)){f=m.call(v,f,p);break e}f=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(p="function"==typeof(m=g.payload)?m.call(v,f,p):m))break e;f=d({},f,p);break e;case 2:to=!0}}null!==(p=l.callback)&&(e.flags|=64,h&&(e.flags|=8192),null===(h=a.callbacks)?a.callbacks=[p]:h.push(p))}else h={lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===c?(u=c=h,s=f):c=c.next=h,i|=p;if(null===(l=l.next)){if(null===(l=a.shared.pending))break;l=(h=l).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}null===c&&(s=f),a.baseState=s,a.firstBaseUpdate=u,a.lastBaseUpdate=c,null===o&&(a.shared.lanes=0),pu|=i,e.lanes=i,e.memoizedState=f}}function fo(e,t){if("function"!=typeof e)throw Error(i(191,e));e.call(t)}function po(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)fo(n[e],t)}var ho=F(null),mo=F(0);function go(e,t){H(mo,e=fu),H(ho,t),fu=e|t.baseLanes}function vo(){H(mo,fu),H(ho,ho.current)}function yo(){fu=mo.current,B(ho),B(mo)}var bo=0,ko=null,wo=null,So=null,Eo=!1,xo=!1,_o=!1,Po=0,To=0,Co=null,No=0;function Oo(){throw Error(i(321))}function Ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xn(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,a,o){return bo=o,ko=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,M.H=null===e||null===e.memoizedState?Gi:Wi,_o=!1,o=n(r,a),_o=!1,xo&&(o=Mo(t,n,r,a)),jo(e),o}function jo(e){M.H=qi;var t=null!==wo&&null!==wo.next;if(bo=0,So=wo=ko=null,Eo=!1,To=0,Co=null,t)throw Error(i(300));null===e||Tl||null!==(e=e.dependencies)&&xa(e)&&(Tl=!0)}function Mo(e,t,n,r){ko=e;var a=0;do{if(xo&&(Co=null),To=0,xo=!1,25<=a)throw Error(i(301));if(a+=1,So=wo=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}M.H=Yi,o=t(n,r)}while(xo);return o}function Do(){var e=M.H,t=e.useState()[0];return t="function"==typeof t.then?Ho(t):t,e=e.useState()[0],(null!==wo?wo.memoizedState:null)!==e&&(ko.flags|=1024),t}function Lo(){var e=0!==Po;return Po=0,e}function Ro(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function zo(e){if(Eo){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Eo=!1}bo=0,So=wo=ko=null,xo=!1,To=Po=0,Co=null}function Fo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===So?ko.memoizedState=So=e:So=So.next=e,So}function Bo(){if(null===wo){var e=ko.alternate;e=null!==e?e.memoizedState:null}else e=wo.next;var t=null===So?ko.memoizedState:So.next;if(null!==t)So=t,wo=e;else{if(null===e){if(null===ko.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(wo=e).memoizedState,baseState:wo.baseState,baseQueue:wo.baseQueue,queue:wo.queue,next:null},null===So?ko.memoizedState=So=e:So=So.next=e}return So}function Ho(e){var t=To;return To+=1,null===Co&&(Co=[]),e=Ja(Co,e,t),t=ko,null===(null===So?t.memoizedState:So.next)&&(t=t.alternate,M.H=null===t||null===t.memoizedState?Gi:Wi),e}function Uo(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return Ho(e);if(e.$$typeof===w)return Pa(e)}throw Error(i(438,String(e)))}function $o(e){var t=null,n=ko.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=ko.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},ko.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=C;return t.index++,n}function Vo(e,t){return"function"==typeof t?t(e):t}function qo(e){return Go(Bo(),wo,e)}function Go(e,t,n){var r=e.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(null!==o){if(null!==a){var l=a.next;a.next=o.next,o.next=l}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,null===a)e.memoizedState=o;else{var s=l=null,u=null,c=t=a.next,f=!1;do{var d=-536870913&c.lane;if(d!==c.lane?(ou&d)===d:(bo&d)===d){var p=c.revertLane;if(0===p)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===Ra&&(f=!0);else{if((bo&p)===p){c=c.next,p===Ra&&(f=!0);continue}d={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(s=u=d,l=o):u=u.next=d,ko.lanes|=p,pu|=p}d=c.action,_o&&n(o,d),o=c.hasEagerState?c.eagerState:n(o,d)}else p={lane:d,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(s=u=p,l=o):u=u.next=p,ko.lanes|=d,pu|=d;c=c.next}while(null!==c&&c!==t);if(null===u?l=o:u.next=s,!Xn(o,e.memoizedState)&&(Tl=!0,f&&null!==(n=za)))throw n;e.memoizedState=o,e.baseState=l,e.baseQueue=u,r.lastRenderedState=o}return null===a&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Wo(e){var t=Bo(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var l=a=a.next;do{o=e(o,l.action),l=l.next}while(l!==a);Xn(o,t.memoizedState)||(Tl=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Yo(e,t,n){var r=ko,a=Bo(),o=oa;if(o){if(void 0===n)throw Error(i(407));n=n()}else n=t();var l=!Xn((wo||a).memoizedState,n);if(l&&(a.memoizedState=n,Tl=!0),a=a.queue,vi(2048,8,Jo.bind(null,r,a,e),[e]),a.getSnapshot!==t||l||null!==So&&1&So.memoizedState.tag){if(r.flags|=2048,hi(9,{destroy:void 0,resource:void 0},Ko.bind(null,r,a,n,t),null),null===ru)throw Error(i(349));o||124&bo||Xo(r,t,n)}return n}function Xo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ko.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},ko.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ko(e,t,n,r){t.value=n,t.getSnapshot=r,Qo(t)&&Zo(e)}function Jo(e,t,n){return n(function(){Qo(t)&&Zo(e)})}function Qo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xn(e,n)}catch(e){return!0}}function Zo(e){var t=Ar(e,2);null!==t&&Lu(t,e,2)}function ei(e){var t=Fo();if("function"==typeof e){var n=e;if(e=n(),_o){de(!0);try{n()}finally{de(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:e},t}function ti(e,t,n,r){return e.baseState=n,Go(e,wo,"function"==typeof r?r:Vo)}function ni(e,t,n,r,a){if(Ui(e))throw Error(i(485));if(null!==(e=t.action)){var o={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==M.T?n(!0):o.isTransition=!1,r(o),null===(n=t.pending)?(o.next=t.pending=o,ri(t,o)):(o.next=n.next,t.pending=n.next=o)}}function ri(e,t){var n=t.action,r=t.payload,a=e.state;if(t.isTransition){var o=M.T,i={};M.T=i;try{var l=n(a,r),s=M.S;null!==s&&s(i,l),ai(e,t,l)}catch(n){ii(e,t,n)}finally{M.T=o}}else try{ai(e,t,o=n(a,r))}catch(n){ii(e,t,n)}}function ai(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){oi(e,t,n)},function(n){return ii(e,t,n)}):oi(e,t,n)}function oi(e,t,n){t.status="fulfilled",t.value=n,li(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ri(e,n)))}function ii(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,li(t),t=t.next}while(t!==r)}e.action=null}function li(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function si(e,t){return t}function ui(e,t){if(oa){var n=ru.formState;if(null!==n){e:{var r=ko;if(oa){if(aa){t:{for(var a=aa,o=la;8!==a.nodeType;){if(!o){a=null;break t}if(null===(a=yf(a.nextSibling))){a=null;break t}}a="F!"===(o=a.data)||"F"===o?a:null}if(a){aa=yf(a.nextSibling),r="F!"===a.data;break e}}ua(r)}r=!1}r&&(t=n[0])}}return(n=Fo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:t},n.queue=r,n=Fi.bind(null,ko,r),r.dispatch=n,r=ei(!1),o=Hi.bind(null,ko,!1,r.queue),a={state:t,dispatch:null,action:e,pending:null},(r=Fo()).queue=a,n=ni.bind(null,ko,a,o,n),a.dispatch=n,r.memoizedState=e,[t,n,!1]}function ci(e){return fi(Bo(),wo,e)}function fi(e,t,n){if(t=Go(e,t,si)[0],e=qo(Vo)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=Ho(t)}catch(e){if(e===qa)throw Wa;throw e}else r=t;var a=(t=Bo()).queue,o=a.dispatch;return n!==t.memoizedState&&(ko.flags|=2048,hi(9,{destroy:void 0,resource:void 0},di.bind(null,a,n),null)),[r,o,e]}function di(e,t){e.action=t}function pi(e){var t=Bo(),n=wo;if(null!==n)return fi(t,n,e);Bo(),t=t.memoizedState;var r=(n=Bo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function hi(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=ko.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},ko.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function mi(){return Bo().memoizedState}function gi(e,t,n,r){var a=Fo();r=void 0===r?null:r,ko.flags|=e,a.memoizedState=hi(1|t,{destroy:void 0,resource:void 0},n,r)}function vi(e,t,n,r){var a=Bo();r=void 0===r?null:r;var o=a.memoizedState.inst;null!==wo&&null!==r&&Ao(r,wo.memoizedState.deps)?a.memoizedState=hi(t,o,n,r):(ko.flags|=e,a.memoizedState=hi(1|t,o,n,r))}function yi(e,t){gi(8390656,8,e,t)}function bi(e,t){vi(2048,8,e,t)}function ki(e,t){return vi(4,2,e,t)}function wi(e,t){return vi(4,4,e,t)}function Si(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Ei(e,t,n){n=null!=n?n.concat([e]):null,vi(4,4,Si.bind(null,t,e),n)}function xi(){}function _i(e,t){var n=Bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Pi(e,t){var n=Bo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Ao(t,r[1]))return r[0];if(r=e(),_o){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r}function Ti(e,t,n){return void 0===n||1073741824&bo?e.memoizedState=t:(e.memoizedState=n,e=Du(),ko.lanes|=e,pu|=e,n)}function Ci(e,t,n,r){return Xn(n,t)?n:null!==ho.current?(e=Ti(e,n,r),Xn(e,t)||(Tl=!0),e):42&bo?(e=Du(),ko.lanes|=e,pu|=e,t):(Tl=!0,e.memoizedState=n)}function Ni(e,t,n,r,a){var o=D.p;D.p=0!==o&&8>o?o:8;var i,l,s,u=M.T,c={};M.T=c,Hi(e,!1,t,n);try{var f=a(),d=M.S;if(null!==d&&d(c,f),null!==f&&"object"==typeof f&&"function"==typeof f.then)Bi(e,t,(i=r,l=[],s={status:"pending",value:null,reason:null,then:function(e){l.push(e)}},f.then(function(){s.status="fulfilled",s.value=i;for(var e=0;e<l.length;e++)(0,l[e])(i)},function(e){for(s.status="rejected",s.reason=e,e=0;e<l.length;e++)(0,l[e])(void 0)}),s),Mu());else Bi(e,t,r,Mu())}catch(n){Bi(e,t,{then:function(){},status:"rejected",reason:n},Mu())}finally{D.p=o,M.T=u}}function Oi(){}function Ai(e,t,n,r){if(5!==e.tag)throw Error(i(476));var a=Ii(e).queue;Ni(e,a,t,L,null===n?Oi:function(){return ji(e),n(r)})}function Ii(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:L},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ji(e){Bi(e,Ii(e).next.queue,{},Mu())}function Mi(){return Pa(Xf)}function Di(){return Bo().memoizedState}function Li(){return Bo().memoizedState}function Ri(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Mu(),r=oo(t,e=ao(n),n);return null!==r&&(Lu(r,t,n),io(r,t,n)),t={cache:ja()},void(e.payload=t)}t=t.return}}function zi(e,t,n){var r=Mu();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ui(e)?$i(t,n):null!==(n=Or(e,t,n,r))&&(Lu(n,e,r),Vi(n,t,r))}function Fi(e,t,n){Bi(e,t,n,Mu())}function Bi(e,t,n,r){var a={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ui(e))$i(t,a);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=o(i,n);if(a.hasEagerState=!0,a.eagerState=l,Xn(l,i))return Nr(e,t,a,0),null===ru&&Cr(),!1}catch(e){}if(null!==(n=Or(e,t,a,r)))return Lu(n,e,r),Vi(n,t,r),!0}return!1}function Hi(e,t,n,r){if(r={lane:2,revertLane:Nc(),action:r,hasEagerState:!1,eagerState:null,next:null},Ui(e)){if(t)throw Error(i(479))}else null!==(t=Or(e,n,r,2))&&Lu(t,e,2)}function Ui(e){var t=e.alternate;return e===ko||null!==t&&t===ko}function $i(e,t){xo=Eo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Vi(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Te(e,n)}}var qi={readContext:Pa,use:Uo,useCallback:Oo,useContext:Oo,useEffect:Oo,useImperativeHandle:Oo,useLayoutEffect:Oo,useInsertionEffect:Oo,useMemo:Oo,useReducer:Oo,useRef:Oo,useState:Oo,useDebugValue:Oo,useDeferredValue:Oo,useTransition:Oo,useSyncExternalStore:Oo,useId:Oo,useHostTransitionStatus:Oo,useFormState:Oo,useActionState:Oo,useOptimistic:Oo,useMemoCache:Oo,useCacheRefresh:Oo},Gi={readContext:Pa,use:Uo,useCallback:function(e,t){return Fo().memoizedState=[e,void 0===t?null:t],e},useContext:Pa,useEffect:yi,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,gi(4194308,4,Si.bind(null,t,e),n)},useLayoutEffect:function(e,t){return gi(4194308,4,e,t)},useInsertionEffect:function(e,t){gi(4,2,e,t)},useMemo:function(e,t){var n=Fo();t=void 0===t?null:t;var r=e();if(_o){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Fo();if(void 0!==n){var a=n(t);if(_o){de(!0);try{n(t)}finally{de(!1)}}}else a=t;return r.memoizedState=r.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},r.queue=e,e=e.dispatch=zi.bind(null,ko,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Fo().memoizedState=e},useState:function(e){var t=(e=ei(e)).queue,n=Fi.bind(null,ko,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:xi,useDeferredValue:function(e,t){return Ti(Fo(),e,t)},useTransition:function(){var e=ei(!1);return e=Ni.bind(null,ko,e.queue,!0,!1),Fo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=ko,a=Fo();if(oa){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===ru)throw Error(i(349));124&ou||Xo(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,yi(Jo.bind(null,r,o,e),[e]),r.flags|=2048,hi(9,{destroy:void 0,resource:void 0},Ko.bind(null,r,o,n,t),null),n},useId:function(){var e=Fo(),t=ru.identifierPrefix;if(oa){var n=Qr;t=""+t+"R"+(n=(Jr&~(1<<32-pe(Jr)-1)).toString(32)+n),0<(n=Po++)&&(t+="H"+n.toString(32)),t+=""}else t=""+t+"r"+(n=No++).toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Mi,useFormState:ui,useActionState:ui,useOptimistic:function(e){var t=Fo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Hi.bind(null,ko,!0,n),n.dispatch=t,[e,t]},useMemoCache:$o,useCacheRefresh:function(){return Fo().memoizedState=Ri.bind(null,ko)}},Wi={readContext:Pa,use:Uo,useCallback:_i,useContext:Pa,useEffect:bi,useImperativeHandle:Ei,useInsertionEffect:ki,useLayoutEffect:wi,useMemo:Pi,useReducer:qo,useRef:mi,useState:function(){return qo(Vo)},useDebugValue:xi,useDeferredValue:function(e,t){return Ci(Bo(),wo.memoizedState,e,t)},useTransition:function(){var e=qo(Vo)[0],t=Bo().memoizedState;return["boolean"==typeof e?e:Ho(e),t]},useSyncExternalStore:Yo,useId:Di,useHostTransitionStatus:Mi,useFormState:ci,useActionState:ci,useOptimistic:function(e,t){return ti(Bo(),0,e,t)},useMemoCache:$o,useCacheRefresh:Li},Yi={readContext:Pa,use:Uo,useCallback:_i,useContext:Pa,useEffect:bi,useImperativeHandle:Ei,useInsertionEffect:ki,useLayoutEffect:wi,useMemo:Pi,useReducer:Wo,useRef:mi,useState:function(){return Wo(Vo)},useDebugValue:xi,useDeferredValue:function(e,t){var n=Bo();return null===wo?Ti(n,e,t):Ci(n,wo.memoizedState,e,t)},useTransition:function(){var e=Wo(Vo)[0],t=Bo().memoizedState;return["boolean"==typeof e?e:Ho(e),t]},useSyncExternalStore:Yo,useId:Di,useHostTransitionStatus:Mi,useFormState:pi,useActionState:pi,useOptimistic:function(e,t){var n=Bo();return null!==wo?ti(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:$o,useCacheRefresh:Li},Xi=null,Ki=0;function Ji(e){var t=Ki;return Ki+=1,null===Xi&&(Xi=[]),Ja(Xi,e,t)}function Qi(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Zi(e,t){if(t.$$typeof===p)throw Error(i(525));throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function el(e){return(0,e._init)(e._payload)}function tl(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=zr(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Ur(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function u(e,t,n,r){var o=n.type;return o===g?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===P&&el(o)===t.type)?(Qi(t=a(t,n.props),n),t.return=e,t):(Qi(t=Br(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$r(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function f(e,t,n,r,o){return null===t||7!==t.tag?((t=Hr(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Ur(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case h:return Qi(n=Br(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=$r(t,e.mode,n)).return=e,t;case P:return d(e,t=(0,t._init)(t._payload),n)}if(j(t)||O(t))return(t=Hr(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return d(e,Ji(t),n);if(t.$$typeof===w)return d(e,Ta(e,t),n);Zi(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==a?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case h:return n.key===a?u(e,t,n,r):null;case m:return n.key===a?c(e,t,n,r):null;case P:return p(e,t,n=(a=n._init)(n._payload),r)}if(j(n)||O(n))return null!==a?null:f(e,t,n,r,null);if("function"==typeof n.then)return p(e,t,Ji(n),r);if(n.$$typeof===w)return p(e,t,Ta(e,n),r);Zi(e,n)}return null}function v(e,t,n,r,a){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return s(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case h:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case P:return v(e,t,n,r=(0,r._init)(r._payload),a)}if(j(r)||O(r))return f(t,e=e.get(n)||null,r,a,null);if("function"==typeof r.then)return v(e,t,n,Ji(r),a);if(r.$$typeof===w)return v(e,t,n,Ta(t,r),a);Zi(t,r)}return null}function y(s,u,c,f){if("object"==typeof c&&null!==c&&c.type===g&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case h:e:{for(var b=c.key;null!==u;){if(u.key===b){if((b=c.type)===g){if(7===u.tag){n(s,u.sibling),(f=a(u,c.props.children)).return=s,s=f;break e}}else if(u.elementType===b||"object"==typeof b&&null!==b&&b.$$typeof===P&&el(b)===u.type){n(s,u.sibling),Qi(f=a(u,c.props),c),f.return=s,s=f;break e}n(s,u);break}t(s,u),u=u.sibling}c.type===g?((f=Hr(c.props.children,s.mode,f,c.key)).return=s,s=f):(Qi(f=Br(c.type,c.key,c.props,null,s.mode,f),c),f.return=s,s=f)}return l(s);case m:e:{for(b=c.key;null!==u;){if(u.key===b){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(s,u.sibling),(f=a(u,c.children||[])).return=s,s=f;break e}n(s,u);break}t(s,u),u=u.sibling}(f=$r(c,s.mode,f)).return=s,s=f}return l(s);case P:return y(s,u,c=(b=c._init)(c._payload),f)}if(j(c))return function(a,i,l,s){for(var u=null,c=null,f=i,h=i=0,m=null;null!==f&&h<l.length;h++){f.index>h?(m=f,f=null):m=f.sibling;var g=p(a,f,l[h],s);if(null===g){null===f&&(f=m);break}e&&f&&null===g.alternate&&t(a,f),i=o(g,i,h),null===c?u=g:c.sibling=g,c=g,f=m}if(h===l.length)return n(a,f),oa&&Zr(a,h),u;if(null===f){for(;h<l.length;h++)null!==(f=d(a,l[h],s))&&(i=o(f,i,h),null===c?u=f:c.sibling=f,c=f);return oa&&Zr(a,h),u}for(f=r(f);h<l.length;h++)null!==(m=v(f,a,h,l[h],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?h:m.key),i=o(m,i,h),null===c?u=m:c.sibling=m,c=m);return e&&f.forEach(function(e){return t(a,e)}),oa&&Zr(a,h),u}(s,u,c,f);if(O(c)){if("function"!=typeof(b=O(c)))throw Error(i(150));return function(a,l,s,u){if(null==s)throw Error(i(151));for(var c=null,f=null,h=l,m=l=0,g=null,y=s.next();null!==h&&!y.done;m++,y=s.next()){h.index>m?(g=h,h=null):g=h.sibling;var b=p(a,h,y.value,u);if(null===b){null===h&&(h=g);break}e&&h&&null===b.alternate&&t(a,h),l=o(b,l,m),null===f?c=b:f.sibling=b,f=b,h=g}if(y.done)return n(a,h),oa&&Zr(a,m),c;if(null===h){for(;!y.done;m++,y=s.next())null!==(y=d(a,y.value,u))&&(l=o(y,l,m),null===f?c=y:f.sibling=y,f=y);return oa&&Zr(a,m),c}for(h=r(h);!y.done;m++,y=s.next())null!==(y=v(h,a,m,y.value,u))&&(e&&null!==y.alternate&&h.delete(null===y.key?m:y.key),l=o(y,l,m),null===f?c=y:f.sibling=y,f=y);return e&&h.forEach(function(e){return t(a,e)}),oa&&Zr(a,m),c}(s,u,c=b.call(c),f)}if("function"==typeof c.then)return y(s,u,Ji(c),f);if(c.$$typeof===w)return y(s,u,Ta(s,c),f);Zi(s,c)}return"string"==typeof c&&""!==c||"number"==typeof c||"bigint"==typeof c?(c=""+c,null!==u&&6===u.tag?(n(s,u.sibling),(f=a(u,c)).return=s,s=f):(n(s,u),(f=Ur(c,s.mode,f)).return=s,s=f),l(s)):n(s,u)}return function(e,t,n,r){try{Ki=0;var a=y(e,t,n,r);return Xi=null,a}catch(t){if(t===qa||t===Wa)throw t;var o=Lr(29,t,null,e.mode);return o.lanes=r,o.return=e,o}}}var nl=tl(!0),rl=tl(!1),al=F(null),ol=null;function il(e){var t=e.alternate;H(cl,1&cl.current),H(al,e),null===ol&&(null===t||null!==ho.current||null!==t.memoizedState)&&(ol=e)}function ll(e){if(22===e.tag){if(H(cl,cl.current),H(al,e),null===ol){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ol=e)}}else sl()}function sl(){H(cl,cl.current),H(al,al.current)}function ul(e){B(al),ol===e&&(ol=null),B(cl)}var cl=F(0);function fl(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||vf(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function dl(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:d({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var pl={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Mu(),a=ao(r);a.payload=t,null!=n&&(a.callback=n),null!==(t=oo(e,a,r))&&(Lu(t,e,r),io(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Mu(),a=ao(r);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=oo(e,a,r))&&(Lu(t,e,r),io(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Mu(),r=ao(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=oo(e,r,n))&&(Lu(t,e,n),io(t,e,n))}};function hl(e,t,n,r,a,o,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!Kn(n,r)||!Kn(a,o))}function ml(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pl.enqueueReplaceState(t,t.state,null)}function gl(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var a in n===t&&(n=d({},n)),e)void 0===n[a]&&(n[a]=e[a]);return n}var vl="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function yl(e){vl(e)}function bl(e){console.error(e)}function kl(e){vl(e)}function wl(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function Sl(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function El(e,t,n){return(n=ao(n)).tag=3,n.payload={element:null},n.callback=function(){wl(e,t)},n}function xl(e){return(e=ao(e)).tag=3,e}function _l(e,t,n,r){var a=n.type.getDerivedStateFromError;if("function"==typeof a){var o=r.value;e.payload=function(){return a(o)},e.callback=function(){Sl(t,n,r)}}var i=n.stateNode;null!==i&&"function"==typeof i.componentDidCatch&&(e.callback=function(){Sl(t,n,r),"function"!=typeof a&&(null===xu?xu=new Set([this]):xu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Pl=Error(i(461)),Tl=!1;function Cl(e,t,n,r){t.child=null===e?rl(t,null,n,r):nl(t,e.child,n,r)}function Nl(e,t,n,r,a){n=n.render;var o=t.ref;if("ref"in r){var i={};for(var l in r)"ref"!==l&&(i[l]=r[l])}else i=r;return _a(t),r=Io(e,t,n,i,o,a),l=Lo(),null===e||Tl?(oa&&l&&ta(t),t.flags|=1,Cl(e,t,r,a),t.child):(Ro(e,t,a),Xl(e,t,a))}function Ol(e,t,n,r,a){if(null===e){var o=n.type;return"function"!=typeof o||Rr(o)||void 0!==o.defaultProps||null!==n.compare?((e=Br(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Al(e,t,o,r,a))}if(o=e.child,!Kl(e,a)){var i=o.memoizedProps;if((n=null!==(n=n.compare)?n:Kn)(i,r)&&e.ref===t.ref)return Xl(e,t,a)}return t.flags|=1,(e=zr(o,r)).ref=t.ref,e.return=t,t.child=e}function Al(e,t,n,r,a){if(null!==e){var o=e.memoizedProps;if(Kn(o,r)&&e.ref===t.ref){if(Tl=!1,t.pendingProps=r=o,!Kl(e,a))return t.lanes=e.lanes,Xl(e,t,a);131072&e.flags&&(Tl=!0)}}return Dl(e,t,n,r,a)}function Il(e,t,n){var r=t.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(128&t.flags){if(r=null!==o?o.baseLanes|n:n,null!==e){for(a=t.child=e.child,o=0;null!==a;)o=o|a.lanes|a.childLanes,a=a.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return jl(e,t,r,n)}if(!(536870912&n))return t.lanes=t.childLanes=536870912,jl(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&$a(0,null!==o?o.cachePool:null),null!==o?go(t,o):vo(),ll(t)}else null!==o?($a(0,o.cachePool),go(t,o),sl(),t.memoizedState=null):(null!==e&&$a(0,null),vo(),sl());return Cl(e,t,a,n),t.child}function jl(e,t,n,r){var a=Ua();return a=null===a?null:{parent:Ia._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},null!==e&&$a(0,null),vo(),ll(t),null!==e&&Ea(e,t,r,!0),null}function Ml(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(i(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Dl(e,t,n,r,a){return _a(t),n=Io(e,t,n,r,void 0,a),r=Lo(),null===e||Tl?(oa&&r&&ta(t),t.flags|=1,Cl(e,t,n,a),t.child):(Ro(e,t,a),Xl(e,t,a))}function Ll(e,t,n,r,a,o){return _a(t),t.updateQueue=null,n=Mo(t,r,n,a),jo(e),r=Lo(),null===e||Tl?(oa&&r&&ta(t),t.flags|=1,Cl(e,t,n,o),t.child):(Ro(e,t,o),Xl(e,t,o))}function Rl(e,t,n,r,a){if(_a(t),null===t.stateNode){var o=Mr,i=n.contextType;"object"==typeof i&&null!==i&&(o=Pa(i)),o=new n(r,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=pl,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},no(t),i=n.contextType,o.context="object"==typeof i&&null!==i?Pa(i):Mr,o.state=t.memoizedState,"function"==typeof(i=n.getDerivedStateFromProps)&&(dl(t,n,i,r),o.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(i=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),i!==o.state&&pl.enqueueReplaceState(o,o.state,null),co(t,r,o,a),uo(),o.state=t.memoizedState),"function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var l=t.memoizedProps,s=gl(n,l);o.props=s;var u=o.context,c=n.contextType;i=Mr,"object"==typeof c&&null!==c&&(i=Pa(c));var f=n.getDerivedStateFromProps;c="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate,l=t.pendingProps!==l,c||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(l||u!==i)&&ml(t,o,r,i),to=!1;var d=t.memoizedState;o.state=d,co(t,r,o,a),uo(),u=t.memoizedState,l||d!==u||to?("function"==typeof f&&(dl(t,n,f,r),u=t.memoizedState),(s=to||hl(t,n,s,r,d,u,i))?(c||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=i,r=s):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ro(e,t),c=gl(n,i=t.memoizedProps),o.props=c,f=t.pendingProps,d=o.context,u=n.contextType,s=Mr,"object"==typeof u&&null!==u&&(s=Pa(u)),(u="function"==typeof(l=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(i!==f||d!==s)&&ml(t,o,r,s),to=!1,d=t.memoizedState,o.state=d,co(t,r,o,a),uo();var p=t.memoizedState;i!==f||d!==p||to||null!==e&&null!==e.dependencies&&xa(e.dependencies)?("function"==typeof l&&(dl(t,n,l,r),p=t.memoizedState),(c=to||hl(t,n,c,r,d,p,s)||null!==e&&null!==e.dependencies&&xa(e.dependencies))?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||i===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!=typeof o.componentDidUpdate||i===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,Ml(e,t),r=!!(128&t.flags),o||r?(o=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=nl(t,e.child,null,a),t.child=nl(t,null,n,a)):Cl(e,t,n,a),t.memoizedState=o.state,e=t.child):e=Xl(e,t,a),e}function zl(e,t,n,r){return pa(),t.flags|=256,Cl(e,t,n,r),t.child}var Fl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bl(e){return{baseLanes:e,cachePool:Va()}}function Hl(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gu),e}function Ul(e,t,n){var r,a=t.pendingProps,o=!1,l=!!(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&!!(2&cl.current)),r&&(o=!0,t.flags&=-129),r=!!(32&t.flags),t.flags&=-33,null===e){if(oa){if(o?il(t):sl(),oa){var s,u=aa;if(s=u){e:{for(s=u,u=la;8!==s.nodeType;){if(!u){u=null;break e}if(null===(s=yf(s.nextSibling))){u=null;break e}}u=s}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==Kr?{id:Jr,overflow:Qr}:null,retryLane:536870912,hydrationErrors:null},(s=Lr(18,null,null,0)).stateNode=u,s.return=t,t.child=s,ra=t,aa=null,s=!0):s=!1}s||ua(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return vf(u)?t.lanes=32:t.lanes=536870912,null;ul(t)}return u=a.children,a=a.fallback,o?(sl(),u=Vl({mode:"hidden",children:u},o=t.mode),a=Hr(a,o,n,null),u.return=t,a.return=t,u.sibling=a,t.child=u,(o=t.child).memoizedState=Bl(n),o.childLanes=Hl(e,r,n),t.memoizedState=Fl,a):(il(t),$l(t,u))}if(null!==(s=e.memoizedState)&&null!==(u=s.dehydrated)){if(l)256&t.flags?(il(t),t.flags&=-257,t=ql(e,t,n)):null!==t.memoizedState?(sl(),t.child=e.child,t.flags|=128,t=null):(sl(),o=a.fallback,u=t.mode,a=Vl({mode:"visible",children:a.children},u),(o=Hr(o,u,n,null)).flags|=2,a.return=t,o.return=t,a.sibling=o,t.child=a,nl(t,e.child,null,n),(a=t.child).memoizedState=Bl(n),a.childLanes=Hl(e,r,n),t.memoizedState=Fl,t=o);else if(il(t),vf(u)){if(r=u.nextSibling&&u.nextSibling.dataset)var c=r.dgst;r=c,(a=Error(i(419))).stack="",a.digest=r,ma({value:a,source:null,stack:null}),t=ql(e,t,n)}else if(Tl||Ea(e,t,n,!1),r=0!==(n&e.childLanes),Tl||r){if(null!==(r=ru)&&(0!==(a=0!==((a=42&(a=n&-n)?1:Ce(a))&(r.suspendedLanes|n))?0:a)&&a!==s.retryLane))throw s.retryLane=a,Ar(e,a),Lu(r,e,a),Pl;"$?"===u.data||Wu(),t=ql(e,t,n)}else"$?"===u.data?(t.flags|=192,t.child=e.child,t=null):(e=s.treeContext,aa=yf(u.nextSibling),ra=t,oa=!0,ia=null,la=!1,null!==e&&(Yr[Xr++]=Jr,Yr[Xr++]=Qr,Yr[Xr++]=Kr,Jr=e.id,Qr=e.overflow,Kr=t),(t=$l(t,a.children)).flags|=4096);return t}return o?(sl(),o=a.fallback,u=t.mode,c=(s=e.child).sibling,(a=zr(s,{mode:"hidden",children:a.children})).subtreeFlags=65011712&s.subtreeFlags,null!==c?o=zr(c,o):(o=Hr(o,u,n,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,null===(u=e.child.memoizedState)?u=Bl(n):(null!==(s=u.cachePool)?(c=Ia._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=Va(),u={baseLanes:u.baseLanes|n,cachePool:s}),o.memoizedState=u,o.childLanes=Hl(e,r,n),t.memoizedState=Fl,a):(il(t),e=(n=e.child).sibling,(n=zr(n,{mode:"visible",children:a.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function $l(e,t){return(t=Vl({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Vl(e,t){return(e=Lr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function ql(e,t,n){return nl(t,e.child,null,n),(e=$l(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Gl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),wa(e.return,t,n)}function Wl(e,t,n,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function Yl(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(Cl(e,t,r.children,n),2&(r=cl.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Gl(e,n,t);else if(19===e.tag)Gl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(H(cl,r),a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===fl(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Wl(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===fl(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Wl(t,!0,n,null,o);break;case"together":Wl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pu|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ea(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=zr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Kl(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!xa(e))}function Jl(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Tl=!0;else{if(!(Kl(e,n)||128&t.flags))return Tl=!1,function(e,t,n){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),ba(0,Ia,e.memoizedState.cache),pa();break;case 27:case 5:Y(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:ba(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(il(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ul(e,t,n):(il(t),null!==(e=Xl(e,t,n))?e.sibling:null);il(t);break;case 19:var a=!!(128&e.flags);if((r=0!==(n&t.childLanes))||(Ea(e,t,n,!1),r=0!==(n&t.childLanes)),a){if(r)return Yl(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),H(cl,cl.current),r)break;return null;case 22:case 23:return t.lanes=0,Il(e,t,n);case 24:ba(0,Ia,e.memoizedState.cache)}return Xl(e,t,n)}(e,t,n);Tl=!!(131072&e.flags)}else Tl=!1,oa&&1048576&t.flags&&ea(t,Wr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,a=r._init;if(r=a(r._payload),t.type=r,"function"!=typeof r){if(null!=r){if((a=r.$$typeof)===S){t.tag=11,t=Nl(null,t,r,e,n);break e}if(a===_){t.tag=14,t=Ol(null,t,r,e,n);break e}}throw t=I(r)||r,Error(i(306,t,""))}Rr(r)?(e=gl(r,e),t.tag=1,t=Rl(null,t,r,e,n)):(t.tag=0,t=Dl(null,t,r,e,n))}return t;case 0:return Dl(e,t,t.type,t.pendingProps,n);case 1:return Rl(e,t,r=t.type,a=gl(r,t.pendingProps),n);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(i(387));r=t.pendingProps;var o=t.memoizedState;a=o.element,ro(e,t),co(t,r,null,n);var l=t.memoizedState;if(r=l.cache,ba(0,Ia,r),r!==o.cache&&Sa(t,[Ia],n,!0),uo(),r=l.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:l.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=zl(e,t,r,n);break e}if(r!==a){ma(a=xr(Error(i(424)),t)),t=zl(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(aa=yf(e.firstChild),ra=t,oa=!0,ia=null,la=!0,n=rl(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===a){t=Xl(e,t,n);break e}Cl(e,t,r,n)}t=t.child}return t;case 26:return Ml(e,t),null===e?(n=Nf(t.type,null,t.pendingProps,null))?t.memoizedState=n:oa||(n=t.type,e=t.pendingProps,(r=rf(V.current).createElement(n))[Ie]=t,r[je]=e,ef(r,n,e),qe(r),t.stateNode=r):t.memoizedState=Nf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Y(t),null===e&&oa&&(r=t.stateNode=wf(t.type,t.pendingProps,V.current),ra=t,la=!0,a=aa,hf(t.type)?(bf=a,aa=yf(r.firstChild)):aa=a),Cl(e,t,t.pendingProps.children,n),Ml(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&oa&&((a=r=aa)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Fe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==a.rel||e.getAttribute("href")!==(null==a.href||""===a.href?null:a.href)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin)||e.getAttribute("title")!==(null==a.title?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==a.src?null:a.src)||e.getAttribute("type")!==(null==a.type?null:a.type)||e.getAttribute("crossorigin")!==(null==a.crossOrigin?null:a.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==a.name?null:""+a.name;if("hidden"===a.type&&e.getAttribute("name")===o)return e}if(null===(e=yf(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,la))?(t.stateNode=r,ra=t,aa=yf(r.firstChild),la=!1,a=!0):a=!1),a||ua(t)),Y(t),a=t.type,o=t.pendingProps,l=null!==e?e.memoizedProps:null,r=o.children,lf(a,o)?r=null:null!==l&&lf(a,l)&&(t.flags|=32),null!==t.memoizedState&&(a=Io(e,t,Do,null,null,n),Xf._currentValue=a),Ml(e,t),Cl(e,t,r,n),t.child;case 6:return null===e&&oa&&((e=n=aa)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yf(e.nextSibling)))return null}return e}(n,t.pendingProps,la))?(t.stateNode=n,ra=t,aa=null,e=!0):e=!1),e||ua(t)),null;case 13:return Ul(e,t,n);case 4:return G(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=nl(t,null,r,n):Cl(e,t,r,n),t.child;case 11:return Nl(e,t,t.type,t.pendingProps,n);case 7:return Cl(e,t,t.pendingProps,n),t.child;case 8:case 12:return Cl(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ba(0,t.type,r.value),Cl(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,_a(t),r=r(a=Pa(a)),t.flags|=1,Cl(e,t,r,n),t.child;case 14:return Ol(e,t,t.type,t.pendingProps,n);case 15:return Al(e,t,t.type,t.pendingProps,n);case 19:return Yl(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Vl(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=zr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Il(e,t,n);case 24:return _a(t),r=Pa(Ia),null===e?(null===(a=Ua())&&(a=ru,o=ja(),a.pooledCache=o,o.refCount++,null!==o&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:r,cache:a},no(t),ba(0,Ia,a)):(0!==(e.lanes&n)&&(ro(e,t),co(t,null,null,n),uo()),a=e.memoizedState,o=t.memoizedState,a.parent!==r?(a={parent:r,cache:r},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),ba(0,Ia,r)):(r=o.cache,ba(0,Ia,r),r!==a.cache&&Sa(t,[Ia],n,!0))),Cl(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Ql(e){e.flags|=4}function Zl(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!Uf(t)){if(null!==(t=al.current)&&((4194048&ou)===ou?null!==ol:(62914560&ou)!==ou&&!(536870912&ou)||t!==ol))throw Qa=Ya,Ga;e.flags|=8192}}function es(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ee():536870912,e.lanes|=t,vu|=t)}function ts(e,t){if(!oa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ns(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=65011712&a.subtreeFlags,r|=65011712&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rs(e,t,n){var r=t.pendingProps;switch(na(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return ns(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ka(Ia),W(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(da(t)?Ql(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,ha())),ns(t),null;case 26:return n=t.memoizedState,null===e?(Ql(t),null!==n?(ns(t),Zl(t,n)):(ns(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ql(t),ns(t),Zl(t,n)):(ns(t),t.flags&=-16777217):(e.memoizedProps!==r&&Ql(t),ns(t),t.flags&=-16777217),null;case 27:X(t),n=V.current;var a=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ql(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return ns(t),null}e=U.current,da(t)?ca(t):(e=wf(a,r,n),t.stateNode=e,Ql(t))}return ns(t),null;case 5:if(X(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ql(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return ns(t),null}if(e=U.current,da(t))ca(t);else{switch(a=rf(V.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof r.is?a.createElement("select",{is:r.is}):a.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"==typeof r.is?a.createElement(n,{is:r.is}):a.createElement(n)}}e[Ie]=t,e[je]=r;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(ef(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ql(t)}}return ns(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Ql(t);else{if("string"!=typeof r&&null===t.stateNode)throw Error(i(166));if(e=V.current,da(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(a=ra))switch(a.tag){case 27:case 5:r=a.memoizedProps}e[Ie]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Kc(e.nodeValue,n)))||ua(t)}else(e=rf(e).createTextNode(r))[Ie]=t,t.stateNode=e}return ns(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[Ie]=t}else pa(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ns(t),a=!1}else a=ha(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(ul(t),t):(ul(t),null)}if(ul(t),128&t.flags)return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){a=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(a=r.alternate.memoizedState.cachePool.pool);var o=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),es(t,t.updateQueue),ns(t),null;case 4:return W(),null===e&&Bc(t.stateNode.containerInfo),ns(t),null;case 10:return ka(t.type),ns(t),null;case 19:if(B(cl),null===(a=t.memoizedState))return ns(t),null;if(r=!!(128&t.flags),null===(o=a.rendering))if(r)ts(a,!1);else{if(0!==du||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(o=fl(e))){for(t.flags|=128,ts(a,!1),e=o.updateQueue,t.updateQueue=e,es(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Fr(n,e),n=n.sibling;return H(cl,1&cl.current|2),t.child}e=e.sibling}null!==a.tail&&te()>Su&&(t.flags|=128,r=!0,ts(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=fl(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,es(t,e),ts(a,!0),null===a.tail&&"hidden"===a.tailMode&&!o.alternate&&!oa)return ns(t),null}else 2*te()-a.renderingStartTime>Su&&536870912!==n&&(t.flags|=128,r=!0,ts(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=a.last)?e.sibling=o:t.child=o,a.last=o)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=te(),t.sibling=null,e=cl.current,H(cl,r?1&e|2:1&e),t):(ns(t),null);case 22:case 23:return ul(t),yo(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?!!(536870912&n)&&!(128&t.flags)&&(ns(t),6&t.subtreeFlags&&(t.flags|=8192)):ns(t),null!==(n=t.updateQueue)&&es(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&B(Ha),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ka(Ia),ns(t),null;case 25:case 30:return null}throw Error(i(156,t.tag))}function as(e,t){switch(na(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ka(Ia),W(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return X(t),null;case 13:if(ul(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(cl),null;case 4:return W(),null;case 10:return ka(t.type),null;case 22:case 23:return ul(t),yo(),null!==e&&B(Ha),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ka(Ia),null;default:return null}}function os(e,t){switch(na(t),t.tag){case 3:ka(Ia),W();break;case 26:case 27:case 5:X(t);break;case 4:W();break;case 13:ul(t);break;case 19:B(cl);break;case 10:ka(t.type);break;case 22:case 23:ul(t),yo(),null!==e&&B(Ha);break;case 24:ka(Ia)}}function is(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var a=r.next;n=a;do{if((n.tag&e)===e){r=void 0;var o=n.create,i=n.inst;r=o(),i.destroy=r}n=n.next}while(n!==a)}}catch(e){cc(t,t.return,e)}}function ls(e,t,n){try{var r=t.updateQueue,a=null!==r?r.lastEffect:null;if(null!==a){var o=a.next;r=o;do{if((r.tag&e)===e){var i=r.inst,l=i.destroy;if(void 0!==l){i.destroy=void 0,a=t;var s=n,u=l;try{u()}catch(e){cc(a,s,e)}}}r=r.next}while(r!==o)}}catch(e){cc(t,t.return,e)}}function ss(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{po(t,n)}catch(t){cc(e,e.return,t)}}}function us(e,t,n){n.props=gl(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){cc(e,t,n)}}function cs(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(n){cc(e,t,n)}}function fs(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(n){cc(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(n){cc(e,t,n)}else n.current=null}function ds(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){cc(e,e.return,t)}}function ps(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,o=null,l=null,s=null,u=null,c=null,f=null;for(h in n){var d=n[h];if(n.hasOwnProperty(h)&&null!=d)switch(h){case"checked":case"value":break;case"defaultValue":u=d;default:r.hasOwnProperty(h)||Qc(e,t,h,null,r,d)}}for(var p in r){var h=r[p];if(d=n[p],r.hasOwnProperty(p)&&(null!=h||null!=d))switch(p){case"type":o=h;break;case"name":a=h;break;case"checked":c=h;break;case"defaultChecked":f=h;break;case"value":l=h;break;case"defaultValue":s=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(i(137,t));break;default:h!==d&&Qc(e,t,p,h,r,d)}}return void gt(e,l,s,u,c,f,o,a);case"select":for(o in h=l=s=p=null,n)if(u=n[o],n.hasOwnProperty(o)&&null!=u)switch(o){case"value":break;case"multiple":h=u;default:r.hasOwnProperty(o)||Qc(e,t,o,null,r,u)}for(a in r)if(o=r[a],u=n[a],r.hasOwnProperty(a)&&(null!=o||null!=u))switch(a){case"value":p=o;break;case"defaultValue":s=o;break;case"multiple":l=o;default:o!==u&&Qc(e,t,a,o,r,u)}return t=s,n=l,r=h,void(null!=p?bt(e,!!n,p,!1):!!r!=!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(s in h=p=null,n)if(a=n[s],n.hasOwnProperty(s)&&null!=a&&!r.hasOwnProperty(s))switch(s){case"value":case"children":break;default:Qc(e,t,s,null,r,a)}for(l in r)if(a=r[l],o=n[l],r.hasOwnProperty(l)&&(null!=a||null!=o))switch(l){case"value":p=a;break;case"defaultValue":h=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(i(91));break;default:a!==o&&Qc(e,t,l,a,r,o)}return void kt(e,p,h);case"option":for(var m in n)if(p=n[m],n.hasOwnProperty(m)&&null!=p&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Qc(e,t,m,null,r,p);for(u in r)if(p=r[u],h=n[u],r.hasOwnProperty(u)&&p!==h&&(null!=p||null!=h))if("selected"===u)e.selected=p&&"function"!=typeof p&&"symbol"!=typeof p;else Qc(e,t,u,p,r,h);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g)&&Qc(e,t,g,null,r,p);for(c in r)if(p=r[c],h=n[c],r.hasOwnProperty(c)&&p!==h&&(null!=p||null!=h))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(i(137,t));break;default:Qc(e,t,c,p,r,h)}return;default:if(Pt(t)){for(var v in n)p=n[v],n.hasOwnProperty(v)&&void 0!==p&&!r.hasOwnProperty(v)&&Zc(e,t,v,void 0,r,p);for(f in r)p=r[f],h=n[f],!r.hasOwnProperty(f)||p===h||void 0===p&&void 0===h||Zc(e,t,f,p,r,h);return}}for(var y in n)p=n[y],n.hasOwnProperty(y)&&null!=p&&!r.hasOwnProperty(y)&&Qc(e,t,y,null,r,p);for(d in r)p=r[d],h=n[d],!r.hasOwnProperty(d)||p===h||null==p&&null==h||Qc(e,t,d,p,r,h)}(r,e.type,n,t),r[je]=t}catch(t){cc(e,e.return,t)}}function hs(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&hf(e.type)||4===e.tag}function ms(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||hs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&hf(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Jc));else if(4!==r&&(27===r&&hf(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gs(e,t,n),e=e.sibling;null!==e;)gs(e,t,n),e=e.sibling}function vs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&hf(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vs(e,t,n),e=e.sibling;null!==e;)vs(e,t,n),e=e.sibling}function ys(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);ef(t,r,n),t[Ie]=e,t[je]=n}catch(t){cc(e,e.return,t)}}var bs=!1,ks=!1,ws=!1,Ss="function"==typeof WeakSet?WeakSet:Set,Es=null;function xs(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Rs(e,n),4&r&&is(5,n);break;case 1:if(Rs(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(e){cc(n,n.return,e)}else{var a=gl(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){cc(n,n.return,e)}}64&r&&ss(n),512&r&&cs(n,n.return);break;case 3:if(Rs(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{po(e,t)}catch(e){cc(n,n.return,e)}}break;case 27:null===t&&4&r&&ys(n);case 26:case 5:Rs(e,n),null===t&&4&r&&ds(n),512&r&&cs(n,n.return);break;case 12:Rs(e,n);break;case 13:Rs(e,n),4&r&&Os(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=hc.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||bs)){t=null!==t&&null!==t.memoizedState||ks,a=bs;var o=ks;bs=r,(ks=t)&&!o?Fs(e,n,!!(8772&n.subtreeFlags)):Rs(e,n),bs=a,ks=o}break;case 30:break;default:Rs(e,n)}}function _s(e){var t=e.alternate;null!==t&&(e.alternate=null,_s(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Be(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ps=null,Ts=!1;function Cs(e,t,n){for(n=n.child;null!==n;)Ns(e,t,n),n=n.sibling}function Ns(e,t,n){if(fe&&"function"==typeof fe.onCommitFiberUnmount)try{fe.onCommitFiberUnmount(ce,n)}catch(e){}switch(n.tag){case 26:ks||fs(n,t),Cs(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:ks||fs(n,t);var r=Ps,a=Ts;hf(n.type)&&(Ps=n.stateNode,Ts=!1),Cs(e,t,n),Sf(n.stateNode),Ps=r,Ts=a;break;case 5:ks||fs(n,t);case 6:if(r=Ps,a=Ts,Ps=null,Cs(e,t,n),Ts=a,null!==(Ps=r))if(Ts)try{(9===Ps.nodeType?Ps.body:"HTML"===Ps.nodeName?Ps.ownerDocument.body:Ps).removeChild(n.stateNode)}catch(e){cc(n,t,e)}else try{Ps.removeChild(n.stateNode)}catch(e){cc(n,t,e)}break;case 18:null!==Ps&&(Ts?(mf(9===(e=Ps).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Cd(e)):mf(Ps,n.stateNode));break;case 4:r=Ps,a=Ts,Ps=n.stateNode.containerInfo,Ts=!0,Cs(e,t,n),Ps=r,Ts=a;break;case 0:case 11:case 14:case 15:ks||ls(2,n,t),ks||ls(4,n,t),Cs(e,t,n);break;case 1:ks||(fs(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&us(n,t,r)),Cs(e,t,n);break;case 21:Cs(e,t,n);break;case 22:ks=(r=ks)||null!==n.memoizedState,Cs(e,t,n),ks=r;break;default:Cs(e,t,n)}}function Os(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Cd(e)}catch(e){cc(t,t.return,e)}}function As(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Ss),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Ss),t;default:throw Error(i(435,e.tag))}}(e);t.forEach(function(t){var r=mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Is(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r],o=e,l=t,s=l;e:for(;null!==s;){switch(s.tag){case 27:if(hf(s.type)){Ps=s.stateNode,Ts=!1;break e}break;case 5:Ps=s.stateNode,Ts=!1;break e;case 3:case 4:Ps=s.stateNode.containerInfo,Ts=!0;break e}s=s.return}if(null===Ps)throw Error(i(160));Ns(o,l,a),Ps=null,Ts=!1,null!==(o=a.alternate)&&(o.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ms(t,e),t=t.sibling}var js=null;function Ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Is(t,e),Ds(e),4&r&&(ls(3,e,e.return),is(3,e),ls(5,e,e.return));break;case 1:Is(t,e),Ds(e),512&r&&(ks||null===n||fs(n,n.return)),64&r&&bs&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var a=js;if(Is(t,e),Ds(e),512&r&&(ks||null===n||fs(n,n.return)),4&r){var o=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(r){case"title":(!(o=a.getElementsByTagName("title")[0])||o[Fe]||o[Ie]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=a.createElement(r),a.head.insertBefore(o,a.querySelector("head > title"))),ef(o,r,n),o[Ie]=e,qe(o),r=o;break e;case"link":var l=Bf("link","href",a).get(r+(n.href||""));if(l)for(var s=0;s<l.length;s++)if((o=l[s]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&o.getAttribute("rel")===(null==n.rel?null:n.rel)&&o.getAttribute("title")===(null==n.title?null:n.title)&&o.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){l.splice(s,1);break t}ef(o=a.createElement(r),r,n),a.head.appendChild(o);break;case"meta":if(l=Bf("meta","content",a).get(r+(n.content||"")))for(s=0;s<l.length;s++)if((o=l[s]).getAttribute("content")===(null==n.content?null:""+n.content)&&o.getAttribute("name")===(null==n.name?null:n.name)&&o.getAttribute("property")===(null==n.property?null:n.property)&&o.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&o.getAttribute("charset")===(null==n.charSet?null:n.charSet)){l.splice(s,1);break t}ef(o=a.createElement(r),r,n),a.head.appendChild(o);break;default:throw Error(i(468,r))}o[Ie]=e,qe(o),r=o}e.stateNode=r}else Hf(a,e.type,e.stateNode);else e.stateNode=Df(a,r,e.memoizedProps);else o!==r?(null===o?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):o.count--,null===r?Hf(a,e.type,e.stateNode):Df(a,r,e.memoizedProps)):null===r&&null!==e.stateNode&&ps(e,e.memoizedProps,n.memoizedProps)}break;case 27:Is(t,e),Ds(e),512&r&&(ks||null===n||fs(n,n.return)),null!==n&&4&r&&ps(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Is(t,e),Ds(e),512&r&&(ks||null===n||fs(n,n.return)),32&e.flags){a=e.stateNode;try{St(a,"")}catch(t){cc(e,e.return,t)}}4&r&&null!=e.stateNode&&ps(e,a=e.memoizedProps,null!==n?n.memoizedProps:a),1024&r&&(ws=!0);break;case 6:if(Is(t,e),Ds(e),4&r){if(null===e.stateNode)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){cc(e,e.return,t)}}break;case 3:if(Ff=null,a=js,js=_f(t.containerInfo),Is(t,e),js=a,Ds(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Cd(t.containerInfo)}catch(t){cc(e,e.return,t)}ws&&(ws=!1,Ls(e));break;case 4:r=js,js=_f(e.stateNode.containerInfo),Is(t,e),Ds(e),js=r;break;case 12:default:Is(t,e),Ds(e);break;case 13:Is(t,e),Ds(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(wu=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,As(e,r)));break;case 22:a=null!==e.memoizedState;var u=null!==n&&null!==n.memoizedState,c=bs,f=ks;if(bs=c||a,ks=f||u,Is(t,e),ks=f,bs=c,Ds(e),8192&r)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===n||u||bs||ks||zs(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){u=n=t;try{if(o=u.stateNode,a)"function"==typeof(l=o.style).setProperty?l.setProperty("display","none","important"):l.display="none";else{s=u.stateNode;var d=u.memoizedProps.style,p=null!=d&&d.hasOwnProperty("display")?d.display:null;s.style.display=null==p||"boolean"==typeof p?"":(""+p).trim()}}catch(e){cc(u,u.return,e)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=a?"":u.memoizedProps}catch(e){cc(u,u.return,e)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,As(e,n))));break;case 19:Is(t,e),Ds(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,As(e,r)));case 30:case 21:}}function Ds(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(hs(r)){n=r;break}r=r.return}if(null==n)throw Error(i(160));switch(n.tag){case 27:var a=n.stateNode;vs(e,ms(e),a);break;case 5:var o=n.stateNode;32&n.flags&&(St(o,""),n.flags&=-33),vs(e,ms(e),o);break;case 3:case 4:var l=n.stateNode.containerInfo;gs(e,ms(e),l);break;default:throw Error(i(161))}}catch(t){cc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ls(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ls(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Rs(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)xs(e,t.alternate,t),t=t.sibling}function zs(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ls(4,t,t.return),zs(t);break;case 1:fs(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&us(t,t.return,n),zs(t);break;case 27:Sf(t.stateNode);case 26:case 5:fs(t,t.return),zs(t);break;case 22:null===t.memoizedState&&zs(t);break;default:zs(t)}e=e.sibling}}function Fs(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,a=e,o=t,i=o.flags;switch(o.tag){case 0:case 11:case 15:Fs(a,o,n),is(4,o);break;case 1:if(Fs(a,o,n),"function"==typeof(a=(r=o).stateNode).componentDidMount)try{a.componentDidMount()}catch(e){cc(r,r.return,e)}if(null!==(a=(r=o).updateQueue)){var l=r.stateNode;try{var s=a.shared.hiddenCallbacks;if(null!==s)for(a.shared.hiddenCallbacks=null,a=0;a<s.length;a++)fo(s[a],l)}catch(e){cc(r,r.return,e)}}n&&64&i&&ss(o),cs(o,o.return);break;case 27:ys(o);case 26:case 5:Fs(a,o,n),n&&null===r&&4&i&&ds(o),cs(o,o.return);break;case 12:Fs(a,o,n);break;case 13:Fs(a,o,n),n&&4&i&&Os(a,o);break;case 22:null===o.memoizedState&&Fs(a,o,n),cs(o,o.return);break;case 30:break;default:Fs(a,o,n)}t=t.sibling}}function Bs(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ma(n))}function Hs(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ma(e))}function Us(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)$s(e,t,n,r),t=t.sibling}function $s(e,t,n,r){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Us(e,t,n,r),2048&a&&is(9,t);break;case 1:case 13:default:Us(e,t,n,r);break;case 3:Us(e,t,n,r),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ma(e)));break;case 12:if(2048&a){Us(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,i=o.id,l=o.onPostCommit;"function"==typeof l&&l(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(e){cc(t,t.return,e)}}else Us(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,i=t.alternate,null!==t.memoizedState?2&o._visibility?Us(e,t,n,r):qs(e,t):2&o._visibility?Us(e,t,n,r):(o._visibility|=2,Vs(e,t,n,r,!!(10256&t.subtreeFlags))),2048&a&&Bs(i,t);break;case 24:Us(e,t,n,r),2048&a&&Hs(t.alternate,t)}}function Vs(e,t,n,r,a){for(a=a&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,i=t,l=n,s=r,u=i.flags;switch(i.tag){case 0:case 11:case 15:Vs(o,i,l,s,a),is(8,i);break;case 23:break;case 22:var c=i.stateNode;null!==i.memoizedState?2&c._visibility?Vs(o,i,l,s,a):qs(o,i):(c._visibility|=2,Vs(o,i,l,s,a)),a&&2048&u&&Bs(i.alternate,i);break;case 24:Vs(o,i,l,s,a),a&&2048&u&&Hs(i.alternate,i);break;default:Vs(o,i,l,s,a)}t=t.sibling}}function qs(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,a=r.flags;switch(r.tag){case 22:qs(n,r),2048&a&&Bs(r.alternate,r);break;case 24:qs(n,r),2048&a&&Hs(r.alternate,r);break;default:qs(n,r)}t=t.sibling}}var Gs=8192;function Ws(e){if(e.subtreeFlags&Gs)for(e=e.child;null!==e;)Ys(e),e=e.sibling}function Ys(e){switch(e.tag){case 26:Ws(e),e.flags&Gs&&null!==e.memoizedState&&function(e,t,n){if(null===$f)throw Error(i(475));var r=$f;if(!("stylesheet"!==t.type||"string"==typeof n.media&&!1===matchMedia(n.media).matches||4&t.state.loading)){if(null===t.instance){var a=Of(n.href),o=e.querySelector(Af(a));if(o)return null!==(e=o._p)&&"object"==typeof e&&"function"==typeof e.then&&(r.count++,r=qf.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=o,void qe(o);o=e.ownerDocument||e,n=If(n),(a=Ef.get(a))&&Rf(n,a),qe(o=o.createElement("link"));var l=o;l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),ef(o,"link",n),t.instance=o}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(r.count++,t=qf.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(js,e.memoizedState,e.memoizedProps);break;case 5:default:Ws(e);break;case 3:case 4:var t=js;js=_f(e.stateNode.containerInfo),Ws(e),js=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Gs,Gs=16777216,Ws(e),Gs=t):Ws(e))}}function Xs(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Ks(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Es=r,Zs(r,e)}Xs(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Js(e),e=e.sibling}function Js(e){switch(e.tag){case 0:case 11:case 15:Ks(e),2048&e.flags&&ls(9,e,e.return);break;case 3:case 12:default:Ks(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Qs(e)):Ks(e)}}function Qs(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Es=r,Zs(r,e)}Xs(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ls(8,t,t.return),Qs(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Qs(t));break;default:Qs(t)}e=e.sibling}}function Zs(e,t){for(;null!==Es;){var n=Es;switch(n.tag){case 0:case 11:case 15:ls(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ma(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Es=r;else e:for(n=e;null!==Es;){var a=(r=Es).sibling,o=r.return;if(_s(r),r===n){Es=null;break e}if(null!==a){a.return=o,Es=a;break e}Es=o}}}var eu={getCacheForType:function(e){var t=Pa(Ia),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tu="function"==typeof WeakMap?WeakMap:Map,nu=0,ru=null,au=null,ou=0,iu=0,lu=null,su=!1,uu=!1,cu=!1,fu=0,du=0,pu=0,hu=0,mu=0,gu=0,vu=0,yu=null,bu=null,ku=!1,wu=0,Su=1/0,Eu=null,xu=null,_u=0,Pu=null,Tu=null,Cu=0,Nu=0,Ou=null,Au=null,Iu=0,ju=null;function Mu(){if(2&nu&&0!==ou)return ou&-ou;if(null!==M.T){return 0!==Ra?Ra:Nc()}return Oe()}function Du(){0===gu&&(gu=536870912&ou&&!oa?536870912:Se());var e=al.current;return null!==e&&(e.flags|=32),gu}function Lu(e,t,n){(e!==ru||2!==iu&&9!==iu)&&null===e.cancelPendingCommit||($u(e,0),Bu(e,ou,gu,!1)),_e(e,n),2&nu&&e===ru||(e===ru&&(!(2&nu)&&(hu|=n),4===du&&Bu(e,ou,gu,!1)),Sc(e))}function Ru(e,t,n){if(6&nu)throw Error(i(327));for(var r=!n&&!(124&t)&&0===(t&e.expiredLanes)||ke(e,t),a=r?function(e,t){var n=nu;nu|=2;var r=qu(),a=Gu();ru!==e||ou!==t?(Eu=null,Su=te()+500,$u(e,t)):uu=ke(e,t);e:for(;;)try{if(0!==iu&&null!==au){t=au;var o=lu;t:switch(iu){case 1:iu=0,lu=null,Zu(e,t,o,1);break;case 2:case 9:if(Xa(o)){iu=0,lu=null,Qu(t);break}t=function(){2!==iu&&9!==iu||ru!==e||(iu=7),Sc(e)},o.then(t,t);break e;case 3:iu=7;break e;case 4:iu=5;break e;case 7:Xa(o)?(iu=0,lu=null,Qu(t)):(iu=0,lu=null,Zu(e,t,o,7));break;case 5:var l=null;switch(au.tag){case 26:l=au.memoizedState;case 5:case 27:var s=au;if(!l||Uf(l)){iu=0,lu=null;var u=s.sibling;if(null!==u)au=u;else{var c=s.return;null!==c?(au=c,ec(c)):au=null}break t}}iu=0,lu=null,Zu(e,t,o,5);break;case 6:iu=0,lu=null,Zu(e,t,o,6);break;case 8:Uu(),du=6;break e;default:throw Error(i(462))}}Ku();break}catch(t){Vu(e,t)}return ya=va=null,M.H=r,M.A=a,nu=n,null!==au?0:(ru=null,ou=0,Cr(),du)}(e,t):Yu(e,t,!0),o=r;;){if(0===a){uu&&!r&&Bu(e,t,0,!1);break}if(n=e.current.alternate,!o||Fu(n)){if(2===a){if(o=t,e.errorRecoveryDisabledLanes&o)var l=0;else l=0!==(l=-536870913&e.pendingLanes)?l:536870912&l?536870912:0;if(0!==l){t=l;e:{var s=e;a=yu;var u=s.current.memoizedState.isDehydrated;if(u&&($u(s,l).flags|=256),2!==(l=Yu(s,l,!1))){if(cu&&!u){s.errorRecoveryDisabledLanes|=o,hu|=o,a=4;break e}o=bu,bu=a,null!==o&&(null===bu?bu=o:bu.push.apply(bu,o))}a=l}if(o=!1,2!==a)continue}}if(1===a){$u(e,0),Bu(e,t,0,!0);break}e:{switch(r=e,o=a){case 0:case 1:throw Error(i(345));case 4:if((4194048&t)!==t)break;case 6:Bu(r,t,gu,!su);break e;case 2:bu=null;break;case 3:case 5:break;default:throw Error(i(329))}if((62914560&t)===t&&10<(a=wu+300-te())){if(Bu(r,t,gu,!su),0!==be(r,0,!0))break e;r.timeoutHandle=uf(zu.bind(null,r,n,bu,Eu,ku,t,gu,hu,vu,su,o,2,-0,0),a)}else zu(r,n,bu,Eu,ku,t,gu,hu,vu,su,o,0,-0,0)}break}a=Yu(e,t,!1),o=!1}Sc(e)}function zu(e,t,n,r,a,o,l,s,u,c,f,d,p,h){if(e.timeoutHandle=-1,(8192&(d=t.subtreeFlags)||!(16785408&~d))&&($f={stylesheets:null,count:0,unsuspend:Vf},Ys(t),null!==(d=function(){if(null===$f)throw Error(i(475));var e=$f;return e.stylesheets&&0===e.count&&Wf(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Wf(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=d(nc.bind(null,e,t,o,n,r,a,l,s,u,f,1,p,h)),void Bu(e,o,l,!c);nc(e,t,o,n,r,a,l,s,u)}function Fu(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!Xn(o(),a))return!1}catch(e){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bu(e,t,n,r){t&=~mu,t&=~hu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var a=t;0<a;){var o=31-pe(a),i=1<<o;r[o]=-1,a&=~i}0!==n&&Pe(e,n,t)}function Hu(){return!!(6&nu)||(Ec(0,!1),!1)}function Uu(){if(null!==au){if(0===iu)var e=au.return;else ya=va=null,zo(e=au),Xi=null,Ki=0,e=au;for(;null!==e;)os(e.alternate,e),e=e.return;au=null}}function $u(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cf(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uu(),ru=e,au=n=zr(e.current,null),ou=t,iu=0,lu=null,su=!1,uu=ke(e,t),cu=!1,vu=gu=mu=hu=pu=du=0,bu=yu=null,ku=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var a=31-pe(r),o=1<<a;t|=e[a],r&=~o}return fu=t,Cr(),n}function Vu(e,t){ko=null,M.H=qi,t===qa||t===Wa?(t=Za(),iu=3):t===Ga?(t=Za(),iu=4):iu=t===Pl?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,lu=t,null===au&&(du=1,wl(e,xr(t,e.current)))}function qu(){var e=M.H;return M.H=qi,null===e?qi:e}function Gu(){var e=M.A;return M.A=eu,e}function Wu(){du=4,su||(4194048&ou)!==ou&&null!==al.current||(uu=!0),!(134217727&pu)&&!(134217727&hu)||null===ru||Bu(ru,ou,gu,!1)}function Yu(e,t,n){var r=nu;nu|=2;var a=qu(),o=Gu();ru===e&&ou===t||(Eu=null,$u(e,t)),t=!1;var i=du;e:for(;;)try{if(0!==iu&&null!==au){var l=au,s=lu;switch(iu){case 8:Uu(),i=6;break e;case 3:case 2:case 9:case 6:null===al.current&&(t=!0);var u=iu;if(iu=0,lu=null,Zu(e,l,s,u),n&&uu){i=0;break e}break;default:u=iu,iu=0,lu=null,Zu(e,l,s,u)}}Xu(),i=du;break}catch(t){Vu(e,t)}return t&&e.shellSuspendCounter++,ya=va=null,nu=r,M.H=a,M.A=o,null===au&&(ru=null,ou=0,Cr()),i}function Xu(){for(;null!==au;)Ju(au)}function Ku(){for(;null!==au&&!Z();)Ju(au)}function Ju(e){var t=Jl(e.alternate,e,fu);e.memoizedProps=e.pendingProps,null===t?ec(e):au=t}function Qu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ll(n,t,t.pendingProps,t.type,void 0,ou);break;case 11:t=Ll(n,t,t.pendingProps,t.type.render,t.ref,ou);break;case 5:zo(t);default:os(n,t),t=Jl(n,t=au=Fr(t,fu),fu)}e.memoizedProps=e.pendingProps,null===t?ec(e):au=t}function Zu(e,t,n,r){ya=va=null,zo(t),Xi=null,Ki=0;var a=t.return;try{if(function(e,t,n,r,a){if(n.flags|=32768,null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(t=n.alternate)&&Ea(t,n,a,!0),null!==(n=al.current)){switch(n.tag){case 13:return null===ol?Wu():null===n.alternate&&0===du&&(du=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===Ya?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),fc(e,r,a)),!1;case 22:return n.flags|=65536,r===Ya?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),fc(e,r,a)),!1}throw Error(i(435,n.tag))}return fc(e,r,a),Wu(),!1}if(oa)return null!==(t=al.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==sa&&ma(xr(e=Error(i(422),{cause:r}),n))):(r!==sa&&ma(xr(t=Error(i(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,r=xr(r,n),lo(e,a=El(e.stateNode,r,a)),4!==du&&(du=2)),!1;var o=Error(i(520),{cause:r});if(o=xr(o,n),null===yu?yu=[o]:yu.push(o),4!==du&&(du=2),null===t)return!0;r=xr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,lo(n,e=El(n.stateNode,r,e)),!1;case 1:if(t=n.type,o=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===o||"function"!=typeof o.componentDidCatch||null!==xu&&xu.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,_l(a=xl(a),e,n,r),lo(n,a),!1}n=n.return}while(null!==n);return!1}(e,a,t,n,ou))return du=1,wl(e,xr(n,e.current)),void(au=null)}catch(t){if(null!==a)throw au=a,t;return du=1,wl(e,xr(n,e.current)),void(au=null)}32768&t.flags?(oa||1===r?e=!0:uu||536870912&ou?e=!1:(su=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=al.current)&&13===r.tag&&(r.flags|=16384))),tc(t,e)):ec(t)}function ec(e){var t=e;do{if(32768&t.flags)return void tc(t,su);e=t.return;var n=rs(t.alternate,t,fu);if(null!==n)return void(au=n);if(null!==(t=t.sibling))return void(au=t);au=t=e}while(null!==t);0===du&&(du=5)}function tc(e,t){do{var n=as(e.alternate,e);if(null!==n)return n.flags&=32767,void(au=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(au=e);au=e=n}while(null!==e);du=6,au=null}function nc(e,t,n,r,a,o,l,s,u){e.cancelPendingCommit=null;do{lc()}while(0!==_u);if(6&nu)throw Error(i(327));if(null!==t){if(t===e.current)throw Error(i(177));if(o=t.lanes|t.childLanes,function(e,t,n,r,a,o){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,s=e.expirationTimes,u=e.hiddenUpdates;for(n=i&~n;0<n;){var c=31-pe(n),f=1<<c;l[c]=0,s[c]=-1;var d=u[c];if(null!==d)for(u[c]=null,c=0;c<d.length;c++){var p=d[c];null!==p&&(p.lane&=-536870913)}n&=~f}0!==r&&Pe(e,r,0),0!==o&&0===a&&0!==e.tag&&(e.suspendedLanes|=o&~(i&~t))}(e,n,o|=Tr,l,s,u),e===ru&&(au=ru=null,ou=0),Tu=t,Pu=e,Cu=n,Nu=o,Ou=a,Au=r,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,J(oe,function(){return sc(),null})):(e.callbackNode=null,e.callbackPriority=0),r=!!(13878&t.flags),13878&t.subtreeFlags||r){r=M.T,M.T=null,a=D.p,D.p=2,l=nu,nu|=4;try{!function(e,t){if(e=e.containerInfo,tf=rd,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break e}var l=0,s=-1,u=-1,c=0,f=0,d=e,p=null;t:for(;;){for(var h;d!==n||0!==a&&3!==d.nodeType||(s=l+a),d!==o||0!==r&&3!==d.nodeType||(u=l+r),3===d.nodeType&&(l+=d.nodeValue.length),null!==(h=d.firstChild);)p=d,d=h;for(;;){if(d===e)break t;if(p===n&&++c===a&&(s=l),p===o&&++f===r&&(u=l),null!==(h=d.nextSibling))break;p=(d=p).parentNode}d=h}n=-1===s||-1===u?null:{start:s,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(nf={focusedElem:e,selectionRange:n},rd=!1,Es=t;null!==Es;)if(e=(t=Es).child,1024&t.subtreeFlags&&null!==e)e.return=t,Es=e;else for(;null!==Es;){switch(o=(t=Es).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==o){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var m=gl(n.type,a,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){cc(n,n.return,e)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))gf(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gf(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(i(163))}if(null!==(e=t.sibling)){e.return=t.return,Es=e;break}Es=t.return}}(e,t)}finally{nu=l,D.p=a,M.T=r}}_u=1,rc(),ac(),oc()}}function rc(){if(1===_u){_u=0;var e=Pu,t=Tu,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=M.T,M.T=null;var r=D.p;D.p=2;var a=nu;nu|=4;try{Ms(t,e);var o=nf,i=er(e.containerInfo),l=o.focusedElem,s=o.selectionRange;if(i!==l&&l&&l.ownerDocument&&Zn(l.ownerDocument.documentElement,l)){if(null!==s&&tr(l)){var u=s.start,c=s.end;if(void 0===c&&(c=u),"selectionStart"in l)l.selectionStart=u,l.selectionEnd=Math.min(c,l.value.length);else{var f=l.ownerDocument||document,d=f&&f.defaultView||window;if(d.getSelection){var p=d.getSelection(),h=l.textContent.length,m=Math.min(s.start,h),g=void 0===s.end?m:Math.min(s.end,h);!p.extend&&m>g&&(i=g,g=m,m=i);var v=Qn(l,m),y=Qn(l,g);if(v&&y&&(1!==p.rangeCount||p.anchorNode!==v.node||p.anchorOffset!==v.offset||p.focusNode!==y.node||p.focusOffset!==y.offset)){var b=f.createRange();b.setStart(v.node,v.offset),p.removeAllRanges(),m>g?(p.addRange(b),p.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),p.addRange(b))}}}}for(f=[],p=l;p=p.parentNode;)1===p.nodeType&&f.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"==typeof l.focus&&l.focus(),l=0;l<f.length;l++){var k=f[l];k.element.scrollLeft=k.left,k.element.scrollTop=k.top}}rd=!!tf,nf=tf=null}finally{nu=a,D.p=r,M.T=n}}e.current=t,_u=2}}function ac(){if(2===_u){_u=0;var e=Pu,t=Tu,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=M.T,M.T=null;var r=D.p;D.p=2;var a=nu;nu|=4;try{xs(e,t.alternate,t)}finally{nu=a,D.p=r,M.T=n}}_u=3}}function oc(){if(4===_u||3===_u){_u=0,ee();var e=Pu,t=Tu,n=Cu,r=Au;10256&t.subtreeFlags||10256&t.flags?_u=5:(_u=0,Tu=Pu=null,ic(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(xu=null),Ne(n),t=t.stateNode,fe&&"function"==typeof fe.onCommitFiberRoot)try{fe.onCommitFiberRoot(ce,t,void 0,!(128&~t.current.flags))}catch(e){}if(null!==r){t=M.T,a=D.p,D.p=2,M.T=null;try{for(var o=e.onRecoverableError,i=0;i<r.length;i++){var l=r[i];o(l.value,{componentStack:l.stack})}}finally{M.T=t,D.p=a}}3&Cu&&lc(),Sc(e),a=e.pendingLanes,4194090&n&&42&a?e===ju?Iu++:(Iu=0,ju=e):Iu=0,Ec(0,!1)}}function ic(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ma(t)))}function lc(e){return rc(),ac(),oc(),sc()}function sc(){if(5!==_u)return!1;var e=Pu,t=Nu;Nu=0;var n=Ne(Cu),r=M.T,a=D.p;try{D.p=32>n?32:n,M.T=null,n=Ou,Ou=null;var o=Pu,l=Cu;if(_u=0,Tu=Pu=null,Cu=0,6&nu)throw Error(i(331));var s=nu;if(nu|=4,Js(o.current),$s(o,o.current,l,n),nu=s,Ec(0,!1),fe&&"function"==typeof fe.onPostCommitFiberRoot)try{fe.onPostCommitFiberRoot(ce,o)}catch(e){}return!0}finally{D.p=a,M.T=r,ic(e,t)}}function uc(e,t,n){t=xr(n,t),null!==(e=oo(e,t=El(e.stateNode,t,2),2))&&(_e(e,2),Sc(e))}function cc(e,t,n){if(3===e.tag)uc(e,e,n);else for(;null!==t;){if(3===t.tag){uc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===xu||!xu.has(r))){e=xr(n,e),null!==(r=oo(t,n=xl(2),2))&&(_l(n,r,t,e),_e(r,2),Sc(r));break}}t=t.return}}function fc(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tu;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(cu=!0,a.add(n),e=dc.bind(null,e,t,n),t.then(e,e))}function dc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ru===e&&(ou&n)===n&&(4===du||3===du&&(62914560&ou)===ou&&300>te()-wu?!(2&nu)&&$u(e,0):mu|=n,vu===ou&&(vu=0)),Sc(e)}function pc(e,t){0===t&&(t=Ee()),null!==(e=Ar(e,t))&&(_e(e,t),Sc(e))}function hc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pc(e,n)}function mc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==r&&r.delete(t),pc(e,n)}var gc=null,vc=null,yc=!1,bc=!1,kc=!1,wc=0;function Sc(e){e!==vc&&null===e.next&&(null===vc?gc=vc=e:vc=vc.next=e),bc=!0,yc||(yc=!0,df(function(){6&nu?J(re,xc):_c()}))}function Ec(e,t){if(!kc&&bc){kc=!0;do{for(var n=!1,r=gc;null!==r;){if(!t)if(0!==e){var a=r.pendingLanes;if(0===a)var o=0;else{var i=r.suspendedLanes,l=r.pingedLanes;o=(1<<31-pe(42|e)+1)-1,o=201326741&(o&=a&~(i&~l))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,Cc(r,o))}else o=ou,!(3&(o=be(r,r===ru?o:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||ke(r,o)||(n=!0,Cc(r,o));r=r.next}}while(n);kc=!1}}function xc(){_c()}function _c(){bc=yc=!1;var e=0;0!==wc&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==sf&&(sf=e,!0);return sf=null,!1}()&&(e=wc),wc=0);for(var t=te(),n=null,r=gc;null!==r;){var a=r.next,o=Pc(r,t);0===o?(r.next=null,null===n?gc=a:n.next=a,null===a&&(vc=n)):(n=r,(0!==e||3&o)&&(bc=!0)),r=a}Ec(e,!1)}function Pc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var i=31-pe(o),l=1<<i,s=a[i];-1===s?0!==(l&n)&&0===(l&r)||(a[i]=we(l,t)):s<=t&&(e.expiredLanes|=l),o&=~l}if(n=ou,n=be(e,e===(t=ru)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===iu||9===iu)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&Q(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||ke(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&Q(r),Ne(n)){case 2:case 8:n=ae;break;case 32:default:n=oe;break;case 268435456:n=le}return r=Tc.bind(null,e),n=J(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&Q(r),e.callbackPriority=2,e.callbackNode=null,2}function Tc(e,t){if(0!==_u&&5!==_u)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(lc()&&e.callbackNode!==n)return null;var r=ou;return 0===(r=be(e,e===ru?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Ru(e,r,t),Pc(e,te()),null!=e.callbackNode&&e.callbackNode===n?Tc.bind(null,e):null)}function Cc(e,t){if(lc())return null;Ru(e,t,!0)}function Nc(){return 0===wc&&(wc=Se()),wc}function Oc(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Nt(""+e)}function Ac(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ic=0;Ic<wr.length;Ic++){var jc=wr[Ic];Sr(jc.toLowerCase(),"on"+(jc[0].toUpperCase()+jc.slice(1)))}Sr(pr,"onAnimationEnd"),Sr(hr,"onAnimationIteration"),Sr(mr,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(gr,"onTransitionRun"),Sr(vr,"onTransitionStart"),Sr(yr,"onTransitionCancel"),Sr(br,"onTransitionEnd"),Xe("onMouseEnter",["mouseout","mouseover"]),Xe("onMouseLeave",["mouseout","mouseover"]),Xe("onPointerEnter",["pointerout","pointerover"]),Xe("onPointerLeave",["pointerout","pointerover"]),Ye("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ye("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ye("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ye("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ye("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mc));function Lc(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],s=l.instance,u=l.currentTarget;if(l=l.listener,s!==o&&a.isPropagationStopped())break e;o=l,a.currentTarget=u;try{o(a)}catch(e){vl(e)}a.currentTarget=null,o=s}else for(i=0;i<r.length;i++){if(s=(l=r[i]).instance,u=l.currentTarget,l=l.listener,s!==o&&a.isPropagationStopped())break e;o=l,a.currentTarget=u;try{o(a)}catch(e){vl(e)}a.currentTarget=null,o=s}}}}function Rc(e,t){var n=t[De];void 0===n&&(n=t[De]=new Set);var r=e+"__bubble";n.has(r)||(Hc(t,e,2,!1),n.add(r))}function zc(e,t,n){var r=0;t&&(r|=4),Hc(n,e,r,t)}var Fc="_reactListening"+Math.random().toString(36).slice(2);function Bc(e){if(!e[Fc]){e[Fc]=!0,Ge.forEach(function(t){"selectionchange"!==t&&(Dc.has(t)||zc(t,!1,e),zc(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fc]||(t[Fc]=!0,zc("selectionchange",!1,t))}}function Hc(e,t,n,r){switch(cd(t)){case 2:var a=ad;break;case 8:a=od;break;default:a=id}n=a.bind(null,t,n,e),a=void 0,!Ft||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Uc(e,t,n,r,a){var o=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var l=r.stateNode.containerInfo;if(l===a)break;if(4===i)for(i=r.return;null!==i;){var u=i.tag;if((3===u||4===u)&&i.stateNode.containerInfo===a)return;i=i.return}for(;null!==l;){if(null===(i=He(l)))return;if(5===(u=i.tag)||6===u||26===u||27===u){r=o=i;continue e}l=l.parentNode}}r=r.return}Lt(function(){var r=o,a=At(n),i=[];e:{var l=kr.get(e);if(void 0!==l){var u=Zt,c=e;switch(e){case"keypress":if(0===qt(n))break e;case"keydown":case"keyup":u=mn;break;case"focusin":c="focus",u=on;break;case"focusout":c="blur",u=on;break;case"beforeblur":case"afterblur":u=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=an;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=vn;break;case pr:case hr:case mr:u=ln;break;case br:u=yn;break;case"scroll":case"scrollend":u=tn;break;case"wheel":u=bn;break;case"copy":case"cut":case"paste":u=sn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=gn;break;case"toggle":case"beforetoggle":u=kn}var f=!!(4&t),d=!f&&("scroll"===e||"scrollend"===e),p=f?null!==l?l+"Capture":null:l;f=[];for(var h,m=r;null!==m;){var g=m;if(h=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===h||null===p||null!=(g=Rt(m,p))&&f.push($c(m,g,h)),d)break;m=m.return}0<f.length&&(l=new u(l,c,null,n,a),i.push({event:l,listeners:f}))}}if(!(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===Ot||!(c=n.relatedTarget||n.fromElement)||!He(c)&&!c[Me])&&(u||l)&&(l=a.window===a?a:(l=a.ownerDocument)?l.defaultView||l.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?He(c):null)&&(d=s(c),f=c.tag,c!==d||5!==f&&27!==f&&6!==f)&&(c=null)):(u=null,c=r),u!==c)){if(f=rn,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(f=gn,g="onPointerLeave",p="onPointerEnter",m="pointer"),d=null==u?l:$e(u),h=null==c?l:$e(c),(l=new f(g,m+"leave",u,n,a)).target=d,l.relatedTarget=h,g=null,He(a)===r&&((f=new f(p,m+"enter",c,n,a)).target=h,f.relatedTarget=d,g=f),d=g,u&&c)e:{for(p=c,m=0,h=f=u;h;h=qc(h))m++;for(h=0,g=p;g;g=qc(g))h++;for(;0<m-h;)f=qc(f),m--;for(;0<h-m;)p=qc(p),h--;for(;m--;){if(f===p||null!==p&&f===p.alternate)break e;f=qc(f),p=qc(p)}f=null}else f=null;null!==u&&Gc(i,l,u,f,!1),null!==c&&null!==d&&Gc(i,d,c,f,!0)}if("select"===(u=(l=r?$e(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===u&&"file"===l.type)var v=zn;else if(In(l))if(Fn)v=Yn;else{v=Gn;var y=qn}else!(u=l.nodeName)||"input"!==u.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?r&&Pt(r.elementType)&&(v=zn):v=Wn;switch(v&&(v=v(e,r))?jn(i,v,n,a):(y&&y(e,l,r),"focusout"===e&&r&&"number"===l.type&&null!=r.memoizedProps.value&&yt(l,"number",l.value)),y=r?$e(r):window,e){case"focusin":(In(y)||"true"===y.contentEditable)&&(rr=y,ar=r,or=null);break;case"focusout":or=ar=rr=null;break;case"mousedown":ir=!0;break;case"contextmenu":case"mouseup":case"dragend":ir=!1,lr(i,n,a);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":lr(i,n,a)}var b;if(Sn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else On?Cn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(_n&&"ko"!==n.locale&&(On||"onCompositionStart"!==k?"onCompositionEnd"===k&&On&&(b=Vt()):(Ut="value"in(Ht=a)?Ht.value:Ht.textContent,On=!0)),0<(y=Vc(r,k)).length&&(k=new un(k,e,null,n,a),i.push({event:k,listeners:y}),b?k.data=b:null!==(b=Nn(n))&&(k.data=b))),(b=xn?function(e,t){switch(e){case"compositionend":return Nn(t);case"keypress":return 32!==t.which?null:(Tn=!0,Pn);case"textInput":return(e=t.data)===Pn&&Tn?null:e;default:return null}}(e,n):function(e,t){if(On)return"compositionend"===e||!Sn&&Cn(e,t)?(e=Vt(),$t=Ut=Ht=null,On=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _n&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(k=Vc(r,"onBeforeInput")).length&&(y=new un("onBeforeInput","beforeinput",null,n,a),i.push({event:y,listeners:k}),y.data=b)),function(e,t,n,r,a){if("submit"===t&&n&&n.stateNode===a){var o=Oc((a[je]||null).action),i=r.submitter;i&&null!==(t=(t=i[je]||null)?Oc(t.formAction):i.getAttribute("formAction"))&&(o=t,i=null);var l=new Zt("action","action",null,r,a);e.push({event:l,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==wc){var e=i?Ac(a,i):new FormData(a);Ai(n,{pending:!0,data:e,method:a.method,action:o},null,e)}}else"function"==typeof o&&(l.preventDefault(),e=i?Ac(a,i):new FormData(a),Ai(n,{pending:!0,data:e,method:a.method,action:o},o,e))},currentTarget:a}]})}}(i,e,r,n,a)}Lc(i,t)})}function $c(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vc(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===o||(null!=(a=Rt(e,n))&&r.unshift($c(e,a,o)),null!=(a=Rt(e,t))&&r.push($c(e,a,o))),3===e.tag)return r;e=e.return}return[]}function qc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Gc(e,t,n,r,a){for(var o=t._reactName,i=[];null!==n&&n!==r;){var l=n,s=l.alternate,u=l.stateNode;if(l=l.tag,null!==s&&s===r)break;5!==l&&26!==l&&27!==l||null===u||(s=u,a?null!=(u=Rt(n,o))&&i.unshift($c(n,u,s)):a||null!=(u=Rt(n,o))&&i.push($c(n,u,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Wc=/\r\n?/g,Yc=/\u0000|\uFFFD/g;function Xc(e){return("string"==typeof e?e:""+e).replace(Wc,"\n").replace(Yc,"")}function Kc(e,t){return t=Xc(t),Xc(e)===t}function Jc(){}function Qc(e,t,n,r,a,o){switch(n){case"children":"string"==typeof r?"body"===t||"textarea"===t&&""===r||St(e,r):("number"==typeof r||"bigint"==typeof r)&&"body"!==t&&St(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":_t(e,r,o);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"==typeof r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Nt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"==typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof o&&("formAction"===n?("input"!==t&&Qc(e,t,"name",a.name,a,null),Qc(e,t,"formEncType",a.formEncType,a,null),Qc(e,t,"formMethod",a.formMethod,a,null),Qc(e,t,"formTarget",a.formTarget,a,null)):(Qc(e,t,"encType",a.encType,a,null),Qc(e,t,"method",a.method,a,null),Qc(e,t,"target",a.target,a,null))),null==r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Nt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Jc);break;case"onScroll":null!=r&&Rc("scroll",e);break;case"onScrollEnd":null!=r&&Rc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(i(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"muted":e.muted=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"==typeof r||"boolean"==typeof r||"symbol"==typeof r){e.removeAttribute("xlink:href");break}n=Nt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"==typeof r||"symbol"==typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Rc("beforetoggle",e),Rc("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Tt.get(n)||n,r)}}function Zc(e,t,n,r,a,o){switch(n){case"style":_t(e,r,o);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=a.children)throw Error(i(60));e.innerHTML=n}}break;case"children":"string"==typeof r?St(e,r):("number"==typeof r||"bigint"==typeof r)&&St(e,""+r);break;case"onScroll":null!=r&&Rc("scroll",e);break;case"onScrollEnd":null!=r&&Rc("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Jc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:We.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),"function"==typeof(o=null!=(o=e[je]||null)?o[n]:null)&&e.removeEventListener(t,o,a),"function"!=typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!=typeof o&&null!==o&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a)))}}function ef(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rc("error",e),Rc("load",e);var r,a=!1,o=!1;for(r in n)if(n.hasOwnProperty(r)){var l=n[r];if(null!=l)switch(r){case"src":a=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Qc(e,t,r,l,n,null)}}return o&&Qc(e,t,"srcSet",n.srcSet,n,null),void(a&&Qc(e,t,"src",n.src,n,null));case"input":Rc("invalid",e);var s=r=l=o=null,u=null,c=null;for(a in n)if(n.hasOwnProperty(a)){var f=n[a];if(null!=f)switch(a){case"name":o=f;break;case"type":l=f;break;case"checked":u=f;break;case"defaultChecked":c=f;break;case"value":r=f;break;case"defaultValue":s=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(i(137,t));break;default:Qc(e,t,a,f,n,null)}}return vt(e,r,s,u,c,l,o,!1),void ft(e);case"select":for(o in Rc("invalid",e),a=l=r=null,n)if(n.hasOwnProperty(o)&&null!=(s=n[o]))switch(o){case"value":r=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:Qc(e,t,o,s,n,null)}return t=r,n=l,e.multiple=!!a,void(null!=t?bt(e,!!a,t,!1):null!=n&&bt(e,!!a,n,!0));case"textarea":for(l in Rc("invalid",e),r=o=a=null,n)if(n.hasOwnProperty(l)&&null!=(s=n[l]))switch(l){case"value":a=s;break;case"defaultValue":o=s;break;case"children":r=s;break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(i(91));break;default:Qc(e,t,l,s,n,null)}return wt(e,a,o,r),void ft(e);case"option":for(u in n)if(n.hasOwnProperty(u)&&null!=(a=n[u]))if("selected"===u)e.selected=a&&"function"!=typeof a&&"symbol"!=typeof a;else Qc(e,t,u,a,n,null);return;case"dialog":Rc("beforetoggle",e),Rc("toggle",e),Rc("cancel",e),Rc("close",e);break;case"iframe":case"object":Rc("load",e);break;case"video":case"audio":for(a=0;a<Mc.length;a++)Rc(Mc[a],e);break;case"image":Rc("error",e),Rc("load",e);break;case"details":Rc("toggle",e);break;case"embed":case"source":case"link":Rc("error",e),Rc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(a=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Qc(e,t,c,a,n,null)}return;default:if(Pt(t)){for(f in n)n.hasOwnProperty(f)&&(void 0!==(a=n[f])&&Zc(e,t,f,a,n,void 0));return}}for(s in n)n.hasOwnProperty(s)&&(null!=(a=n[s])&&Qc(e,t,s,a,n,null))}var tf=null,nf=null;function rf(e){return 9===e.nodeType?e:e.ownerDocument}function af(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function of(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function lf(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sf=null;var uf="function"==typeof setTimeout?setTimeout:void 0,cf="function"==typeof clearTimeout?clearTimeout:void 0,ff="function"==typeof Promise?Promise:void 0,df="function"==typeof queueMicrotask?queueMicrotask:void 0!==ff?function(e){return ff.resolve(null).then(e).catch(pf)}:uf;function pf(e){setTimeout(function(){throw e})}function hf(e){return"head"===e}function mf(e,t){var n=t,r=0,a=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0<r&&8>r){n=r;var i=e.ownerDocument;if(1&n&&Sf(i.documentElement),2&n&&Sf(i.body),4&n)for(Sf(n=i.head),i=n.firstChild;i;){var l=i.nextSibling,s=i.nodeName;i[Fe]||"SCRIPT"===s||"STYLE"===s||"LINK"===s&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=l}}if(0===a)return e.removeChild(o),void Cd(t);a--}else"$"===n||"$?"===n||"$!"===n?a++:r=n.charCodeAt(0)-48;else r=0;n=o}while(n);Cd(t)}function gf(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gf(n),Be(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function vf(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yf(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bf=null;function kf(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function wf(e,t,n){switch(t=rf(n),e){case"html":if(!(e=t.documentElement))throw Error(i(452));return e;case"head":if(!(e=t.head))throw Error(i(453));return e;case"body":if(!(e=t.body))throw Error(i(454));return e;default:throw Error(i(451))}}function Sf(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Be(e)}var Ef=new Map,xf=new Set;function _f(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Pf=D.d;D.d={f:function(){var e=Pf.f(),t=Hu();return e||t},r:function(e){var t=Ue(e);null!==t&&5===t.tag&&"form"===t.type?ji(t):Pf.r(e)},D:function(e){Pf.D(e),Cf("dns-prefetch",e,null)},C:function(e,t){Pf.C(e,t),Cf("preconnect",e,t)},L:function(e,t,n){Pf.L(e,t,n);var r=Tf;if(r&&e&&t){var a='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(a+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(a+='[imagesizes="'+mt(n.imageSizes)+'"]')):a+='[href="'+mt(e)+'"]';var o=a;switch(t){case"style":o=Of(e);break;case"script":o=jf(e)}Ef.has(o)||(e=d({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Ef.set(o,e),null!==r.querySelector(a)||"style"===t&&r.querySelector(Af(o))||"script"===t&&r.querySelector(Mf(o))||(ef(t=r.createElement("link"),"link",e),qe(t),r.head.appendChild(t)))}},m:function(e,t){Pf.m(e,t);var n=Tf;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",a='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',o=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=jf(e)}if(!Ef.has(o)&&(e=d({rel:"modulepreload",href:e},t),Ef.set(o,e),null===n.querySelector(a))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Mf(o)))return}ef(r=n.createElement("link"),"link",e),qe(r),n.head.appendChild(r)}}},X:function(e,t){Pf.X(e,t);var n=Tf;if(n&&e){var r=Ve(n).hoistableScripts,a=jf(e),o=r.get(a);o||((o=n.querySelector(Mf(a)))||(e=d({src:e,async:!0},t),(t=Ef.get(a))&&zf(e,t),qe(o=n.createElement("script")),ef(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(a,o))}},S:function(e,t,n){Pf.S(e,t,n);var r=Tf;if(r&&e){var a=Ve(r).hoistableStyles,o=Of(e);t=t||"default";var i=a.get(o);if(!i){var l={loading:0,preload:null};if(i=r.querySelector(Af(o)))l.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ef.get(o))&&Rf(e,n);var s=i=r.createElement("link");qe(s),ef(s,"link",e),s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),s.addEventListener("load",function(){l.loading|=1}),s.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Lf(i,t,r)}i={type:"stylesheet",instance:i,count:1,state:l},a.set(o,i)}}},M:function(e,t){Pf.M(e,t);var n=Tf;if(n&&e){var r=Ve(n).hoistableScripts,a=jf(e),o=r.get(a);o||((o=n.querySelector(Mf(a)))||(e=d({src:e,async:!0,type:"module"},t),(t=Ef.get(a))&&zf(e,t),qe(o=n.createElement("script")),ef(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(a,o))}}};var Tf="undefined"==typeof document?null:document;function Cf(e,t,n){var r=Tf;if(r&&"string"==typeof t&&t){var a=mt(t);a='link[rel="'+e+'"][href="'+a+'"]',"string"==typeof n&&(a+='[crossorigin="'+n+'"]'),xf.has(a)||(xf.add(a),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(a)&&(ef(t=r.createElement("link"),"link",e),qe(t),r.head.appendChild(t)))}}function Nf(e,t,n,r){var a,o,l,s,u=(u=V.current)?_f(u):null;if(!u)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Of(n.href),(r=(n=Ve(u).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Of(n.href);var c=Ve(u).hoistableStyles,f=c.get(e);if(f||(u=u.ownerDocument||u,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,f),(c=u.querySelector(Af(e)))&&!c._p&&(f.instance=c,f.state.loading=5),Ef.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ef.set(e,n),c||(a=u,o=e,l=n,s=f.state,a.querySelector('link[rel="preload"][as="style"]['+o+"]")?s.loading=1:(o=a.createElement("link"),s.preload=o,o.addEventListener("load",function(){return s.loading|=1}),o.addEventListener("error",function(){return s.loading|=2}),ef(o,"link",l),qe(o),a.head.appendChild(o))))),t&&null===r)throw Error(i(528,""));return f}if(t&&null!==r)throw Error(i(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=jf(n),(r=(n=Ve(u).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Of(e){return'href="'+mt(e)+'"'}function Af(e){return'link[rel="stylesheet"]['+e+"]"}function If(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function jf(e){return'[src="'+mt(e)+'"]'}function Mf(e){return"script[async]"+e}function Df(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,qe(r),r;var a=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return qe(r=(e.ownerDocument||e).createElement("style")),ef(r,"style",a),Lf(r,n.precedence,e),t.instance=r;case"stylesheet":a=Of(n.href);var o=e.querySelector(Af(a));if(o)return t.state.loading|=4,t.instance=o,qe(o),o;r=If(n),(a=Ef.get(a))&&Rf(r,a),qe(o=(e.ownerDocument||e).createElement("link"));var l=o;return l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),ef(o,"link",r),t.state.loading|=4,Lf(o,n.precedence,e),t.instance=o;case"script":return o=jf(n.src),(a=e.querySelector(Mf(o)))?(t.instance=a,qe(a),a):(r=n,(a=Ef.get(o))&&zf(r=d({},n),a),qe(a=(e=e.ownerDocument||e).createElement("script")),ef(a,"link",r),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(i(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Lf(r,n.precedence,e));return t.instance}function Lf(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,o=a,i=0;i<r.length;i++){var l=r[i];if(l.dataset.precedence===t)o=l;else if(o!==a)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Rf(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function zf(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ff=null;function Bf(e,t,n){if(null===Ff){var r=new Map,a=Ff=new Map;a.set(n,r)}else(r=(a=Ff).get(n))||(r=new Map,a.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var o=n[a];if(!(o[Fe]||o[Ie]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var i=o.getAttribute(t)||"";i=e+i;var l=r.get(i);l?l.push(o):r.set(i,[o])}}return r}function Hf(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Uf(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var $f=null;function Vf(){}function qf(){if(this.count--,0===this.count)if(this.stylesheets)Wf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gf=null;function Wf(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gf=new Map,t.forEach(Yf,e),Gf=null,qf.call(e))}function Yf(e,t){if(!(4&t.state.loading)){var n=Gf.get(e);if(n)var r=n.get(null);else{n=new Map,Gf.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<a.length;o++){var i=a[o];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(n.set(i.dataset.precedence,i),r=i)}r&&n.set(null,r)}i=(a=t.instance).getAttribute("data-precedence"),(o=n.get(i)||r)===r&&n.set(null,a),n.set(i,a),this.count++,r=qf.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),o?o.parentNode.insertBefore(a,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var Xf={$$typeof:w,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function Kf(e,t,n,r,a,o,i,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xe(0),this.hiddenUpdates=xe(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=o,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function Jf(e,t,n,r,a,o,i,l,s,u,c,f){return e=new Kf(e,t,n,i,l,s,u,f),t=1,!0===o&&(t|=24),o=Lr(3,null,null,t),e.current=o,o.stateNode=e,(t=ja()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:n,cache:t},no(o),e}function Qf(e){return e?e=Mr:Mr}function Zf(e,t,n,r,a,o){a=Qf(a),null===r.context?r.context=a:r.pendingContext=a,(r=ao(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(n=oo(e,r,t))&&(Lu(n,0,t),io(n,e,t))}function ed(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function td(e,t){ed(e,t),(e=e.alternate)&&ed(e,t)}function nd(e){if(13===e.tag){var t=Ar(e,67108864);null!==t&&Lu(t,0,67108864),td(e,67108864)}}var rd=!0;function ad(e,t,n,r){var a=M.T;M.T=null;var o=D.p;try{D.p=2,id(e,t,n,r)}finally{D.p=o,M.T=a}}function od(e,t,n,r){var a=M.T;M.T=null;var o=D.p;try{D.p=8,id(e,t,n,r)}finally{D.p=o,M.T=a}}function id(e,t,n,r){if(rd){var a=ld(r);if(null===a)Uc(e,t,r,sd,n),bd(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return dd=kd(dd,e,t,n,r,a),!0;case"dragenter":return pd=kd(pd,e,t,n,r,a),!0;case"mouseover":return hd=kd(hd,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return md.set(o,kd(md.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,gd.set(o,kd(gd.get(o)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(bd(e,r),4&t&&-1<yd.indexOf(e)){for(;null!==a;){var o=Ue(a);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var i=ye(o.pendingLanes);if(0!==i){var l=o;for(l.pendingLanes|=2,l.entangledLanes|=2;i;){var s=1<<31-pe(i);l.entanglements[1]|=s,i&=~s}Sc(o),!(6&nu)&&(Su=te()+500,Ec(0,!1))}}break;case 13:null!==(l=Ar(o,2))&&Lu(l,0,2),Hu(),td(o,2)}if(null===(o=ld(r))&&Uc(e,t,r,sd,n),o===a)break;a=o}null!==a&&r.stopPropagation()}else Uc(e,t,r,null,n)}}function ld(e){return ud(e=At(e))}var sd=null;function ud(e){if(sd=null,null!==(e=He(e))){var t=s(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return sd=e,null}function cd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ae:return 8;case oe:case ie:return 32;case le:return 268435456;default:return 32}default:return 32}}var fd=!1,dd=null,pd=null,hd=null,md=new Map,gd=new Map,vd=[],yd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bd(e,t){switch(e){case"focusin":case"focusout":dd=null;break;case"dragenter":case"dragleave":pd=null;break;case"mouseover":case"mouseout":hd=null;break;case"pointerover":case"pointerout":md.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gd.delete(t.pointerId)}}function kd(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},null!==t&&(null!==(t=Ue(t))&&nd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function wd(e){var t=He(e.target);if(null!==t){var n=s(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=u(n)))return e.blockedOn=t,void function(e,t){var n=D.p;try{return D.p=e,t()}finally{D.p=n}}(e.priority,function(){if(13===n.tag){var e=Mu();e=Ce(e);var t=Ar(n,e);null!==t&&Lu(t,0,e),td(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Sd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ld(e.nativeEvent);if(null!==n)return null!==(t=Ue(n))&&nd(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ot=r,n.target.dispatchEvent(r),Ot=null,t.shift()}return!0}function Ed(e,t,n){Sd(e)&&n.delete(t)}function xd(){fd=!1,null!==dd&&Sd(dd)&&(dd=null),null!==pd&&Sd(pd)&&(pd=null),null!==hd&&Sd(hd)&&(hd=null),md.forEach(Ed),gd.forEach(Ed)}function _d(e,t){e.blockedOn===t&&(e.blockedOn=null,fd||(fd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,xd)))}var Pd=null;function Td(e){Pd!==e&&(Pd=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Pd===e&&(Pd=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],a=e[t+2];if("function"!=typeof r){if(null===ud(r||n))continue;break}var o=Ue(n);null!==o&&(e.splice(t,3),t-=3,Ai(o,{pending:!0,data:a,method:n.method,action:r},r,a))}}))}function Cd(e){function t(t){return _d(t,e)}null!==dd&&_d(dd,e),null!==pd&&_d(pd,e),null!==hd&&_d(hd,e),md.forEach(t),gd.forEach(t);for(var n=0;n<vd.length;n++){var r=vd[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<vd.length&&null===(n=vd[0]).blockedOn;)wd(n),null===n.blockedOn&&vd.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var a=n[r],o=n[r+1],i=a[je]||null;if("function"==typeof o)i||Td(n);else if(i){var l=null;if(o&&o.hasAttribute("formAction")){if(a=o,i=o[je]||null)l=i.formAction;else if(null!==ud(a))continue}else l=i.action;"function"==typeof l?n[r+1]=l:(n.splice(r,3),r-=3),Td(n)}}}function Nd(e){this._internalRoot=e}function Od(e){this._internalRoot=e}Od.prototype.render=Nd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Zf(t.current,Mu(),e,t,null,null)},Od.prototype.unmount=Nd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zf(e.current,2,null,e,null,null),Hu(),t[Me]=null}},Od.prototype.unstable_scheduleHydration=function(e){if(e){var t=Oe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<vd.length&&0!==t&&t<vd[n].priority;n++);vd.splice(n,0,e),0===n&&wd(e)}};var Ad=a.version;if("19.1.1"!==Ad)throw Error(i(527,Ad,"19.1.1"));D.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=s(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return c(a),e;if(o===r)return c(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var l=!1,u=a.child;u;){if(u===n){l=!0,n=a,r=o;break}if(u===r){l=!0,r=a,n=o;break}u=u.sibling}if(!l){for(u=o.child;u;){if(u===n){l=!0,n=o,r=a;break}if(u===r){l=!0,r=o,n=a;break}u=u.sibling}if(!l)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?f(e):null)?null:e.stateNode};var Id={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.1.1"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jd.isDisabled&&jd.supportsFiber)try{ce=jd.inject(Id),fe=jd}catch(e){}}t.createRoot=function(e,t){if(!l(e))throw Error(i(299));var n=!1,r="",a=yl,o=bl,s=kl;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(s=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Jf(e,1,!1,null,0,n,r,a,o,s,0,null),e[Me]=t.current,Bc(e),new Nd(t)}},261:(e,t,n)=>{function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var o=a(n(871)),i=r(n(613)),l=r(n(769)),s=a(n(849)),u=a(n(624)),c=r(n(148));function f(){var e=new o.HandlebarsEnvironment;return s.extend(e,o),e.SafeString=i.default,e.Exception=l.default,e.Utils=s,e.escapeExpression=s.escapeExpression,e.VM=u,e.template=function(t){return u.template(t,e)},e}var d=f();d.create=f,c.default(d),d.default=d,t.default=d,e.exports=t.default},277:(e,t,n)=>{function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){a.default(e),o.default(e),i.default(e),l.default(e),s.default(e),u.default(e),c.default(e)},t.moveHelperToHooks=function(e,t,n){e.helpers[t]&&(e.hooks[t]=e.helpers[t],n||delete e.helpers[t])};var a=r(n(97)),o=r(n(785)),i=r(n(353)),l=r(n(355)),s=r(n(300)),u=r(n(466)),c=r(n(908))},300:(e,t)=>{t.__esModule=!0,t.default=function(e){e.registerHelper("log",function(){for(var t=[void 0],n=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)t.push(arguments[r]);var a=1;null!=n.hash.level?a=n.hash.level:n.data&&null!=n.data.level&&(a=n.data.level),t[0]=a,e.log.apply(e,t)})},e.exports=t.default},338:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(247)},350:(e,t,n)=>{t.__esModule=!0;var r,a=n(769),o=(r=a)&&r.__esModule?r:{default:r};function i(){this.parents=[]}function l(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function s(e){l.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function u(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}i.prototype={constructor:i,mutating:!1,acceptKey:function(e,t){var n=this.accept(e[t]);if(this.mutating){if(n&&!i.prototype[n.type])throw new o.default('Unexpected node type "'+n.type+'" found when accepting '+t+" on "+e.type);e[t]=n}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new o.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,n=e.length;t<n;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,n--)},accept:function(e){if(e){if(!this[e.type])throw new o.default("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:l,Decorator:l,BlockStatement:s,DecoratorBlock:s,PartialStatement:u,PartialBlockStatement:function(e){u.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:l,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},t.default=i,e.exports=t.default},353:(e,t,n)=>{t.__esModule=!0;var r,a=n(769),o=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new o.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t.default},355:(e,t,n)=>{t.__esModule=!0;var r,a=n(849),o=n(769),i=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("if",function(e,t){if(2!=arguments.length)throw new i.default("#if requires exactly one argument");return a.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||a.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){if(2!=arguments.length)throw new i.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},e.exports=t.default},425:(e,t,n)=>{t.__esModule=!0,t.SourceLocation=function(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}},t.id=function(e){return/^\[.*\]$/.test(e)?e.substring(1,e.length-1):e},t.stripFlags=function(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}},t.stripComment=function(e){return e.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},t.preparePath=function(e,t,n){n=this.locInfo(n);for(var r=e?"@":"",a=[],i=0,l=0,s=t.length;l<s;l++){var u=t[l].part,c=t[l].original!==u;if(r+=(t[l].separator||"")+u,c||".."!==u&&"."!==u&&"this"!==u)a.push(u);else{if(a.length>0)throw new o.default("Invalid path: "+r,{loc:n});".."===u&&i++}}return{type:"PathExpression",data:e,depth:i,parts:a,original:r,loc:n}},t.prepareMustache=function(e,t,n,r,a,o){var i=r.charAt(3)||r.charAt(2),l="{"!==i&&"&"!==i;return{type:/\*/.test(r)?"Decorator":"MustacheStatement",path:e,params:t,hash:n,escaped:l,strip:a,loc:this.locInfo(o)}},t.prepareRawBlock=function(e,t,n,r){i(e,n),r=this.locInfo(r);var a={type:"Program",body:t,strip:{},loc:r};return{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:a,openStrip:{},inverseStrip:{},closeStrip:{},loc:r}},t.prepareBlock=function(e,t,n,r,a,l){r&&r.path&&i(e,r);var s=/\*/.test(e.open);t.blockParams=e.blockParams;var u=void 0,c=void 0;if(n){if(s)throw new o.default("Unexpected inverse block on decorator",n);n.chain&&(n.program.body[0].closeStrip=r.strip),c=n.strip,u=n.program}a&&(a=u,u=t,t=a);return{type:s?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:u,openStrip:e.strip,inverseStrip:c,closeStrip:r&&r.strip,loc:this.locInfo(l)}},t.prepareProgram=function(e,t){if(!t&&e.length){var n=e[0].loc,r=e[e.length-1].loc;n&&r&&(t={source:n.source,start:{line:n.start.line,column:n.start.column},end:{line:r.end.line,column:r.end.column}})}return{type:"Program",body:e,strip:{},loc:t}},t.preparePartialBlock=function(e,t,n,r){return i(e,n),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:n&&n.strip,loc:this.locInfo(r)}};var r,a=n(769),o=(r=a)&&r.__esModule?r:{default:r};function i(e,t){if(t=t.path?t.path.original:t,e.path.original!==t){var n={loc:e.path.loc};throw new o.default(e.path.original+" doesn't match "+t,n)}}},430:(e,t,n)=>{t.__esModule=!0;var r=n(849);t.default=function(e){e.registerDecorator("inline",function(e,t,n,a){var o=e;return t.partials||(t.partials={},o=function(a,o){var i=n.partials;n.partials=r.extend({},i,t.partials);var l=e(a,o);return n.partials=i,l}),t.partials[a.args[0]]=a.fn,o})},e.exports=t.default},466:(e,t)=>{t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",function(e,t,n){return e?n.lookupProperty(e,t):e})},e.exports=t.default},477:(e,t)=>{
/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<o(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var l=2*(r+1)-1,s=e[l],u=l+1,c=e[u];if(0>o(s,n))u<a&&0>o(c,s)?(e[r]=c,e[u]=n,r=u):(e[r]=s,e[l]=n,r=l);else{if(!(u<a&&0>o(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,s=l.now();t.unstable_now=function(){return l.now()-s}}var u=[],c=[],f=1,d=null,p=3,h=!1,m=!1,g=!1,v=!1,y="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,k="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)a(c);else{if(!(t.startTime<=e))break;a(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function S(e){if(g=!1,w(e),!m)if(null!==r(u))m=!0,x||(x=!0,E());else{var t=r(c);null!==t&&I(S,t.startTime-e)}}var E,x=!1,_=-1,P=5,T=-1;function C(){return!!v||!(t.unstable_now()-T<P)}function N(){if(v=!1,x){var e=t.unstable_now();T=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(_),_=-1),h=!0;var o=p;try{t:{for(w(e),d=r(u);null!==d&&!(d.expirationTime>e&&C());){var i=d.callback;if("function"==typeof i){d.callback=null,p=d.priorityLevel;var l=i(d.expirationTime<=e);if(e=t.unstable_now(),"function"==typeof l){d.callback=l,w(e),n=!0;break t}d===r(u)&&a(u),w(e)}else a(u);d=r(u)}if(null!==d)n=!0;else{var s=r(c);null!==s&&I(S,s.startTime-e),n=!1}}break e}finally{d=null,p=o,h=!1}n=void 0}}finally{n?E():x=!1}}}if("function"==typeof k)E=function(){k(N)};else if("undefined"!=typeof MessageChannel){var O=new MessageChannel,A=O.port2;O.port1.onmessage=N,E=function(){A.postMessage(null)}}else E=function(){y(N,0)};function I(e,n){_=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,a,o){var i=t.unstable_now();switch("object"==typeof o&&null!==o?o="number"==typeof(o=o.delay)&&0<o?i+o:i:o=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:f++,callback:a,priorityLevel:e,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>i?(e.sortIndex=o,n(c,e),null===r(u)&&e===r(c)&&(g?(b(_),_=-1):g=!0,I(S,o-i))):(e.sortIndex=l,n(u,e),m||h||(m=!0,x||(x=!0,E()))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},540:(e,t,n)=>{e.exports=n(869)},566:(e,t,n)=>{t.__esModule=!0;var r=n(849),a={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=r.indexOf(a.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=a.lookupLevel(e),"undefined"!=typeof console&&a.lookupLevel(a.level)<=e){var t=a.methodMap[e];console[t]||(t="log");for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];console[t].apply(console,r)}}};t.default=a,e.exports=t.default},613:(e,t)=>{function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t.default=n,e.exports=t.default},614:(e,t)=>{t.__esModule=!0,t.wrapHelper=function(e,t){if("function"!=typeof e)return e;return function(){return arguments[arguments.length-1]=t(arguments[arguments.length-1]),e.apply(this,arguments)}}},624:(e,t,n)=>{t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,n=l.COMPILER_REVISION;if(t>=l.LAST_COMPATIBLE_COMPILER_REVISION&&t<=l.COMPILER_REVISION)return;if(t<l.LAST_COMPATIBLE_COMPILER_REVISION){var r=l.REVISION_CHANGES[n],a=l.REVISION_CHANGES[t];throw new i.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+a+").")}throw new i.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")},t.template=function(e,t){if(!t)throw new i.default("No environment passed to template");if(!e||!e.main)throw new i.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var n=e.compiler&&7===e.compiler[0];var r={strict:function(e,t,n){if(!e||!(t in e))throw new i.default('"'+t+'" not defined in '+e,{loc:n});return r.lookupProperty(e,t)},lookupProperty:function(e,t){var n=e[t];return null==n||Object.prototype.hasOwnProperty.call(e,t)||c.resultIsAllowed(n,r.protoAccessControl,t)?n:void 0},lookup:function(e,t){for(var n=e.length,a=0;a<n;a++){if(null!=(e[a]&&r.lookupProperty(e[a],t)))return e[a][t]}},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:a.escapeExpression,invokePartial:function(n,r,o){o.hash&&(r=a.extend({},r,o.hash),o.ids&&(o.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,r,o);var l=a.extend({},o,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),s=t.VM.invokePartial.call(this,n,r,l);if(null==s&&t.compile&&(o.partials[o.name]=t.compile(n,e.compilerOptions,t),s=o.partials[o.name](r,l)),null!=s){if(o.indent){for(var u=s.split("\n"),c=0,f=u.length;c<f&&(u[c]||c+1!==f);c++)u[c]=o.indent+u[c];s=u.join("\n")}return s}throw new i.default("The partial "+o.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,r,a){var o=this.programs[e],i=this.fn(e);return t||a||r||n?o=f(this,e,i,t,n,r,a):o||(o=this.programs[e]=f(this,e,i)),o},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=a.extend({},t,e)),n},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function o(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=n.data;o._setup(n),!n.partial&&e.useData&&(a=function(e,t){t&&"root"in t||((t=t?l.createFrame(t):{}).root=e);return t}(t,a));var i=void 0,s=e.useBlockParams?[]:void 0;function u(t){return""+e.main(r,t,r.helpers,r.partials,a,s,i)}return e.useDepths&&(i=n.depths?t!=n.depths[0]?[t].concat(n.depths):n.depths:[t]),(u=p(e.main,u,r,n.depths||[],a,s))(t,n)}return o.isTop=!0,o._setup=function(o){if(o.partial)r.protoAccessControl=o.protoAccessControl,r.helpers=o.helpers,r.partials=o.partials,r.decorators=o.decorators,r.hooks=o.hooks;else{var i=a.extend({},t.helpers,o.helpers);!function(e,t){Object.keys(e).forEach(function(n){var r=e[n];e[n]=function(e,t){var n=t.lookupProperty;return u.wrapHelper(e,function(e){return a.extend({lookupProperty:n},e)})}(r,t)})}(i,r),r.helpers=i,e.usePartial&&(r.partials=r.mergeIfNeeded(o.partials,t.partials)),(e.usePartial||e.useDecorators)&&(r.decorators=a.extend({},t.decorators,o.decorators)),r.hooks={},r.protoAccessControl=c.createProtoAccessControl(o);var l=o.allowCallsToHelperMissing||n;s.moveHelperToHooks(r,"helperMissing",l),s.moveHelperToHooks(r,"blockHelperMissing",l)}},o._child=function(t,n,a,o){if(e.useBlockParams&&!a)throw new i.default("must pass block params");if(e.useDepths&&!o)throw new i.default("must pass parent depths");return f(r,t,e[t],n,0,a,o)},o},t.wrapProgram=f,t.resolvePartial=function(e,t,n){e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name];return e},t.invokePartial=function(e,t,n){var r=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var o=void 0;n.fn&&n.fn!==d&&function(){n.data=l.createFrame(n.data);var e=n.fn;o=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=l.createFrame(n.data),n.data["partial-block"]=r,e(t,n)},e.partials&&(n.partials=a.extend({},n.partials,e.partials))}();void 0===e&&o&&(e=o);if(void 0===e)throw new i.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},t.noop=d;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(849)),o=n(769),i=(r=o)&&r.__esModule?r:{default:r},l=n(871),s=n(277),u=n(614),c=n(865);function f(e,t,n,r,a,o,i){function l(t){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],l=i;return!i||t==i[0]||t===e.nullContext&&null===i[0]||(l=[t].concat(i)),n(e,t,e.helpers,e.partials,a.data||r,o&&[a.blockParams].concat(o),l)}return(l=p(n,l,e,i,r,o)).program=t,l.depth=i?i.length:0,l.blockParams=a||0,l}function d(){return""}function p(e,t,n,r,o,i){if(e.decorator){var l={};t=e.decorator(t,l,n,r&&r[0],o,i,r),a.extend(t,l)}return t}},632:(e,t,n)=>{t.__esModule=!0;var r=n(849),a=void 0;try{}catch(e){}function o(e,t,n){if(r.isArray(e)){for(var a=[],o=0,i=e.length;o<i;o++)a.push(t.wrap(e[o],n));return a}return"boolean"==typeof e||"number"==typeof e?e+"":e}function i(e){this.srcFile=e,this.source=[]}a||((a=function(e,t,n,r){this.src="",r&&this.add(r)}).prototype={add:function(e){r.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){r.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),i.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each(function(t){e.add(["  ",t,"\n"])}),e},each:function(e){for(var t=0,n=this.source.length;t<n;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new a(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof a?e:(e=o(e,this,t),new a(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,n){return n=this.generateList(n),this.wrap([e,t?"."+t+"(":"(",n,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=this,n=[];Object.keys(e).forEach(function(r){var a=o(e[r],t);"undefined"!==a&&n.push([t.quotedString(r),":",a])});var r=this.generateList(n);return r.prepend("{"),r.add("}"),r},generateList:function(e){for(var t=this.empty(),n=0,r=e.length;n<r;n++)n&&t.add(","),t.add(o(e[n],this));return t},generateArray:function(e){var t=this.generateList(e);return t.prepend("["),t.add("]"),t}},t.default=i,e.exports=t.default},639:(e,t,n)=>{function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=r(n(261)),o=r(n(919)),i=n(27),l=n(127),s=r(n(727)),u=r(n(350)),c=r(n(148)),f=a.default.create;function d(){var e=f();return e.compile=function(t,n){return l.compile(t,n,e)},e.precompile=function(t,n){return l.precompile(t,n,e)},e.AST=o.default,e.Compiler=l.Compiler,e.JavaScriptCompiler=s.default,e.Parser=i.parser,e.parse=i.parse,e.parseWithoutProcessing=i.parseWithoutProcessing,e}var p=d();p.create=d,c.default(p),p.Visitor=u.default,p.default=p,t.default=p,e.exports=t.default},698:(e,t)=>{
/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function a(e,t,r){var a=null;if(void 0!==r&&(a=""+r),void 0!==t.key&&(a=""+t.key),"key"in t)for(var o in r={},t)"key"!==o&&(r[o]=t[o]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:a,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=a,t.jsxs=a},726:(e,t,n)=>{t.__esModule=!0,t.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.extend.apply(void 0,[Object.create(null)].concat(t))};var r=n(849)},727:(e,t,n)=>{function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=n(871),o=r(n(769)),i=n(849),l=r(n(632));function s(e){this.value=e}function u(){}u.prototype={nameLookup:function(e,t){return this.internalNameLookup(e,t)},depthedLookup:function(e){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(e),")"]},compilerInfo:function(){var e=a.COMPILER_REVISION;return[e,a.REVISION_CHANGES[e]]},appendToBuffer:function(e,t,n){return i.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:n?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(e,t){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",e,",",JSON.stringify(t),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(e,t,n,r){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!r,this.name=this.environment.name,this.isChild=!!n,this.context=n||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var a=e.opcodes,i=void 0,l=void 0,s=void 0,u=void 0;for(s=0,u=a.length;s<u;s++)i=a[s],this.source.currentLocation=i.loc,l=l||i.loc,this[i.opcode].apply(this,i.args);if(this.source.currentLocation=l,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new o.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),r?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var c=this.createFunctionContext(r);if(this.isChild)return c;var f={compiler:this.compilerInfo(),main:c};this.decorators&&(f.main_d=this.decorators,f.useDecorators=!0);var d=this.context,p=d.programs,h=d.decorators;for(s=0,u=p.length;s<u;s++)p[s]&&(f[s]=p[s],h[s]&&(f[s+"_d"]=h[s],f.useDecorators=!0));return this.environment.usePartial&&(f.usePartial=!0),this.options.data&&(f.useData=!0),this.useDepths&&(f.useDepths=!0),this.useBlockParams&&(f.useBlockParams=!0),this.options.compat&&(f.compat=!0),r?f.compilerOptions=this.options:(f.compiler=JSON.stringify(f.compiler),this.source.currentLocation={start:{line:1,column:0}},f=this.objectLiteral(f),t.srcName?(f=f.toStringWithSourceMap({file:t.destName})).map=f.map&&f.map.toString():f=f.toString()),f},preamble:function(){this.lastContext=0,this.source=new l.default(this.options.srcName),this.decorators=new l.default(this.options.srcName)},createFunctionContext:function(e){var t=this,n="",r=this.stackVars.concat(this.registers.list);r.length>0&&(n+=", "+r.join(", "));var a=0;Object.keys(this.aliases).forEach(function(e){var r=t.aliases[e];r.children&&r.referenceCount>1&&(n+=", alias"+ ++a+"="+e,r.children[0]="alias"+a)}),this.lookupPropertyFunctionIsUsed&&(n+=", "+this.lookupPropertyFunctionVarDeclaration());var o=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&o.push("blockParams"),this.useDepths&&o.push("depths");var i=this.mergeSource(n);return e?(o.push(i),Function.apply(this,o)):this.source.wrap(["function(",o.join(","),") {\n  ",i,"}"])},mergeSource:function(e){var t=this.environment.isSimple,n=!this.forceBuffer,r=void 0,a=void 0,o=void 0,i=void 0;return this.source.each(function(e){e.appendToBuffer?(o?e.prepend("  + "):o=e,i=e):(o&&(a?o.prepend("buffer += "):r=!0,i.add(";"),o=i=void 0),a=!0,t||(n=!1))}),n?o?(o.prepend("return "),i.add(";")):a||this.source.push('return "";'):(e+=", buffer = "+(r?"":this.initializeBuffer()),o?(o.prepend("return buffer + "),i.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(r?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(e){var t=this.aliasable("container.hooks.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs(e,0,n);var r=this.popStack();n.splice(1,0,r),this.push(this.source.functionCall(t,"call",n))},ambiguousBlockValue:function(){var e=this.aliasable("container.hooks.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var n=this.topStack();t.splice(1,0,n),this.pushSource(["if (!",this.lastHelper,") { ",n," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,n,r){var a=0;r||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[a++])),this.resolvePath("context",e,a,t,n)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,n){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0,n)},resolvePath:function(e,t,n,r,a){var o=this;if(this.options.strict||this.options.assumeObjects)this.push(function(e,t,n,r,a){var o=t.popStack(),i=n.length;e&&i--;for(;r<i;r++)o=t.nameLookup(o,n[r],a);return e?[t.aliasable("container.strict"),"(",o,", ",t.quotedString(n[r]),", ",JSON.stringify(t.source.currentLocation)," )"]:o}(this.options.strict&&a,this,t,n,e));else for(var i=t.length;n<i;n++)this.replaceStack(function(a){var i=o.nameLookup(a,t[n],e);return r?[" && ",i]:[" != null ? ",i," : ",a]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,t){var n=this.nameLookup("decorators",t,"decorator"),r=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(n,"",["fn","props","container",r])," || fn;"])},invokeHelper:function(e,t,n){var r=this.popStack(),a=this.setupHelper(e,t),o=[];n&&o.push(a.name),o.push(r),this.options.strict||o.push(this.aliasable("container.hooks.helperMissing"));var i=["(",this.itemsSeparatedBy(o,"||"),")"],l=this.source.functionCall(i,"call",a.callParams);this.push(l)},itemsSeparatedBy:function(e,t){var n=[];n.push(e[0]);for(var r=1;r<e.length;r++)n.push(t,e[r]);return n},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(this.source.functionCall(n.name,"call",n.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var n=this.popStack();this.emptyHash();var r=this.setupHelper(0,e,t),a=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",e,"helper")," || ",n,")"];this.options.strict||(a[0]="(helper = ",a.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",a,r.paramsInit?["),(",r.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",r.callParams)," : helper))"])},invokePartial:function(e,t,n){var r=[],a=this.setupParams(t,1,r);e&&(t=this.popStack(),delete a.name),n&&(a.indent=JSON.stringify(n)),a.helpers="helpers",a.partials="partials",a.decorators="container.decorators",e?r.unshift(t):r.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(a.depths="depths"),a=this.objectLiteral(a),r.push(a),this.push(this.source.functionCall("container.invokePartial","",r))},assignToHash:function(e){var t=this.popStack(),n=void 0,r=void 0,a=void 0;this.trackIds&&(a=this.popStack()),this.stringParams&&(r=this.popStack(),n=this.popStack());var o=this.hash;n&&(o.contexts[e]=n),r&&(o.types[e]=r),a&&(o.ids[e]=a),o.values[e]=t},pushId:function(e,t,n){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(n?" + "+JSON.stringify("."+n):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:u,compileChildren:function(e,t){for(var n=e.children,r=void 0,a=void 0,o=0,i=n.length;o<i;o++){r=n[o],a=new this.compiler;var l=this.matchExistingProgram(r);if(null==l){this.context.programs.push("");var s=this.context.programs.length;r.index=s,r.name="program"+s,this.context.programs[s]=a.compile(r,t,this.context,!this.precompile),this.context.decorators[s]=a.decorators,this.context.environments[s]=r,this.useDepths=this.useDepths||a.useDepths,this.useBlockParams=this.useBlockParams||a.useBlockParams,r.useDepths=this.useDepths,r.useBlockParams=this.useBlockParams}else r.index=l.index,r.name="program"+l.index,this.useDepths=this.useDepths||l.useDepths,this.useBlockParams=this.useBlockParams||l.useBlockParams}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return r}},programExpression:function(e){var t=this.environment.children[e],n=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&n.push("blockParams"),this.useDepths&&n.push("depths"),"container.program("+n.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof s||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new s(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],n=void 0,r=void 0,a=void 0;if(!this.isInline())throw new o.default("replaceStack on non-inline");var i=this.popStack(!0);if(i instanceof s)t=["(",n=[i.value]],a=!0;else{r=!0;var l=this.incrStack();t=["((",this.push(l)," = ",i,")"],n=this.topStack()}var u=e.call(this,n);a||this.popStack(),r&&this.stackSlot--,this.push(t.concat(u,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r instanceof s)this.compileStack.push(r);else{var a=this.incrStack();this.pushSource([a," = ",r,";"]),this.compileStack.push(a)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof s)return n.value;if(!t){if(!this.stackSlot)throw new o.default("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof s?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):((t=this.aliases[e]=this.source.wrap(e)).aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,n){var r=[];return{params:r,paramsInit:this.setupHelperArgs(t,e,r,n),name:this.nameLookup("helpers",t,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(r)}},setupParams:function(e,t,n){var r={},a=[],o=[],i=[],l=!n,s=void 0;l&&(n=[]),r.name=this.quotedString(e),r.hash=this.popStack(),this.trackIds&&(r.hashIds=this.popStack()),this.stringParams&&(r.hashTypes=this.popStack(),r.hashContexts=this.popStack());var u=this.popStack(),c=this.popStack();(c||u)&&(r.fn=c||"container.noop",r.inverse=u||"container.noop");for(var f=t;f--;)s=this.popStack(),n[f]=s,this.trackIds&&(i[f]=this.popStack()),this.stringParams&&(o[f]=this.popStack(),a[f]=this.popStack());return l&&(r.args=this.source.generateArray(n)),this.trackIds&&(r.ids=this.source.generateArray(i)),this.stringParams&&(r.types=this.source.generateArray(o),r.contexts=this.source.generateArray(a)),this.options.data&&(r.data="data"),this.useBlockParams&&(r.blockParams="blockParams"),r},setupHelperArgs:function(e,t,n,r){var a=this.setupParams(e,t,n);return a.loc=JSON.stringify(this.source.currentLocation),a=this.objectLiteral(a),r?(this.useRegister("options"),n.push("options"),["options=",a]):n?(n.push(a),""):a}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=u.RESERVED_WORDS={},n=0,r=e.length;n<r;n++)t[e[n]]=!0}(),u.isValidJavaScriptVariableName=function(e){return!u.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t.default=u,e.exports=t.default},769:(e,t)=>{t.__esModule=!0;var n=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function r(e,t){var a=t&&t.loc,o=void 0,i=void 0,l=void 0,s=void 0;a&&(o=a.start.line,i=a.end.line,l=a.start.column,s=a.end.column,e+=" - "+o+":"+l);for(var u=Error.prototype.constructor.call(this,e),c=0;c<n.length;c++)this[n[c]]=u[n[c]];Error.captureStackTrace&&Error.captureStackTrace(this,r);try{a&&(this.lineNumber=o,this.endLineNumber=i,Object.defineProperty?(Object.defineProperty(this,"column",{value:l,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:s,enumerable:!0})):(this.column=l,this.endColumn=s))}catch(e){}}r.prototype=new Error,t.default=r,e.exports=t.default},785:(e,t,n)=>{t.__esModule=!0;var r,a=n(849),o=n(769),i=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("each",function(e,t){if(!t)throw new i.default("Must pass iterator to #each");var n,r=t.fn,o=t.inverse,l=0,s="",u=void 0,c=void 0;function f(t,n,o){u&&(u.key=t,u.index=n,u.first=0===n,u.last=!!o,c&&(u.contextPath=c+t)),s+=r(e[t],{data:u,blockParams:a.blockParams([e[t],t],[c+t,null])})}if(t.data&&t.ids&&(c=a.appendContextPath(t.data.contextPath,t.ids[0])+"."),a.isFunction(e)&&(e=e.call(this)),t.data&&(u=a.createFrame(t.data)),e&&"object"==typeof e)if(a.isArray(e))for(var d=e.length;l<d;l++)l in e&&f(l,l,l===e.length-1);else if("function"==typeof Symbol&&e[Symbol.iterator]){for(var p=[],h=e[Symbol.iterator](),m=h.next();!m.done;m=h.next())p.push(m.value);for(d=(e=p).length;l<d;l++)f(l,l,l===e.length-1)}else n=void 0,Object.keys(e).forEach(function(e){void 0!==n&&f(n,l-1),n=e,l++}),void 0!==n&&f(n,l-1,!0);return 0===l&&(s=o(this)),s})},e.exports=t.default},848:(e,t,n)=>{e.exports=n(698)},849:(e,t)=>{t.__esModule=!0,t.extend=i,t.indexOf=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}if(!a.test(e))return e;return e.replace(r,o)},t.isEmpty=function(e){return!e&&0!==e||!(!u(e)||0!==e.length)},t.createFrame=function(e){var t=i({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},r=/[&<>"'`=]/g,a=/[&<>"'`=]/;function o(e){return n[e]}function i(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}var l=Object.prototype.toString;t.toString=l;var s=function(e){return"function"==typeof e};s(/x/)&&(t.isFunction=s=function(e){return"function"==typeof e&&"[object Function]"===l.call(e)}),t.isFunction=s;var u=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===l.call(e)};t.isArray=u},865:(e,t,n)=>{t.__esModule=!0,t.createProtoAccessControl=function(e){var t=Object.create(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var n=Object.create(null);return n.__proto__=!1,{properties:{whitelist:a.createNewLookupObject(n,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:a.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},t.resultIsAllowed=function(e,t,n){return s("function"==typeof e?t.methods:t.properties,n)},t.resetLoggedProperties=function(){Object.keys(l).forEach(function(e){delete l[e]})};var r,a=n(726),o=n(566),i=(r=o)&&r.__esModule?r:{default:r},l=Object.create(null);function s(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(function(e){!0!==l[e]&&(l[e]=!0,i.default.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(t),!1)}},869:(e,t)=>{
/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),s=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||h}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var k=b.prototype=new y;k.constructor=b,m(k,v.prototype),k.isPureReactComponent=!0;var w=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},E=Object.prototype.hasOwnProperty;function x(e,t,r,a,o,i){return r=i.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:i}}function _(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var P=/\/+/g;function T(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function C(){}function N(e,t,a,o,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var s,u,c=!1;if(null===e)c=!0;else switch(l){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0;break;case d:return N((c=e._init)(e._payload),t,a,o,i)}}if(c)return i=i(e),c=""===o?"."+T(e,0):o,w(i)?(a="",null!=c&&(a=c.replace(P,"$&/")+"/"),N(i,t,a,"",function(e){return e})):null!=i&&(_(i)&&(s=i,u=a+(null==i.key||e&&e.key===i.key?"":(""+i.key).replace(P,"$&/")+"/")+c,i=x(s.type,u,void 0,0,0,s.props)),t.push(i)),1;c=0;var f,h=""===o?".":o+":";if(w(e))for(var m=0;m<e.length;m++)c+=N(o=e[m],t,a,l=h+T(o,m),i);else if("function"==typeof(m=null===(f=e)||"object"!=typeof f?null:"function"==typeof(f=p&&f[p]||f["@@iterator"])?f:null))for(e=m.call(e),m=0;!(o=e.next()).done;)c+=N(o=o.value,t,a,l=h+T(o,m++),i);else if("object"===l){if("function"==typeof e.then)return N(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(C,C):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,a,o,i);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function O(e,t,n){if(null==e)return e;var r=[],a=0;return N(e,r,"","",function(e){return t.call(n,e,a++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function j(){}t.Children={map:O,forEach:function(e,t,n){O(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=i,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),a=e.key;if(null!=t)for(o in void 0!==t.ref&&void 0,void 0!==t.key&&(a=""+t.key),t)!E.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var i=Array(o),l=0;l<o;l++)i[l]=arguments[l+2];r.children=i}return x(e.type,a,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:l,_context:e},e},t.createElement=function(e,t,n){var r,a={},o=null;if(null!=t)for(r in void 0!==t.key&&(o=""+t.key),t)E.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(a[r]=t[r]);var i=arguments.length-2;if(1===i)a.children=n;else if(1<i){for(var l=Array(i),s=0;s<i;s++)l[s]=arguments[s+2];a.children=l}if(e&&e.defaultProps)for(r in i=e.defaultProps)void 0===a[r]&&(a[r]=i[r]);return x(e,o,void 0,0,0,a)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),a=S.S;null!==a&&a(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(j,I)}catch(e){I(e)}finally{S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=S.H;if("function"==typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return S.H.useTransition()},t.version="19.1.1"},871:(e,t,n)=>{function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=f;var a=n(849),o=r(n(769)),i=n(277),l=n(940),s=r(n(566)),u=n(865);t.VERSION="4.7.8";t.COMPILER_REVISION=8;t.LAST_COMPATIBLE_COMPILER_REVISION=7;t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var c="[object Object]";function f(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},i.registerDefaultHelpers(this),l.registerDefaultDecorators(this)}f.prototype={constructor:f,logger:s.default,log:s.default.log,registerHelper:function(e,t){if(a.toString.call(e)===c){if(t)throw new o.default("Arg not supported with multiple helpers");a.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(a.toString.call(e)===c)a.extend(this.partials,e);else{if(void 0===t)throw new o.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(a.toString.call(e)===c){if(t)throw new o.default("Arg not supported with multiple decorators");a.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){u.resetLoggedProperties()}};var d=s.default.log;t.log=d,t.createFrame=a.createFrame,t.logger=s.default},908:(e,t,n)=>{t.__esModule=!0;var r,a=n(849),o=n(769),i=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("with",function(e,t){if(2!=arguments.length)throw new i.default("#with requires exactly one argument");a.isFunction(e)&&(e=e.call(this));var n=t.fn;if(a.isEmpty(e))return t.inverse(this);var r=t.data;return t.data&&t.ids&&((r=a.createFrame(t.data)).contextPath=a.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:r,blockParams:a.blockParams([e],[r&&r.contextPath])})})},e.exports=t.default},915:(e,t,n)=>{t.__esModule=!0;var r,a=n(350),o=(r=a)&&r.__esModule?r:{default:r};function i(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}function l(e,t,n){void 0===t&&(t=e.length);var r=e[t-1],a=e[t-2];return r?"ContentStatement"===r.type?(a||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(r.original):void 0:n}function s(e,t,n){void 0===t&&(t=-1);var r=e[t+1],a=e[t+2];return r?"ContentStatement"===r.type?(a||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(r.original):void 0:n}function u(e,t,n){var r=e[null==t?0:t+1];if(r&&"ContentStatement"===r.type&&(n||!r.rightStripped)){var a=r.value;r.value=r.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),r.rightStripped=r.value!==a}}function c(e,t,n){var r=e[null==t?e.length-1:t-1];if(r&&"ContentStatement"===r.type&&(n||!r.leftStripped)){var a=r.value;return r.value=r.value.replace(n?/\s+$/:/[ \t]+$/,""),r.leftStripped=r.value!==a,r.leftStripped}}i.prototype=new o.default,i.prototype.Program=function(e){var t=!this.options.ignoreStandalone,n=!this.isRootSeen;this.isRootSeen=!0;for(var r=e.body,a=0,o=r.length;a<o;a++){var i=r[a],f=this.accept(i);if(f){var d=l(r,a,n),p=s(r,a,n),h=f.openStandalone&&d,m=f.closeStandalone&&p,g=f.inlineStandalone&&d&&p;f.close&&u(r,a,!0),f.open&&c(r,a,!0),t&&g&&(u(r,a),c(r,a)&&"PartialStatement"===i.type&&(i.indent=/([ \t]+$)/.exec(r[a-1].original)[1])),t&&h&&(u((i.program||i.inverse).body),c(r,a)),t&&m&&(u(r,a),c((i.inverse||i.program).body))}}return e},i.prototype.BlockStatement=i.prototype.DecoratorBlock=i.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,n=e.program&&e.inverse,r=n,a=n;if(n&&n.chained)for(r=n.body[0].program;a.chained;)a=a.body[a.body.length-1].program;var o={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:s(t.body),closeStandalone:l((r||t).body)};if(e.openStrip.close&&u(t.body,null,!0),n){var i=e.inverseStrip;i.open&&c(t.body,null,!0),i.close&&u(r.body,null,!0),e.closeStrip.open&&c(a.body,null,!0),!this.options.ignoreStandalone&&l(t.body)&&s(r.body)&&(c(t.body),u(r.body))}else e.closeStrip.open&&c(t.body,null,!0);return o},i.prototype.Decorator=i.prototype.MustacheStatement=function(e){return e.strip},i.prototype.PartialStatement=i.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t.default=i,e.exports=t.default},919:(e,t)=>{t.__esModule=!0;var n={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!n.helpers.scopedId(e)&&!e.depth}}};t.default=n,e.exports=t.default},940:(e,t,n)=>{t.__esModule=!0,t.registerDefaultDecorators=function(e){o.default(e)};var r,a=n(430),o=(r=a)&&r.__esModule?r:{default:r}},961:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(221)},982:(e,t,n)=>{e.exports=n(477)}},v={};function y(e){var t=v[e];if(void 0!==t)return t.exports;var n=v[e]={exports:{}};return g[e](n,n.exports,y),n.exports}y.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return y.d(t,{a:t}),t},y.d=(e,t)=>{for(var n in t)y.o(t,n)&&!y.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},y.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var b=y(848),k=y(540),w=y(338);const S=({children:e,className:t,overrideDefaults:n=!1,...r})=>{const a=(0,k.useMemo)(()=>{const e=[];return n||e.push("menu_button","interactable"),e.push(t),e.filter(Boolean).join(" ")},[n,t]);return(0,b.jsx)("button",{className:a,...r,children:e})},E=({children:e,className:t,overrideDefaults:n=!1,...r})=>{const a=(0,k.useMemo)(()=>{const e=[];return n||e.push("text_pole"),e.push(t),e.filter(Boolean).join(" ")},[n,t]);return(0,b.jsx)("select",{className:a,...r,children:e})},x=({children:e,className:t,overrideDefaults:n=!1,...r})=>{const a=(0,k.useMemo)(()=>{const e=[];return n||e.push("text_pole","textarea_compact"),e.push(t),e.filter(Boolean).join(" ")},[n,t]);return(0,b.jsx)("textarea",{className:a,...r,children:e})};y(961);var _=(e=>(e[e.TEXT=1]="TEXT",e[e.CONFIRM=2]="CONFIRM",e[e.INPUT=3]="INPUT",e[e.DISPLAY=4]="DISPLAY",e))(_||{}),P=(e=>(e[e.AFFIRMATIVE=1]="AFFIRMATIVE",e[e.NEGATIVE=0]="NEGATIVE",e[e.CANCELLED=null]="CANCELLED",e))(P||{});const T=(e=>{var t={};return y.d(t,e),t})({persona_description_positions:()=>e.persona_description_positions,renderStoryString:()=>e.renderStoryString});const C=(e=>{var t={};return y.d(t,e),t})({baseChatReplace:()=>t.baseChatReplace,characters:()=>t.characters,chat_metadata:()=>t.chat_metadata,depth_prompt_depth_default:()=>t.depth_prompt_depth_default,depth_prompt_role_default:()=>t.depth_prompt_role_default,extension_prompt_types:()=>t.extension_prompt_types,getMaxContextSize:()=>t.getMaxContextSize,name1:()=>t.name1,name2:()=>t.name2,parseMesExamples:()=>t.parseMesExamples,this_chid:()=>t.this_chid});const N=(e=>{var t={};return y.d(t,e),t})({METADATA_KEY:()=>n.METADATA_KEY,selected_world_info:()=>n.selected_world_info,wi_anchor_position:()=>n.wi_anchor_position,world_info:()=>n.world_info,world_info_include_names:()=>n.world_info_include_names,world_names:()=>n.world_names});(e=>{var t={};y.d(t,e)})({});(e=>{var t={};y.d(t,e)})({});const O=(e=>{var t={};return y.d(t,e),t})({formatInstructModeExamples:()=>o.formatInstructModeExamples,formatInstructModeSystemPrompt:()=>o.formatInstructModeSystemPrompt});const A=(e=>{var t={};return y.d(t,e),t})({appendFileContent:()=>i.appendFileContent});const I=(e=>{var t={};return y.d(t,e),t})({formatWorldInfo:()=>l.formatWorldInfo,getPromptPosition:()=>l.getPromptPosition,getPromptRole:()=>l.getPromptRole,prepareOpenAIMessages:()=>l.prepareOpenAIMessages,setOpenAIMessageExamples:()=>l.setOpenAIMessageExamples,setOpenAIMessages:()=>l.setOpenAIMessages});const j=(e=>{var t={};return y.d(t,e),t})({metadata_keys:()=>s.metadata_keys});const M=(e=>{var t={};return y.d(t,e),t})({getGroupDepthPrompts:()=>u.getGroupDepthPrompts,selected_group:()=>u.selected_group});const D=(e=>{var t={};return y.d(t,e),t})({getRegexedString:()=>c.getRegexedString,regex_placement:()=>c.regex_placement});const L=(e=>{var t={};return y.d(t,e),t})({getCharaFilename:()=>f.getCharaFilename});(e=>{var t={};y.d(t,e)})({});(e=>{var t={};y.d(t,e)})({});(e=>{var t={};y.d(t,e)})({});(e=>{var t={};y.d(t,e)})({}),SillyTavern.getContext();const R=(e,t,n)=>{if(!e||!e.api)return!1;const r=n[e.api];if(!r||!Object.hasOwn(t,r.selected))return!1;switch(r.selected){case"openai":return!!r.source;case"textgenerationwebui":return!!r.type}return!1},z=SillyTavern.getContext(),F=({initialSelectedProfileId:e,allowedTypes:t={openai:"Chat Completion",textgenerationwebui:"Text Completion"},placeholder:n="Select a Connection Profile",onChange:r,onCreate:a,onUpdate:o,onDelete:i})=>{const[l,s]=(0,k.useState)(e??""),[u,c]=(0,k.useState)(Date.now()),{isEnabled:f,profiles:d,connectApiMap:p}=(0,k.useMemo)(()=>{var e,t;return(null==(e=z.extensionSettings.disabledExtensions)?void 0:e.includes("connection-manager"))?(console.error("Connection Manager extension is disabled."),{isEnabled:!1,profiles:[],connectApiMap:{}}):{isEnabled:!0,profiles:(null==(t=z.extensionSettings.connectionManager)?void 0:t.profiles)??[],connectApiMap:z.CONNECT_API_MAP}},[u]);(0,k.useEffect)(()=>{if(!f)return;const e=e=>{R(e,t,p)&&(c(Date.now()),null==a||a(e))},n=(e,n)=>{const a=R(e,t,p),i=R(n,t,p);(a||i)&&c(Date.now()),null==o||o(e,n),l===e.id&&!i&&(s(""),null==r||r(void 0))},u=e=>{R(e,t,p)&&(c(Date.now()),null==i||i(e),l===e.id&&(s(""),null==r||r(void 0)))};return z.eventSource.on("CONNECTION_PROFILE_CREATED",e),z.eventSource.on("CONNECTION_PROFILE_UPDATED",n),z.eventSource.on("CONNECTION_PROFILE_DELETED",u),()=>{z.eventSource.removeListener("CONNECTION_PROFILE_CREATED",e),z.eventSource.removeListener("CONNECTION_PROFILE_UPDATED",n),z.eventSource.removeListener("CONNECTION_PROFILE_DELETED",u)}},[f,l,t,p,r,a,o,i]);const h=(0,k.useMemo)(()=>{if(!f)return[];const e=d.filter(e=>R(e,t,p)),n={};for(const[e,r]of Object.entries(t))n[e]={label:r,profiles:[]};for(const t of e){const e=p[t.api];n[e.selected]&&n[e.selected].profiles.push(t)}for(const e of Object.values(n))e.profiles.sort((e,t)=>(e.name??"").localeCompare(t.name??""));return Object.values(n).filter(e=>e.profiles.length>0)},[f,d,t,p]),m=(0,k.useCallback)(e=>{const t=e.target.value;s(t);const n=d.find(e=>e.id===t);null==r||r(n)},[d,r]);return f?(0,b.jsxs)(E,{value:l,onChange:m,children:[(0,b.jsx)("option",{value:"",children:n}),h.map(e=>(0,b.jsx)("optgroup",{label:e.label,children:e.profiles.map(e=>(0,b.jsx)("option",{value:e.id,children:e.name},e.id))},e.label))]}):(0,b.jsx)(E,{disabled:!0,value:"",children:(0,b.jsx)("option",{children:"Connection Manager disabled"})})};
/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach(function(t){$(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(){return V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)}function q(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function G(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var W=G(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Y=G(/Edge/i),X=G(/firefox/i),K=G(/safari/i)&&!G(/chrome/i)&&!G(/android/i),J=G(/iP(ad|od|hone)/i),Q=G(/chrome/i)&&G(/android/i),Z={capture:!1,passive:!1};function ee(e,t,n){e.addEventListener(t,n,!W&&Z)}function te(e,t,n){e.removeEventListener(t,n,!W&&Z)}function ne(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function re(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function ae(e,t,n,r){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&ne(e,t):ne(e,t))||r&&e===n)return e;if(e===n)break}while(e=re(e))}return null}var oe,ie=/\s+/g;function le(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(ie," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(ie," ")}}function se(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=n+("string"==typeof n?"":"px")}}function ue(e,t){var n="";if("string"==typeof e)n=e;else do{var r=se(e,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function ce(e,t,n){if(e){var r=e.getElementsByTagName(t),a=0,o=r.length;if(n)for(;a<o;a++)n(r[a],a);return r}return[]}function fe(){var e=document.scrollingElement;return e||document.documentElement}function de(e,t,n,r,a){if(e.getBoundingClientRect||e===window){var o,i,l,s,u,c,f;if(e!==window&&e.parentNode&&e!==fe()?(i=(o=e.getBoundingClientRect()).top,l=o.left,s=o.bottom,u=o.right,c=o.height,f=o.width):(i=0,l=0,s=window.innerHeight,u=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(t||n)&&e!==window&&(a=a||e.parentNode,!W))do{if(a&&a.getBoundingClientRect&&("none"!==se(a,"transform")||n&&"static"!==se(a,"position"))){var d=a.getBoundingClientRect();i-=d.top+parseInt(se(a,"border-top-width")),l-=d.left+parseInt(se(a,"border-left-width")),s=i+o.height,u=l+o.width;break}}while(a=a.parentNode);if(r&&e!==window){var p=ue(a||e),h=p&&p.a,m=p&&p.d;p&&(s=(i/=m)+(c/=m),u=(l/=h)+(f/=h))}return{top:i,left:l,bottom:s,right:u,width:f,height:c}}}function pe(e,t,n){for(var r=ye(e,!0),a=de(e)[t];r;){var o=de(r)[n];if(!("top"===n||"left"===n?a>=o:a<=o))return r;if(r===fe())break;r=ye(r,!1)}return!1}function he(e,t,n,r){for(var a=0,o=0,i=e.children;o<i.length;){if("none"!==i[o].style.display&&i[o]!==Et.ghost&&(r||i[o]!==Et.dragged)&&ae(i[o],n.draggable,e,!1)){if(a===t)return i[o];a++}o++}return null}function me(e,t){for(var n=e.lastElementChild;n&&(n===Et.ghost||"none"===se(n,"display")||t&&!ne(n,t));)n=n.previousElementSibling;return n||null}function ge(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Et.clone||t&&!ne(e,t)||n++;return n}function ve(e){var t=0,n=0,r=fe();if(e)do{var a=ue(e),o=a.a,i=a.d;t+=e.scrollLeft*o,n+=e.scrollTop*i}while(e!==r&&(e=e.parentNode));return[t,n]}function ye(e,t){if(!e||!e.getBoundingClientRect)return fe();var n=e,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=se(n);if(n.clientWidth<n.scrollWidth&&("auto"==a.overflowX||"scroll"==a.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==a.overflowY||"scroll"==a.overflowY)){if(!n.getBoundingClientRect||n===document.body)return fe();if(r||t)return n;r=!0}}}while(n=n.parentNode);return fe()}function be(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function ke(e,t){return function(){if(!oe){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),oe=setTimeout(function(){oe=void 0},t)}}}function we(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Se(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function Ee(e,t,n){var r={};return Array.from(e.children).forEach(function(a){var o,i,l,s;if(ae(a,t.draggable,e,!1)&&!a.animated&&a!==n){var u=de(a);r.left=Math.min(null!==(o=r.left)&&void 0!==o?o:1/0,u.left),r.top=Math.min(null!==(i=r.top)&&void 0!==i?i:1/0,u.top),r.right=Math.max(null!==(l=r.right)&&void 0!==l?l:-1/0,u.right),r.bottom=Math.max(null!==(s=r.bottom)&&void 0!==s?s:-1/0,u.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var xe="Sortable"+(new Date).getTime();function _e(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach(function(e){if("none"!==se(e,"display")&&e!==Et.ghost){t.push({target:e,rect:de(e)});var n=H({},t[t.length-1].rect);if(e.thisAnimationDuration){var r=ue(e,!0);r&&(n.top-=r.f,n.left-=r.e)}e.fromRect=n}})},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var r=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var a=!1,o=0;t.forEach(function(e){var t=0,n=e.target,i=n.fromRect,l=de(n),s=n.prevFromRect,u=n.prevToRect,c=e.rect,f=ue(n,!0);f&&(l.top-=f.f,l.left-=f.e),n.toRect=l,n.thisAnimationDuration&&be(s,l)&&!be(i,l)&&(c.top-l.top)/(c.left-l.left)===(i.top-l.top)/(i.left-l.left)&&(t=function(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}(c,s,u,r.options)),be(l,i)||(n.prevFromRect=i,n.prevToRect=l,t||(t=r.options.animation),r.animate(n,c,l,t)),t&&(a=!0,o=Math.max(o,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout(function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null},t),n.thisAnimationDuration=t)}),clearTimeout(e),a?e=setTimeout(function(){"function"==typeof n&&n()},o):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,r){if(r){se(e,"transition",""),se(e,"transform","");var a=ue(this.el),o=a&&a.a,i=a&&a.d,l=(t.left-n.left)/(o||1),s=(t.top-n.top)/(i||1);e.animatingX=!!l,e.animatingY=!!s,se(e,"transform","translate3d("+l+"px,"+s+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),se(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),se(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout(function(){se(e,"transition",""),se(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1},r)}}}}var Pe=[],Te={initializeByDefault:!0},Ce={mount:function(e){for(var t in Te)Te.hasOwnProperty(t)&&!(t in e)&&(e[t]=Te[t]);Pe.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Pe.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var a=e+"Global";Pe.forEach(function(r){t[r.pluginName]&&(t[r.pluginName][a]&&t[r.pluginName][a](H({sortable:t},n)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](H({sortable:t},n)))})},initializePlugins:function(e,t,n,r){for(var a in Pe.forEach(function(r){var a=r.pluginName;if(e.options[a]||r.initializeByDefault){var o=new r(e,t,e.options);o.sortable=e,o.options=e.options,e[a]=o,V(n,o.defaults)}}),e.options)if(e.options.hasOwnProperty(a)){var o=this.modifyOption(e,a,e.options[a]);void 0!==o&&(e.options[a]=o)}},getEventProperties:function(e,t){var n={};return Pe.forEach(function(r){"function"==typeof r.eventProperties&&V(n,r.eventProperties.call(t[r.pluginName],e))}),n},modifyOption:function(e,t,n){var r;return Pe.forEach(function(a){e[a.pluginName]&&a.optionListeners&&"function"==typeof a.optionListeners[t]&&(r=a.optionListeners[t].call(e[a.pluginName],n))}),r}};function Ne(e){var t=e.sortable,n=e.rootEl,r=e.name,a=e.targetEl,o=e.cloneEl,i=e.toEl,l=e.fromEl,s=e.oldIndex,u=e.newIndex,c=e.oldDraggableIndex,f=e.newDraggableIndex,d=e.originalEvent,p=e.putSortable,h=e.extraEventProperties;if(t=t||n&&n[xe]){var m,g=t.options,v="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||W||Y?(m=document.createEvent("Event")).initEvent(r,!0,!0):m=new CustomEvent(r,{bubbles:!0,cancelable:!0}),m.to=i||n,m.from=l||n,m.item=a||n,m.clone=o,m.oldIndex=s,m.newIndex=u,m.oldDraggableIndex=c,m.newDraggableIndex=f,m.originalEvent=d,m.pullMode=p?p.lastPutMode:void 0;var y=H(H({},h),Ce.getEventProperties(r,t));for(var b in y)m[b]=y[b];n&&n.dispatchEvent(m),g[v]&&g[v].call(t,m)}}var Oe=["evt"],Ae=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,a=q(n,Oe);Ce.pluginEvent.bind(Et)(e,t,H({dragEl:je,parentEl:Me,ghostEl:De,rootEl:Le,nextEl:Re,lastDownEl:ze,cloneEl:Fe,cloneHidden:Be,dragStarted:Ze,putSortable:Ge,activeSortable:Et.active,originalEvent:r,oldIndex:He,oldDraggableIndex:$e,newIndex:Ue,newDraggableIndex:Ve,hideGhostForTarget:bt,unhideGhostForTarget:kt,cloneNowHidden:function(){Be=!0},cloneNowShown:function(){Be=!1},dispatchSortableEvent:function(e){Ie({sortable:t,name:e,originalEvent:r})}},a))};function Ie(e){Ne(H({putSortable:Ge,cloneEl:Fe,targetEl:je,rootEl:Le,oldIndex:He,oldDraggableIndex:$e,newIndex:Ue,newDraggableIndex:Ve},e))}var je,Me,De,Le,Re,ze,Fe,Be,He,Ue,$e,Ve,qe,Ge,We,Ye,Xe,Ke,Je,Qe,Ze,et,tt,nt,rt,at=!1,ot=!1,it=[],lt=!1,st=!1,ut=[],ct=!1,ft=[],dt="undefined"!=typeof document,pt=J,ht=Y||W?"cssFloat":"float",mt=dt&&!Q&&!J&&"draggable"in document.createElement("div"),gt=function(){if(dt){if(W)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),vt=function(e,t){var n=se(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),a=he(e,0,t),o=he(e,1,t),i=a&&se(a),l=o&&se(o),s=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+de(a).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+de(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&i.float&&"none"!==i.float){var c="left"===i.float?"left":"right";return!o||"both"!==l.clear&&l.clear!==c?"horizontal":"vertical"}return a&&("block"===i.display||"flex"===i.display||"table"===i.display||"grid"===i.display||s>=r&&"none"===n[ht]||o&&"none"===n[ht]&&s+u>r)?"vertical":"horizontal"},yt=function(e){function t(e,n){return function(r,a,o,i){var l=r.options.group.name&&a.options.group.name&&r.options.group.name===a.options.group.name;if(null==e&&(n||l))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(r,a,o,i),n)(r,a,o,i);var s=(n?r:a).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var n={},r=e.group;r&&"object"==U(r)||(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n},bt=function(){!gt&&De&&se(De,"display","none")},kt=function(){!gt&&De&&se(De,"display","")};dt&&!Q&&document.addEventListener("click",function(e){if(ot)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ot=!1,!1},!0);var wt=function(e){if(je){var t=function(e,t){var n;return it.some(function(r){var a=r[xe].options.emptyInsertThreshold;if(a&&!me(r)){var o=de(r),i=e>=o.left-a&&e<=o.right+a,l=t>=o.top-a&&t<=o.bottom+a;return i&&l?n=r:void 0}}),n}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[xe]._onDragOver(n)}}},St=function(e){je&&je.parentNode[xe]._isOutsideThisEl(e.target)};function Et(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=V({},t),e[xe]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return vt(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Et.supportPointer&&"PointerEvent"in window&&(!K||J),emptyInsertThreshold:5};for(var r in Ce.initializePlugins(this,e,n),n)!(r in t)&&(t[r]=n[r]);for(var a in yt(t),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!t.forceFallback&&mt,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?ee(e,"pointerdown",this._onTapStart):(ee(e,"mousedown",this._onTapStart),ee(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(ee(e,"dragover",this),ee(e,"dragenter",this)),it.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),V(this,_e())}function xt(e,t,n,r,a,o,i,l){var s,u,c=e[xe],f=c.options.onMove;return!window.CustomEvent||W||Y?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=r,s.related=a||t,s.relatedRect=o||de(t),s.willInsertAfter=l,s.originalEvent=i,e.dispatchEvent(s),f&&(u=f.call(c,s,i)),u}function _t(e){e.draggable=!1}function Pt(){ct=!1}function Tt(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function Ct(e){return setTimeout(e,0)}function Nt(e){return clearTimeout(e)}Et.prototype={constructor:Et,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(et=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,je):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,a=r.preventOnFilter,o=e.type,i=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(i||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=r.filter;if(function(e){ft.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var r=t[n];r.checked&&ft.push(r)}}(n),!je&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||r.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!K||!l||"SELECT"!==l.tagName.toUpperCase())&&!((l=ae(l,r.draggable,n,!1))&&l.animated||ze===l)){if(He=ge(l),$e=ge(l,r.draggable),"function"==typeof u){if(u.call(this,e,l,this))return Ie({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:n,fromEl:n}),Ae("filter",t,{evt:e}),void(a&&e.preventDefault())}else if(u&&(u=u.split(",").some(function(r){if(r=ae(s,r.trim(),n,!1))return Ie({sortable:t,rootEl:r,name:"filter",targetEl:l,fromEl:n,toEl:n}),Ae("filter",t,{evt:e}),!0})))return void(a&&e.preventDefault());r.handle&&!ae(s,r.handle,n,!1)||this._prepareDragStart(e,i,l)}}},_prepareDragStart:function(e,t,n){var r,a=this,o=a.el,i=a.options,l=o.ownerDocument;if(n&&!je&&n.parentNode===o){var s=de(n);if(Le=o,Me=(je=n).parentNode,Re=je.nextSibling,ze=n,qe=i.group,Et.dragged=je,We={target:je,clientX:(t||e).clientX,clientY:(t||e).clientY},Je=We.clientX-s.left,Qe=We.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,je.style["will-change"]="all",r=function(){Ae("delayEnded",a,{evt:e}),Et.eventCanceled?a._onDrop():(a._disableDelayedDragEvents(),!X&&a.nativeDraggable&&(je.draggable=!0),a._triggerDragStart(e,t),Ie({sortable:a,name:"choose",originalEvent:e}),le(je,i.chosenClass,!0))},i.ignore.split(",").forEach(function(e){ce(je,e.trim(),_t)}),ee(l,"dragover",wt),ee(l,"mousemove",wt),ee(l,"touchmove",wt),i.supportPointer?(ee(l,"pointerup",a._onDrop),!this.nativeDraggable&&ee(l,"pointercancel",a._onDrop)):(ee(l,"mouseup",a._onDrop),ee(l,"touchend",a._onDrop),ee(l,"touchcancel",a._onDrop)),X&&this.nativeDraggable&&(this.options.touchStartThreshold=4,je.draggable=!0),Ae("delayStart",this,{evt:e}),!i.delay||i.delayOnTouchOnly&&!t||this.nativeDraggable&&(Y||W))r();else{if(Et.eventCanceled)return void this._onDrop();i.supportPointer?(ee(l,"pointerup",a._disableDelayedDrag),ee(l,"pointercancel",a._disableDelayedDrag)):(ee(l,"mouseup",a._disableDelayedDrag),ee(l,"touchend",a._disableDelayedDrag),ee(l,"touchcancel",a._disableDelayedDrag)),ee(l,"mousemove",a._delayedDragTouchMoveHandler),ee(l,"touchmove",a._delayedDragTouchMoveHandler),i.supportPointer&&ee(l,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(r,i.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){je&&_t(je),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;te(e,"mouseup",this._disableDelayedDrag),te(e,"touchend",this._disableDelayedDrag),te(e,"touchcancel",this._disableDelayedDrag),te(e,"pointerup",this._disableDelayedDrag),te(e,"pointercancel",this._disableDelayedDrag),te(e,"mousemove",this._delayedDragTouchMoveHandler),te(e,"touchmove",this._delayedDragTouchMoveHandler),te(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?ee(document,"pointermove",this._onTouchMove):ee(document,t?"touchmove":"mousemove",this._onTouchMove):(ee(je,"dragend",this),ee(Le,"dragstart",this._onDragStart));try{document.selection?Ct(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(at=!1,Le&&je){Ae("dragStarted",this,{evt:t}),this.nativeDraggable&&ee(document,"dragover",St);var n=this.options;!e&&le(je,n.dragClass,!1),le(je,n.ghostClass,!0),Et.active=this,e&&this._appendGhost(),Ie({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Ye){this._lastX=Ye.clientX,this._lastY=Ye.clientY,bt();for(var e=document.elementFromPoint(Ye.clientX,Ye.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ye.clientX,Ye.clientY))!==t;)t=e;if(je.parentNode[xe]._isOutsideThisEl(e),t)do{if(t[xe]){if(t[xe]._onDragOver({clientX:Ye.clientX,clientY:Ye.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=re(t));kt()}},_onTouchMove:function(e){if(We){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,a=e.touches?e.touches[0]:e,o=De&&ue(De,!0),i=De&&o&&o.a,l=De&&o&&o.d,s=pt&&rt&&ve(rt),u=(a.clientX-We.clientX+r.x)/(i||1)+(s?s[0]-ut[0]:0)/(i||1),c=(a.clientY-We.clientY+r.y)/(l||1)+(s?s[1]-ut[1]:0)/(l||1);if(!Et.active&&!at){if(n&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(De){o?(o.e+=u-(Xe||0),o.f+=c-(Ke||0)):o={a:1,b:0,c:0,d:1,e:u,f:c};var f="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");se(De,"webkitTransform",f),se(De,"mozTransform",f),se(De,"msTransform",f),se(De,"transform",f),Xe=u,Ke=c,Ye=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!De){var e=this.options.fallbackOnBody?document.body:Le,t=de(je,!0,pt,!0,e),n=this.options;if(pt){for(rt=e;"static"===se(rt,"position")&&"none"===se(rt,"transform")&&rt!==document;)rt=rt.parentNode;rt!==document.body&&rt!==document.documentElement?(rt===document&&(rt=fe()),t.top+=rt.scrollTop,t.left+=rt.scrollLeft):rt=fe(),ut=ve(rt)}le(De=je.cloneNode(!0),n.ghostClass,!1),le(De,n.fallbackClass,!0),le(De,n.dragClass,!0),se(De,"transition",""),se(De,"transform",""),se(De,"box-sizing","border-box"),se(De,"margin",0),se(De,"top",t.top),se(De,"left",t.left),se(De,"width",t.width),se(De,"height",t.height),se(De,"opacity","0.8"),se(De,"position",pt?"absolute":"fixed"),se(De,"zIndex","100000"),se(De,"pointerEvents","none"),Et.ghost=De,e.appendChild(De),se(De,"transform-origin",Je/parseInt(De.style.width)*100+"% "+Qe/parseInt(De.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,a=n.options;Ae("dragStart",this,{evt:e}),Et.eventCanceled?this._onDrop():(Ae("setupClone",this),Et.eventCanceled||((Fe=Se(je)).removeAttribute("id"),Fe.draggable=!1,Fe.style["will-change"]="",this._hideClone(),le(Fe,this.options.chosenClass,!1),Et.clone=Fe),n.cloneId=Ct(function(){Ae("clone",n),Et.eventCanceled||(n.options.removeCloneOnHide||Le.insertBefore(Fe,je),n._hideClone(),Ie({sortable:n,name:"clone"}))}),!t&&le(je,a.dragClass,!0),t?(ot=!0,n._loopId=setInterval(n._emulateDragOver,50)):(te(document,"mouseup",n._onDrop),te(document,"touchend",n._onDrop),te(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",a.setData&&a.setData.call(n,r,je)),ee(document,"drop",n),se(je,"transform","translateZ(0)")),at=!0,n._dragStartId=Ct(n._dragStarted.bind(n,t,e)),ee(document,"selectstart",n),Ze=!0,window.getSelection().removeAllRanges(),K&&se(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,r,a,o=this.el,i=e.target,l=this.options,s=l.group,u=Et.active,c=qe===s,f=l.sort,d=Ge||u,p=this,h=!1;if(!ct){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),i=ae(i,l.draggable,o,!0),N("dragOver"),Et.eventCanceled)return h;if(je.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||p._ignoreWhileAnimating===i)return A(!1);if(ot=!1,u&&!l.disabled&&(c?f||(r=Me!==Le):Ge===this||(this.lastPutMode=qe.checkPull(this,u,je,e))&&s.checkPut(this,u,je,e))){if(a="vertical"===this._getDirection(e,i),t=de(je),N("dragOverValid"),Et.eventCanceled)return h;if(r)return Me=Le,O(),this._hideClone(),N("revert"),Et.eventCanceled||(Re?Le.insertBefore(je,Re):Le.appendChild(je)),A(!0);var m=me(o,l.draggable);if(!m||function(e,t,n){var r=de(me(n.el,n.options.draggable)),a=Ee(n.el,n.options,De),o=10;return t?e.clientX>a.right+o||e.clientY>r.bottom&&e.clientX>r.left:e.clientY>a.bottom+o||e.clientX>r.right&&e.clientY>r.top}(e,a,this)&&!m.animated){if(m===je)return A(!1);if(m&&o===e.target&&(i=m),i&&(n=de(i)),!1!==xt(Le,o,je,t,i,n,e,!!i))return O(),m&&m.nextSibling?o.insertBefore(je,m.nextSibling):o.appendChild(je),Me=o,I(),A(!0)}else if(m&&function(e,t,n){var r=de(he(n.el,0,n.options,!0)),a=Ee(n.el,n.options,De),o=10;return t?e.clientX<a.left-o||e.clientY<r.top&&e.clientX<r.right:e.clientY<a.top-o||e.clientY<r.bottom&&e.clientX<r.left}(e,a,this)){var g=he(o,0,l,!0);if(g===je)return A(!1);if(n=de(i=g),!1!==xt(Le,o,je,t,i,n,e,!1))return O(),o.insertBefore(je,g),Me=o,I(),A(!0)}else if(i.parentNode===o){n=de(i);var v,y,b,k=je.parentNode!==o,w=!function(e,t,n){var r=n?e.left:e.top,a=n?e.right:e.bottom,o=n?e.width:e.height,i=n?t.left:t.top,l=n?t.right:t.bottom,s=n?t.width:t.height;return r===i||a===l||r+o/2===i+s/2}(je.animated&&je.toRect||t,i.animated&&i.toRect||n,a),S=a?"top":"left",E=pe(i,"top","top")||pe(je,"top","top"),x=E?E.scrollTop:void 0;if(et!==i&&(y=n[S],lt=!1,st=!w&&l.invertSwap||k),v=function(e,t,n,r,a,o,i,l){var s=r?e.clientY:e.clientX,u=r?n.height:n.width,c=r?n.top:n.left,f=r?n.bottom:n.right,d=!1;if(!i)if(l&&nt<u*a){if(!lt&&(1===tt?s>c+u*o/2:s<f-u*o/2)&&(lt=!0),lt)d=!0;else if(1===tt?s<c+nt:s>f-nt)return-tt}else if(s>c+u*(1-a)/2&&s<f-u*(1-a)/2)return function(e){return ge(je)<ge(e)?1:-1}(t);if((d=d||i)&&(s<c+u*o/2||s>f-u*o/2))return s>c+u/2?1:-1;return 0}(e,i,n,a,w?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,st,et===i),0!==v){var _=ge(je);do{_-=v,b=Me.children[_]}while(b&&("none"===se(b,"display")||b===De))}if(0===v||b===i)return A(!1);et=i,tt=v;var P=i.nextElementSibling,T=!1,C=xt(Le,o,je,t,i,n,e,T=1===v);if(!1!==C)return 1!==C&&-1!==C||(T=1===C),ct=!0,setTimeout(Pt,30),O(),T&&!P?o.appendChild(je):i.parentNode.insertBefore(je,T?P:i),E&&we(E,0,x-E.scrollTop),Me=je.parentNode,void 0===y||st||(nt=Math.abs(y-de(i)[S])),I(),A(!0)}if(o.contains(je))return A(!1)}return!1}function N(l,s){Ae(l,p,H({evt:e,isOwner:c,axis:a?"vertical":"horizontal",revert:r,dragRect:t,targetRect:n,canSort:f,fromSortable:d,target:i,completed:A,onMove:function(n,r){return xt(Le,o,je,t,n,de(n),e,r)},changed:I},s))}function O(){N("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function A(t){return N("dragOverCompleted",{insertion:t}),t&&(c?u._hideClone():u._showClone(p),p!==d&&(le(je,Ge?Ge.options.ghostClass:u.options.ghostClass,!1),le(je,l.ghostClass,!0)),Ge!==p&&p!==Et.active?Ge=p:p===Et.active&&Ge&&(Ge=null),d===p&&(p._ignoreWhileAnimating=i),p.animateAll(function(){N("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(i===je&&!je.animated||i===o&&!i.animated)&&(et=null),l.dragoverBubble||e.rootEl||i===document||(je.parentNode[xe]._isOutsideThisEl(e.target),!t&&wt(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function I(){Ue=ge(je),Ve=ge(je,l.draggable),Ie({sortable:p,name:"change",toEl:o,newIndex:Ue,newDraggableIndex:Ve,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){te(document,"mousemove",this._onTouchMove),te(document,"touchmove",this._onTouchMove),te(document,"pointermove",this._onTouchMove),te(document,"dragover",wt),te(document,"mousemove",wt),te(document,"touchmove",wt)},_offUpEvents:function(){var e=this.el.ownerDocument;te(e,"mouseup",this._onDrop),te(e,"touchend",this._onDrop),te(e,"pointerup",this._onDrop),te(e,"pointercancel",this._onDrop),te(e,"touchcancel",this._onDrop),te(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;Ue=ge(je),Ve=ge(je,n.draggable),Ae("drop",this,{evt:e}),Me=je&&je.parentNode,Ue=ge(je),Ve=ge(je,n.draggable),Et.eventCanceled||(at=!1,st=!1,lt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Nt(this.cloneId),Nt(this._dragStartId),this.nativeDraggable&&(te(document,"drop",this),te(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),K&&se(document.body,"user-select",""),se(je,"transform",""),e&&(Ze&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),De&&De.parentNode&&De.parentNode.removeChild(De),(Le===Me||Ge&&"clone"!==Ge.lastPutMode)&&Fe&&Fe.parentNode&&Fe.parentNode.removeChild(Fe),je&&(this.nativeDraggable&&te(je,"dragend",this),_t(je),je.style["will-change"]="",Ze&&!at&&le(je,Ge?Ge.options.ghostClass:this.options.ghostClass,!1),le(je,this.options.chosenClass,!1),Ie({sortable:this,name:"unchoose",toEl:Me,newIndex:null,newDraggableIndex:null,originalEvent:e}),Le!==Me?(Ue>=0&&(Ie({rootEl:Me,name:"add",toEl:Me,fromEl:Le,originalEvent:e}),Ie({sortable:this,name:"remove",toEl:Me,originalEvent:e}),Ie({rootEl:Me,name:"sort",toEl:Me,fromEl:Le,originalEvent:e}),Ie({sortable:this,name:"sort",toEl:Me,originalEvent:e})),Ge&&Ge.save()):Ue!==He&&Ue>=0&&(Ie({sortable:this,name:"update",toEl:Me,originalEvent:e}),Ie({sortable:this,name:"sort",toEl:Me,originalEvent:e})),Et.active&&(null!=Ue&&-1!==Ue||(Ue=He,Ve=$e),Ie({sortable:this,name:"end",toEl:Me,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){Ae("nulling",this),Le=je=Me=De=Re=Fe=ze=Be=We=Ye=Ze=Ue=Ve=He=$e=et=tt=Ge=qe=Et.dragged=Et.ghost=Et.clone=Et.active=null,ft.forEach(function(e){e.checked=!0}),ft.length=Xe=Ke=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":je&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,a=n.length,o=this.options;r<a;r++)ae(e=n[r],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||Tt(e));return t},sort:function(e,t){var n={},r=this.el;this.toArray().forEach(function(e,t){var a=r.children[t];ae(a,this.options.draggable,r,!1)&&(n[e]=a)},this),t&&this.captureAnimationState(),e.forEach(function(e){n[e]&&(r.removeChild(n[e]),r.appendChild(n[e]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return ae(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var r=Ce.modifyOption(this,e,t);n[e]=void 0!==r?r:t,"group"===e&&yt(n)},destroy:function(){Ae("destroy",this);var e=this.el;e[xe]=null,te(e,"mousedown",this._onTapStart),te(e,"touchstart",this._onTapStart),te(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(te(e,"dragover",this),te(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),it.splice(it.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Be){if(Ae("hideClone",this),Et.eventCanceled)return;se(Fe,"display","none"),this.options.removeCloneOnHide&&Fe.parentNode&&Fe.parentNode.removeChild(Fe),Be=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(Be){if(Ae("showClone",this),Et.eventCanceled)return;je.parentNode!=Le||this.options.group.revertClone?Re?Le.insertBefore(Fe,Re):Le.appendChild(Fe):Le.insertBefore(Fe,je),this.options.group.revertClone&&this.animate(je,Fe),se(Fe,"display",""),Be=!1}}else this._hideClone()}},dt&&ee(document,"touchmove",function(e){(Et.active||at)&&e.cancelable&&e.preventDefault()}),Et.utils={on:ee,off:te,css:se,find:ce,is:function(e,t){return!!ae(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:ke,closest:ae,toggleClass:le,clone:Se,index:ge,nextTick:Ct,cancelNextTick:Nt,detectDirection:vt,getChild:he,expando:xe},Et.get=function(e){return e[xe]},Et.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Et.utils=H(H({},Et.utils),e.utils)),Ce.mount(e)})},Et.create=function(e,t){return new Et(e,t)},Et.version="1.15.6";var Ot,At,It,jt,Mt,Dt,Lt=[],Rt=!1;function zt(){Lt.forEach(function(e){clearInterval(e.pid)}),Lt=[]}function Ft(){clearInterval(Dt)}var Bt=ke(function(e,t,n,r){if(t.scroll){var a,o=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,u=fe(),c=!1;At!==n&&(At=n,zt(),Ot=t.scroll,a=t.scrollFn,!0===Ot&&(Ot=ye(n,!0)));var f=0,d=Ot;do{var p=d,h=de(p),m=h.top,g=h.bottom,v=h.left,y=h.right,b=h.width,k=h.height,w=void 0,S=void 0,E=p.scrollWidth,x=p.scrollHeight,_=se(p),P=p.scrollLeft,T=p.scrollTop;p===u?(w=b<E&&("auto"===_.overflowX||"scroll"===_.overflowX||"visible"===_.overflowX),S=k<x&&("auto"===_.overflowY||"scroll"===_.overflowY||"visible"===_.overflowY)):(w=b<E&&("auto"===_.overflowX||"scroll"===_.overflowX),S=k<x&&("auto"===_.overflowY||"scroll"===_.overflowY));var C=w&&(Math.abs(y-o)<=l&&P+b<E)-(Math.abs(v-o)<=l&&!!P),N=S&&(Math.abs(g-i)<=l&&T+k<x)-(Math.abs(m-i)<=l&&!!T);if(!Lt[f])for(var O=0;O<=f;O++)Lt[O]||(Lt[O]={});Lt[f].vx==C&&Lt[f].vy==N&&Lt[f].el===p||(Lt[f].el=p,Lt[f].vx=C,Lt[f].vy=N,clearInterval(Lt[f].pid),0==C&&0==N||(c=!0,Lt[f].pid=setInterval(function(){r&&0===this.layer&&Et.active._onTouchMove(Mt);var t=Lt[this.layer].vy?Lt[this.layer].vy*s:0,n=Lt[this.layer].vx?Lt[this.layer].vx*s:0;"function"==typeof a&&"continue"!==a.call(Et.dragged.parentNode[xe],n,t,e,Mt,Lt[this.layer].el)||we(Lt[this.layer].el,n,t)}.bind({layer:f}),24))),f++}while(t.bubbleScroll&&d!==u&&(d=ye(d,!1)));Rt=c}},30),Ht=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,a=e.activeSortable,o=e.dispatchSortableEvent,i=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=n||a;i();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(u.clientX,u.clientY);l(),s&&!s.el.contains(c)&&(o("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function Ut(){}function $t(){}Ut.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=he(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:Ht},V(Ut,{pluginName:"revertOnSpill"}),$t.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:Ht},V($t,{pluginName:"removeOnSpill"});Et.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?ee(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ee(document,"pointermove",this._handleFallbackAutoScroll):t.touches?ee(document,"touchmove",this._handleFallbackAutoScroll):ee(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?te(document,"dragover",this._handleAutoScroll):(te(document,"pointermove",this._handleFallbackAutoScroll),te(document,"touchmove",this._handleFallbackAutoScroll),te(document,"mousemove",this._handleFallbackAutoScroll)),Ft(),zt(),clearTimeout(oe),oe=void 0},nulling:function(){Mt=At=Ot=Rt=Dt=It=jt=null,Lt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,r=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(r,a);if(Mt=e,t||this.options.forceAutoScrollFallback||Y||W||K){Bt(e,this.options,o,t);var i=ye(o,!0);!Rt||Dt&&r===It&&a===jt||(Dt&&Ft(),Dt=setInterval(function(){var o=ye(document.elementFromPoint(r,a),!0);o!==i&&(i=o,zt()),Bt(e,n.options,o,t)},10),It=r,jt=a)}else{if(!this.options.bubbleScroll||ye(o,!0)===fe())return void zt();Bt(e,this.options,ye(o,!1),!1)}}},V(e,{pluginName:"scroll",initializeByDefault:!0})}),Et.mount($t,Ut);k.memo(({item:e,showToggleButton:t,showDeleteButton:n,showSelectInput:r,onToggle:a,onDelete:o,onSelectChange:i})=>{const{id:l,label:s,enabled:u,canDelete:c=!0,canToggle:f=!0,showSelect:d=!0,canSelect:p=!0,selectOptions:h=[],selectValue:m}=e,g={display:"flex",alignItems:"center",padding:"8px 12px",border:"1px solid var(--SmartThemeBorderColor, #ccc)",color:"var(--SmartThemeBodyColor, #333)",marginBottom:"2px",opacity:t&&!u?.6:1},v={cursor:"pointer",flexShrink:0},y={display:"inline-block",flexShrink:0,marginRight:"10px"};return(0,b.jsxs)("li",{className:"sortable-list-item",style:g,"data-id":l,children:[(0,b.jsx)("span",{className:"drag-handle fas fa-bars",style:{cursor:"grab",marginRight:"10px",color:"var(--SmartThemeBodyColor, #555)",flexShrink:0}}),(0,b.jsx)("span",{className:"item-label",style:{flexGrow:1,marginRight:"10px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s}),r&&d&&p&&(0,b.jsx)(E,{value:m,onChange:e=>i(l,e.target.value),disabled:!u,style:{marginRight:"10px",flexShrink:0,width:"unset"},children:0===h.length?(0,b.jsx)("option",{disabled:!0,children:"--"}):h.map(e=>(0,b.jsx)("option",{value:e.value,children:e.label},e.value))}),r&&(!d||!p)&&(0,b.jsx)("span",{style:y}),t&&f&&(0,b.jsx)(S,{overrideDefaults:!0,className:"toggle-button fas "+(u?"fa-toggle-on":"fa-toggle-off"),style:{...v,marginRight:"10px",fontSize:"1.2em",color:u?"var(--success-color, #4CAF50)":"var(--SmartThemeBodyColor, #555)",backgroundColor:"transparent",border:"none"},onClick:()=>a(l)}),t&&!f&&(0,b.jsx)("span",{style:y}),n&&c&&(0,b.jsx)(S,{overrideDefaults:!0,className:"delete-button fas fa-trash-can",style:{...v,color:"var(--error-color, #f44336)",backgroundColor:"transparent",border:"none"},onClick:()=>o(l)}),n&&!c&&(0,b.jsx)("span",{style:{...y,marginRight:0}})]})}),k.memo(({item:e,isSelected:t,onClick:n})=>{const[r,a]=(0,k.useState)(!1);return(0,b.jsxs)("li",{onClick:()=>n(e.value),onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),style:{padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:t?"var(--accent-color-bg, var(--link-color))":r?"var(--hover-color, var(--white20a))":"transparent"},children:[(0,b.jsx)("span",{children:e.label}),t&&(0,b.jsx)("i",{className:"checkmark fa-solid fa-check",style:{marginLeft:"8px"}})]})});async function Vt(e,t,{escapeHtml:n=!0}={}){await async function(e,...t){await SillyTavern.getContext().SlashCommandParser.commands[e].callback(...t)}("echo",{severity:e,escapeHtml:(!!n).toString()},t)}function qt(e){return(0,C.getMaxContextSize)(e)}function Gt(e,t){return(0,C.parseMesExamples)(e,t)}function Wt(e,t,n){return(0,C.baseChatReplace)(e,t,n)}function Yt(e){return(0,I.getPromptRole)(e)}function Xt(e,{wiFormat:t}={}){return(0,I.formatWorldInfo)(e,{wiFormat:t})}function Kt(e){return(0,I.getPromptPosition)(e)}const Jt=SillyTavern.getContext(),Qt=({value:e,items:t,readOnlyValues:n=[],label:r,onChange:a,onItemsChange:o,enableCreate:i=!1,enableRename:l=!1,enableDelete:s=!1,onCreate:u,onRename:c,onDelete:f,buttons:d})=>{const p=(0,k.useMemo)(()=>t.find(t=>t.value===e),[t,e]),h=(0,k.useCallback)(e=>!!e&&n.includes(e),[n]);return(0,b.jsxs)("div",{className:"preset-select-container",style:{display:"flex",alignItems:"center"},children:[(0,b.jsx)(E,{value:e??"",onChange:t=>a(t.target.value,e),children:t.map(e=>(0,b.jsx)("option",{value:e.value,children:e.label},e.value))}),i&&(0,b.jsx)(S,{className:"fa-solid fa-file-circle-plus",title:`Create a new ${r}`,onClick:async()=>{const n=await Jt.Popup.show.input(`Create a new ${r}`,`Please enter a name for the new ${r}:`,"");if(!n||""===n.trim())return;const i=n.trim();if(t.some(e=>e.value===i))return void await Vt("warning",`A ${r} with this name already exists.`);let l={value:i,label:i};if(u){const e=await Promise.resolve(u(i));if(!e.confirmed)return;e.value&&(l="string"==typeof e.value?{value:e.value,label:e.value}:e.value)}o([...t,l]),a(l.value,e)},"data-i18n":`[title]Create a new ${r}`}),l&&(0,b.jsx)(S,{className:"fa-solid fa-pencil",title:`Rename selected ${r}`,onClick:async()=>{if(!p)return void await Vt("warning",`Please select a ${r} to rename.`);if(h(p.value))return void await Vt("warning",`This ${r} cannot be renamed as it is read-only.`);const n=await Jt.Popup.show.input(`Rename ${r}`,`Please enter a new name for "${p.label}":`,p.label);if(!n||""===n.trim()||n.trim()===p.value)return;const i=n.trim();if(t.some(e=>e.value===i))return void await Vt("warning",`A ${r} with this name already exists.`);let l={value:i,label:i};if(c){const e=await Promise.resolve(c(p.value,i));if(!e.confirmed)return;e.value&&(l="string"==typeof e.value?{value:e.value,label:e.value}:e.value)}const s=t.map(e=>e.value===p.value?l:e);o(s),a(l.value,e)},disabled:!p,"data-i18n":`[title]Rename selected ${r}`}),s&&(0,b.jsx)(S,{className:"fa-solid fa-trash-can",title:`Delete selected ${r}`,onClick:async()=>{var n;if(!p)return void await Vt("warning",`Please select a ${r} to delete.`);if(h(p.value))return void await Vt("warning",`This ${r} cannot be deleted as it is read-only.`);if(!await Jt.Popup.show.confirm(`Delete ${r}`,`Are you sure you want to delete "${p.label}"?`)||f&&!await Promise.resolve(f(p.value)))return;const i=t.findIndex(e=>e.value===p.value),l=t.filter(e=>e.value!==p.value);let s;if(o(l),l.length>0){s=null==(n=l[Math.min(i,l.length-1)])?void 0:n.value}a(s,e)},disabled:!p,"data-i18n":`[title]Delete selected ${r}`}),null==d?void 0:d.map(e=>(0,b.jsx)(S,{className:e.icon,title:e.title,onClick:e.onClick,disabled:e.disabled,"data-i18n":e.i18n?`[title]${e.i18n}`:void 0},e.key))]})};Object.defineProperty;Error;var Zt=Object.defineProperty,en=(e,t,n)=>((e,t,n)=>t in e?Zt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);var tn=Object.defineProperty,nn=(e,t,n)=>((e,t,n)=>t in e?tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class rn{encode(e){const t=Math.ceil(e.length/4);return new Array(t).fill(" ")}decode(e){return e.join("")}}var an=Object.defineProperty,on=(e,t,n)=>((e,t,n)=>t in e?an(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class ln{constructor(e){on(this,"messages",[]),on(this,"tokenizer"),on(this,"maxContext"),on(this,"currentTokenCount",0),this.tokenizer=new rn,this.maxContext=e}getTokenCount(e){var t,n;return e.content?(null==(n=null==(t=e.source)?void 0:t.extra)?void 0:n.token_count)??this.tokenizer.encode(e.content).length:0}canFit(e){return this.currentTokenCount+this.getTokenCount(e)<=this.maxContext}add(e){if(!e.content)return!0;const t=this.getTokenCount(e);return!(this.currentTokenCount+t>this.maxContext)&&(this.messages.push(e),this.currentTokenCount+=t,!0)}addFront(e){if(!e.content)return!0;const t=this.getTokenCount(e);return!(this.currentTokenCount+t>this.maxContext)&&(this.messages.unshift(e),this.currentTokenCount+=t,!0)}addMany(e){const t=e.filter(e=>e.content),n=t.map(e=>this.getTokenCount(e)),r=n.reduce((e,t)=>e+t,0);if(this.currentTokenCount+r<=this.maxContext)return this.messages.push(...t),this.currentTokenCount+=r,!0;let a=0;const o=[];for(let e=t.length-1;e>=0;e--){const r=t[e],i=n[e];if(!(this.currentTokenCount+a+i<=this.maxContext))break;o.unshift(r),a+=i}return o.length>0&&(this.messages.push(...o),this.currentTokenCount+=a),o.length===t.length}insert(e,t){if(!t.content)return!0;const n=this.getTokenCount(t);return!(this.currentTokenCount+n>this.maxContext)&&(this.messages.splice(e,0,t),this.currentTokenCount+=n,!0)}getMessages(){return this.messages}}async function sn(e,{targetCharacterId:t,presetName:n,instructName:r,contextName:a,syspromptName:o,maxContext:i,includeNames:l,ignoreCharacterFields:s,ignoreAuthorNote:u,ignoreWorldInfo:c,messageIndexesBetween:f}={}){var d,p,h,m,g,v,y,b,k,w,S,E,x,_;if(!["textgenerationwebui","openai"].includes(e))throw new Error("Unsupported API");const P=SillyTavern.getContext();let{description:L,personality:R,persona:z,scenario:F,mesExamples:B,system:H,jailbreak:U}=s?{description:"",personality:"",persona:"",scenario:"",mesExamples:"",system:"",jailbreak:""}:P.getCharacterCardFields({chid:t});const $="textgenerationwebui"===e?null==(d=P.getPresetManager("instruct"))?void 0:d.getCompletionPresetByName(r):void 0,V=!(null==$||!$.enabled);let q=Gt(B,V);let G=[];const W=function(){var t,r;if("number"==typeof i)return i;if(!i)return qt();if("active"===i||!n)return qt();if("number"==typeof i)return i;let a;if("textgenerationwebui"===e){const e=null==(t=P.getPresetManager("textgenerationwebui"))?void 0:t.getCompletionPresetByName(n);a=null==e?void 0:e.max_length}else{const e=null==(r=P.getPresetManager("openai"))?void 0:r.getCompletionPresetByName(n);a=null==e?void 0:e.openai_max_context}return"number"==typeof a?a:qt()}();if(W<=0)return{result:[],warnings:G};const Y=new ln(W),X=P.ToolManager.isToolCallingSupported(),K=(null==f?void 0:f.start)??0,J=null!=f&&f.end?f.end+1:void 0;let Q=-1===K&&0===J?[]:P.chat.slice(K,J).filter(e=>{var t;return!e.is_system||X&&Array.isArray(null==(t=e.extra)?void 0:t.tool_invocations)});Q=await Promise.all(Q.map(async(e,t)=>{var n,r;let a=function(e,t,{characterOverride:n,isMarkdown:r,isPrompt:a,isEdit:o,depth:i}){return(0,D.getRegexedString)(e,t,{characterOverride:n,isMarkdown:r,isPrompt:a,isEdit:o,depth:i})}(e.mes,e.is_user?D.regex_placement.USER_INPUT:D.regex_placement.AI_OUTPUT,{isPrompt:!0,depth:Q.length-t-1});return a=await async function(e,t){return await(0,A.appendFileContent)(e,t)}(e,a),null!=(n=null==e?void 0:e.extra)&&n.append_title&&null!=(r=null==e?void 0:e.extra)&&r.title&&(a=`${a}\n\n${e.extra.title}`),{...e,mes:a,index:t}}));const Z=Q.map(e=>N.world_info_include_names?`${e.name}: ${e.mes}`:e.mes).reverse(),{worldInfoString:ee,worldInfoBefore:te,worldInfoAfter:ne,worldInfoExamples:re,worldInfoDepth:ae,anBefore:oe,anAfter:ie}=c?{worldInfoString:"",worldInfoBefore:"",worldInfoAfter:"",worldInfoExamples:[],worldInfoDepth:[],anBefore:[],anAfter:[]}:await P.getWorldInfoPrompt(Z,W,!1);for(const ce of re){const fe=ce.content;if(0===fe.length)continue;const de=Gt(Wt(fe,C.name1,C.name2),V);ce.position===N.wi_anchor_position.before?q.unshift(...de):q.push(...de)}function le(){const e=[];for(let t=Q.length-1;t>=0;t--){const n=Q[t],r="System"!==n.name||n.is_user?n.is_user?"user":"assistant":"system";e.unshift({role:r,content:l&&"system"!=r?`${n.name}: ${n.mes}`:n.mes,source:n})}Y.addMany(e)}if("textgenerationwebui"===e){const pe=[...q];q&&(q=function(e,t,n){return(0,O.formatInstructModeExamples)(e,t,n)}(q,C.name1,C.name2));const he=null==(p=P.getPresetManager("sysprompt"))?void 0:p.getCompletionPresetByName(o);he&&(H=P.powerUserSettings.prefer_character_prompt&&H?H:Wt(he.content,C.name1,C.name2),H=V?function(e,t){return(0,O.formatInstructModeSystemPrompt)(e,t)}(P.substituteParams(H,C.name1,C.name2,he.content),$):H);const me={description:L,personality:R,persona:P.powerUserSettings.persona_description_position==T.persona_description_positions.IN_PROMPT?z:"",scenario:F,system:H,char:C.name2,user:C.name1,wiBefore:te,wiAfter:ne,loreBefore:te,loreAfter:ne,mesExamples:q.join(""),mesExamplesRaw:pe.join("")},ge=null==(h=P.getPresetManager("context"))?void 0:h.getCompletionPresetByName(a);let ve=function(e,{customStoryString:t,customInstructSettings:n}={}){return(0,T.renderStoryString)(e,{customStoryString:t,customInstructSettings:n})}(me,{customInstructSettings:$,customStoryString:null==ge?void 0:ge.story_string});ve&&Y.add({role:"system",content:ve,ignoreInstruct:!0}),le()}else{let ye=function(e){const t=Ce.find(t=>t.identifier===e);if(t)return t;const n=Se.prompts.find(t=>t.identifier===e);return n||void 0},be=function(e){return(0,I.setOpenAIMessages)(e)}(Q),ke=function(e){return(0,I.setOpenAIMessageExamples)(e)}(q);async function we(){let[e,t]=await function({name2:e,charDescription:t,charPersonality:n,Scenario:r,worldInfoBefore:a,worldInfoAfter:o,bias:i,type:l,quietPrompt:s,quietImage:u,extensionPrompts:c,cyclePrompt:f,systemPromptOverride:d,jailbreakPromptOverride:p,personaDescription:h,messages:m,messageExamples:g},v){return(0,I.prepareOpenAIMessages)({name2:e,charDescription:t,charPersonality:n,Scenario:r,worldInfoBefore:a,worldInfoAfter:o,bias:i,type:l,quietPrompt:s,quietImage:u,cyclePrompt:f,systemPromptOverride:d,jailbreakPromptOverride:p,personaDescription:h,extensionPrompts:c,messages:m,messageExamples:g},v)}({name2:C.name2,charDescription:L,charPersonality:R,Scenario:F,worldInfoBefore:te,worldInfoAfter:ne,extensionPrompts:P.extensionPrompts,bias:"",type:"normal",quietPrompt:void 0,quietImage:void 0,cyclePrompt:"",systemPromptOverride:H,jailbreakPromptOverride:U,personaDescription:z,messages:be,messageExamples:ke},!1);Y.addMany(e)}if(!n)return G.push("No preset name provided. Using default preset."),await we(),{result:Y.getMessages(),warnings:G};const Se=null==(m=P.getPresetManager("openai"))?void 0:m.getCompletionPresetByName(n);if(!Se)return console.warn(`Preset not found: ${n}. Using current preset.`),G.push(`Preset not found: ${n}. Using current preset.`),we(),{result:Y.getMessages(),warnings:G};let Ee=null==(g=Se.prompt_order)?void 0:g.find(e=>e.character_id===C.this_chid);if(!Ee&&Se.prompt_order&&Se.prompt_order.length>0&&(Ee=Se.prompt_order[Se.prompt_order.length-1]),!Ee)return console.warn(`No prompt order found for preset: ${n}. Using current preset.`),G.push(`No prompt order found for preset: ${n}. Using current preset.`),we(),{result:Y.getMessages(),warnings:G};const xe=F&&Se.scenario_format?P.substituteParams(Se.scenario_format):"",_e=R&&Se.personality_format?P.substituteParams(Se.personality_format):"",Pe=P.substituteParams(Se.group_nudge_prompt),Te=Se.impersonation_prompt?P.substituteParams(Se.impersonation_prompt):"",Ce=[];c||Ce.push({role:"system",content:Xt(te,{wiFormat:Se.wi_format}),identifier:"worldInfoBefore"},{role:"system",content:Xt(ne,{wiFormat:Se.wi_format}),identifier:"worldInfoAfter"}),s||Ce.push({role:"system",content:L,identifier:"charDescription"},{role:"system",content:_e,identifier:"charPersonality"},{role:"system",content:xe,identifier:"scenario"}),Ce.push({role:"system",content:Te,identifier:"impersonate"},{role:"system",content:Pe,identifier:"groupNudge"});const Ne=P.extensionPrompts["1_memory"];Ne&&Ne.value&&Ce.push({role:Yt(Ne.role),content:Ne.value,identifier:"summary",position:Kt(Ne.position)});const Oe=P.extensionPrompts["2_floating_prompt"];!u&&Oe&&Oe.value&&Ce.push({role:Yt(Oe.role),content:Oe.value,identifier:"authorsNote",position:Kt(Oe.position)});const Ae=P.extensionPrompts["3_vectors"];Ae&&Ae.value&&Ce.push({role:"system",content:Ae.value,identifier:"vectorsMemory",position:Kt(Ae.position)});const Ie=P.extensionPrompts["4_vectors_data_bank"];Ie&&Ie.value&&Ce.push({role:Yt(Ie.role),content:Ie.value,identifier:"vectorsDataBank",position:Kt(Ie.position)});const je=P.extensionPrompts.chromadb;je&&je.value&&Ce.push({role:"system",content:je.value,identifier:"smartContext",position:Kt(je.position)}),!s&&P.powerUserSettings.persona_description&&P.powerUserSettings.persona_description_position===T.persona_description_positions.IN_PROMPT&&Ce.push({role:"system",content:P.powerUserSettings.persona_description,identifier:"personaDescription"}),Ee.order.forEach(e=>{if(!e.enabled)return;const t=ye(e.identifier);t&&t.content?Y.add({role:t.role??"system",content:P.substituteParams(t.content)}):"chatHistory"===e.identifier&&le()})}const se=["1_memory","2_floating_prompt","3_vectors","4_vectors_data_bank","chromadb","PERSONA_DESCRIPTION","QUIET_PROMPT","DEPTH_PROMPT"];for(const Me in P.extensionPrompts)if(Object.hasOwn(P.extensionPrompts,Me)){const De=P.extensionPrompts[Me];if(se.includes(Me)||!P.extensionPrompts[Me].value||![C.extension_prompt_types.BEFORE_PROMPT,C.extension_prompt_types.IN_PROMPT].includes(De.position)||"function"==typeof De.filter&&!await De.filter())continue;const Le={role:Yt(De.role)??"system",content:De.value};if(De.position===C.extension_prompt_types.BEFORE_PROMPT)Y.insert(De.depth,Le);else if(De.position===C.extension_prompt_types.IN_PROMPT){const Re=Y.getMessages();Y.insert(Re.length-De.depth,Le)}}for(const ze of ae){const Fe=Y.getMessages();Y.insert(Fe.length-ze.depth,{role:Yt(ze.role),content:ze.entries.join("\n")})}if(!s){const Be=function(e,t){return(0,M.getGroupDepthPrompts)(e,t)}(M.selected_group,Number(C.this_chid));if(M.selected_group&&Array.isArray(Be)&&Be.length>0)Be.filter(e=>e.text).forEach((e,t)=>{const n=Y.getMessages();Y.insert(n.length-e.depth,{role:e.role,content:e.text})});else{const He=Wt(null==(w=null==(k=null==(b=null==(y=null==(v=P.characters[C.this_chid])?void 0:v.data)?void 0:y.extensions)?void 0:b.depth_prompt)?void 0:k.prompt)?void 0:w.trim(),C.name1,C.name2)||"";if(He){const Ue=C.depth_prompt_depth_default,$e=(null==(_=null==(x=null==(E=null==(S=P.characters[C.this_chid])?void 0:S.data)?void 0:E.extensions)?void 0:x.depth_prompt)?void 0:_.role)??C.depth_prompt_role_default,Ve=Y.getMessages();Y.insert(Ve.length-Ue,{role:Yt($e),content:He})}}}let ue=-1;if(!u){const qe={prompt:C.chat_metadata[j.metadata_keys.prompt],interval:C.chat_metadata[j.metadata_keys.interval],position:C.chat_metadata[j.metadata_keys.position],depth:C.chat_metadata[j.metadata_keys.depth],role:C.chat_metadata[j.metadata_keys.role]};if(qe.prompt){qe.prompt=Wt(qe.prompt,C.name1,C.name2);const Ge={role:Yt(qe.role),content:qe.prompt};switch(qe.position){case C.extension_prompt_types.IN_PROMPT:Y.insert(1,Ge),ue=1;break;case C.extension_prompt_types.IN_CHAT:ue=Y.getMessages().length-qe.depth,Y.insert(ue,Ge);break;case C.extension_prompt_types.BEFORE_PROMPT:Y.addFront(Ge),ue=0}}}return ue>=0&&(oe.length>0&&(Y.insert(ue,{role:"system",content:oe.join("\n")}),ue++),ie.length>0&&Y.insert(ue+1,{role:"system",content:ie.join("\n")})),{result:Y.getMessages(),warnings:G}}async function un(e,t,n){var r,a,o;function i(t){return e.includes("all")||e.includes(t)}const l=SillyTavern.getContext();let s={};const u=t?N.selected_world_info:N.world_names;if(i("global")&&null!=u&&u.length)for(const e of u){const t=await cn(e);t&&(s[e]||(s[e]=[]),Object.values(t).forEach(t=>{s[e].push(t)}))}if(i("chat")){const e=l.chatMetadata[N.METADATA_KEY];if(e&&!s[e]){s[e]=[];const t=await l.loadWorldInfo(e);t&&Object.values(t.entries).forEach(t=>{s[e].push(t)})}}if(i("character")&&n){const e=l.characters[n];let t=new Set;const i=null==(a=null==(r=null==e?void 0:e.data)?void 0:r.extensions)?void 0:a.world;i&&t.add(i);const u=function(e,{manualAvatarKey:t}={}){return(0,L.getCharaFilename)(e,{manualAvatarKey:t})}(n),c=null==(o=N.world_info.charLore)?void 0:o.find(e=>e.name===u);c&&(t=new Set([...t,...c.extraBooks]));for(const e of t){const t=await l.loadWorldInfo(e);!t||s[e]||(s[e]=[],Object.values(t.entries).forEach(t=>{s[e].push(t)}))}}if(i("persona")){const e=l.powerUserSettings.persona_description_lorebook;if(e&&!s[e]){s[e]=[];const t=await l.loadWorldInfo(e);t&&Object.values(t.entries).forEach(t=>{s[e].push(t)})}}return s}async function cn(e){const t=await SillyTavern.getContext().loadWorldInfo(e);return t?Object.values(t.entries):null}var fn,dn,pn=(e=>(e.NONE="none",e.RESPONSES="responses",e.INPUT="inputs",e.BOTH="both",e))(pn||{}),hn="SillyTavern-zTracker",mn="zTracker";!function(e){e.NATIVE="native",e.JSON="json",e.XML="xml"}(fn||(fn={})),function(e){e.INCLUDE_ALL="include_all",e.EXCLUDE_ALL="exclude_all",e.ALLOWLIST="allowlist"}(dn||(dn={}));var gn='You are a Scene Tracker Assistant, tasked with providing clear, consistent, and structured updates to a scene tracker for a roleplay. Use the latest message, previous tracker details, and context from recent messages to accurately update the tracker. Your response must ensuring that each field is filled and complete. If specific information is not provided, make reasonable assumptions based on prior descriptions, logical inferences, or default character details.\n\n### Key Instructions:\n1. **Default Assumptions for Missing Information**:\n   - **Character Details**: If no new details are provided for a character, assume reasonable defaults (e.g., hairstyle, posture, or attire based on previous entries or context).\n   - **Outfit**: Describe the complete outfit for each character, using specific details for color, fabric, and style (e.g., fitted black leather jacket with silver studs on the collar). **Underwear must always be included in the outfit description.** If underwear is intentionally missing, specify this clearly in the description (e.g., "No bra", "No panties"). If the character is undressed, list the entire outfit.\n   - **StateOfDress**: Describe how put-together or disheveled the character appears, including any removed clothing. If the character is undressed, indicate where discarded items are placed.\n2. **Incremental Time Progression**:\n   - Adjust time in small increments, ideally only a few seconds per update, to reflect realistic scene progression. Avoid large jumps unless a significant time skip (e.g., sleep, travel) is explicitly stated.\n   - Format the time as "HH:MM:SS; MM/DD/YYYY (Day Name)".\n3. **Context-Appropriate Times**:\n   - Ensure that the time aligns with the setting. For example, if the scene takes place in a public venue (e.g., a mall), choose an appropriate time within standard operating hours.\n4. **Location Format**: Avoid unintended reuse of specific locations from previous examples or responses. Provide specific, relevant, and detailed locations based on the context, using the format:\n   - **Example**: Food court, second floor near east wing entrance, Madison Square Mall, Los Angeles, CA\n5. **Topics Format**: Ensure topics are one- or two-word keywords relevant to the scene to help trigger contextual information. Avoid long phrases.\n6. **Avoid Redundancies**: Use only details provided or logically inferred from context. Do not introduce speculative or unnecessary information.\n7. **Focus and Pause**: Treat each scene update as a standalone, complete entry. Respond with the full tracker every time, even if there are only minor updates.\n\n### Important Reminders:\n1. **Recent Messages and Current Tracker**: Before updating, always consider the recent messages to ensure all changes are accurately represented.\n\nYour primary objective is to ensure clarity, consistency, providing complete details even when specifics are not explicitly stated.',vn="You are a highly specialized AI assistant. Your SOLE purpose is to generate a single, valid JSON object that strictly adheres to the provided JSON schema.\n\n**CRITICAL INSTRUCTIONS:**\n1.  You MUST wrap the entire JSON object in a markdown code block (```json\\n...\\n```).\n2.  Your response MUST NOT contain any explanatory text, comments, or any other content outside of this single code block.\n3.  The JSON object inside the code block MUST be valid and conform to the schema.\n\n**JSON SCHEMA TO FOLLOW:**\n```json\n{{schema}}\n```\n\n**EXAMPLE OF A PERFECT RESPONSE:**\n```json\n{{example_response}}\n```\n",yn="You are a highly specialized AI assistant. Your SOLE purpose is to generate a single, valid XML structure that strictly adheres to the provided example.\n\n**CRITICAL INSTRUCTIONS:**\n1.  You MUST wrap the entire XML object in a markdown code block (```xml\\n...\\n```).\n2.  Your response MUST NOT contain any explanatory text, comments, or any other content outside of this single code block.\n3.  The XML object inside the code block MUST be valid.\n\n**JSON SCHEMA TO FOLLOW:**\n```json\n{{schema}}\n```\n\n**EXAMPLE OF A PERFECT RESPONSE:**\n```xml\n<root>\n{{example_response}}\n</root>\n```\n",bn={$schema:"http://json-schema.org/draft-07/schema#",title:"SceneTracker",description:"Schema for tracking roleplay scene details",type:"object",properties:{time:{type:"string",description:"Format: HH:MM:SS; MM/DD/YYYY (Day Name)"},location:{type:"string",description:"Specific scene location with increasing specificity"},weather:{type:"string",description:"Current weather conditions and temperature"},topics:{type:"object",properties:{primaryTopic:{type:"string",description:"1-2 word main topic of interaction"},emotionalTone:{type:"string",description:"Dominant emotional tone of scene"},interactionTheme:{type:"string",description:"Type of character interaction"}},required:["primaryTopic","emotionalTone","interactionTheme"]},charactersPresent:{type:"array",items:{type:"string",description:"Character names"},description:"List of character names present in scene"},characters:{type:"array","x-ztracker-dependsOn":["charactersPresent"],"x-ztracker-idKey":"name",items:{type:"object",properties:{name:{type:"string",description:"Character name"},hair:{type:"string",description:"Hairstyle and condition"},makeup:{type:"string",description:"Makeup description or 'None'"},outfit:{type:"string",description:"Complete outfit including underwear"},stateOfDress:{type:"string",description:"How put-together/disheveled character appears"},postureAndInteraction:{type:"string",description:"Character's physical positioning and interaction"}},required:["name","hair","makeup","outfit","stateOfDress","postureAndInteraction"]},description:"Array of character objects"}},required:["time","location","weather","topics","charactersPresent","characters"]},kn="<div class=\"ztracker_default_mes_template\">\n    \x3c!-- Main Scene Information --\x3e\n    <table>\n        <tbody>\n            <tr>\n                <td>Time:</td>\n                <td>{{data.time}}</td>\n            </tr>\n            <tr>\n                <td>Location:</td>\n                <td>{{data.location}}</td>\n            </tr>\n            <tr>\n                <td>Weather:</td>\n                <td>{{data.weather}}</td>\n            </tr>\n        </tbody>\n    </table>\n\n    \x3c!-- Collapsible Detailed Tracker --\x3e\n    <details>\n        <summary><span>Tracker Details</span></summary>\n        <table>\n            <tbody>\n                <tr>\n                    <td>Topics:</td>\n                    <td>\n                        \x3c!-- Accessing nested object properties --\x3e\n                        {{data.topics.primaryTopic}}; {{data.topics.emotionalTone}}; {{data.topics.interactionTheme}}\n                    </td>\n                </tr>\n                <tr>\n                    <td>Present:</td>\n                    <td>\n                        \x3c!-- Joining an array of strings. Assumes a 'join' helper. --\x3e\n                        {{join data.charactersPresent ', '}}\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n\n        \x3c!-- Character Details Section --\x3e\n        <div class=\"mes_ztracker_characters\">\n            \x3c!-- Looping through the array of character objects --\x3e\n            {{#each data.characters as |character|}}\n            <hr>\n            <strong>{{character.name}}:</strong><br>\n            <table>\n                <tbody>\n                    <tr>\n                        <td>Hair:</td>\n                        <td>{{character.hair}}</td>\n                    </tr>\n                    <tr>\n                        <td>Makeup:</td>\n                        <td>{{character.makeup}}</td>\n                    </tr>\n                    <tr>\n                        <td>Outfit:</td>\n                        <td>{{character.outfit}}</td>\n                    </tr>\n                    <tr>\n                        <td>State:</td>\n                        <td>{{character.stateOfDress}}</td>\n                    </tr>\n                    <tr>\n                        <td>Position:</td>\n                        <td>{{character.postureAndInteraction}}</td>\n                    </tr>\n                </tbody>\n            </table>\n            {{/each}}\n        </div>\n    </details>\n</div>\n<hr>",wn={version:"0.1.0",formatVersion:"F_1.0",profileId:"",maxResponseToken:16e3,autoMode:pn.NONE,sequentialPartGeneration:!1,schemaPreset:"default",schemaPresets:{default:{name:"Default",value:bn,html:kn}},prompt:gn,includeLastXMessages:0,includeLastXZTrackerMessages:1,embedZTrackerRole:"user",embedZTrackerSnapshotHeader:"Tracker:",embedZTrackerSnapshotTransformPreset:"default",embedZTrackerSnapshotTransformPresets:{default:{name:"Default (JSON)",input:"pretty_json",pattern:"",flags:"g",replacement:"",codeFenceLang:"json",wrapInCodeFence:!0},minimal:{name:"Minimal (top-level properties)",input:"top_level_lines",pattern:'^[\\t ]*"([^"]+)"[\\t ]*:[\\t ]*(.*?)(?:,)?[\\t ]*$',flags:"gm",replacement:"$1: $2",codeFenceLang:"text",wrapInCodeFence:!1}},promptEngineeringMode:fn.NATIVE,promptJson:vn,promptXml:yn,debugLogging:!1,trackerWorldInfoPolicyMode:dn.INCLUDE_ALL,trackerWorldInfoAllowlistBookNames:[],trackerWorldInfoAllowlistEntryIds:[]};function Sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return En(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?En(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function En(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function xn(e){var t;return null!==(t=function(e){try{var t=new URL(e).pathname.split("/").filter(Boolean),n=t.findIndex(function(e){return"third-party"===e});if(-1===n)return null;var r=t[n+1];return r?decodeURIComponent(r):null}catch(e){return null}}(e.importMetaUrl))&&void 0!==t?t:e.fallbackFolderName}function _n(e){var t=xn(e);return"/scripts/extensions/third-party/".concat(t)}function Pn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var s=r&&r.prototype instanceof l?r:l,u=Object.create(s.prototype);return Tn(u,"_invoke",function(n,r,a){var o,l,s,u=0,c=a||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,l=0,s=e,d.n=n,i}};function p(n,r){for(l=n,s=r,t=0;!f&&u&&!a&&t<c.length;t++){var a,o=c[t],p=d.p,h=o[2];n>3?(a=h===r)&&(s=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(l=0,d.v=r,d.n=o[1]):p<h&&(a=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,d.n=h,l=0))}if(a||n>1)return i;throw f=!0,r}return function(a,c,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===c&&p(c,h),l=c,s=h;(t=l<2?e:s)||!f;){o||(l?l<3?(l>1&&(d.n=-1),p(l,s)):d.n=s:d.v=s);try{if(u=2,o){if(l||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,l<2&&(l=0)}else 1===l&&(t=o.return)&&t.call(o),l<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),l=1);o=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==i)break}catch(t){o=e,l=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,a,o),!0),u}var i={};function l(){}function s(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(Tn(t={},r,function(){return this}),t),f=u.prototype=l.prototype=Object.create(c);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Tn(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,Tn(f,"constructor",u),Tn(u,"constructor",s),s.displayName="GeneratorFunction",Tn(u,a,"GeneratorFunction"),Tn(f),Tn(f,a,"Generator"),Tn(f,r,function(){return this}),Tn(f,"toString",function(){return"[object Generator]"}),(Pn=function(){return{w:o,m:d}})()}function Tn(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}Tn=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){Tn(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},Tn(e,t,n,r)}function Cn(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function Nn(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Cn(o,r,a,i,l,"next",e)}function l(e){Cn(o,r,a,i,l,"throw",e)}i(void 0)})}}var On=function(e){var t=e.debugLogging,n=e.setDebugLogging,r=e.diagnosticsText,a=e.setDiagnosticsText,o=(0,k.useCallback)(Nn(Pn().m(function e(){var n,r,o,i,l,s,u,c,f,d,p,h,m,g;return Pn().w(function(e){for(;;)switch(e.p=e.n){case 0:n=_n({importMetaUrl:"file:///C:/Users/deeberto/git/SillyTavern-zTracker/src/components/settings/DiagnosticsSection.tsx",fallbackFolderName:hn}),r=[],o=0,i=["dist/templates/buttons","dist/templates/modify_schema_popup"];case 1:if(!(o<i.length)){e.n=6;break}return l=i[o],s=new URL("".concat(n,"/").concat(l,".html"),window.location.origin).toString(),e.p=2,e.n=3,fetch(s,{cache:"no-store"});case 3:u=e.v,r.push({template:l,url:s,status:u.status,ok:u.ok}),e.n=5;break;case 4:e.p=4,g=e.v,c=g instanceof Error?g.message:String(g),r.push({template:l,url:s,status:null,ok:!1,error:c});case 5:o++,e.n=1;break;case 6:for((f=[]).push("zTracker diagnostics"),f.push("time: ".concat((new Date).toISOString())),f.push("origin: ".concat(window.location.origin)),f.push("resolvedBasePath: ".concat(n)),f.push("debugLogging: ".concat(String(t))),f.push(""),d=0,p=r;d<p.length;d++)h=p[d],f.push("template: ".concat(h.template)),f.push("url: ".concat(h.url)),f.push("ok: ".concat(String(h.ok)).concat(null!==h.status?" (status ".concat(h.status,")"):"").concat(h.error?" (error: ".concat(h.error,")"):"")),f.push("");m=f.join("\n"),a(m),console.debug(m);case 7:return e.a(2)}},e,null,[[2,4]])})),[t,a]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsx)("label",{title:"Enables extra console logging and exposes a diagnostics helper for template URLs.",children:"Debug logging"}),(0,b.jsx)("input",{type:"checkbox",title:"Enables extra console logging and exposes a diagnostics helper for template URLs.",checked:!!t,onChange:function(e){return n(e.target.checked)}}),(0,b.jsx)("div",{className:"notes",children:"Enables extra console logging and a diagnostics helper. Avoid enabling unless troubleshooting."})]}),(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsxs)("div",{className:"title_restorable",children:[(0,b.jsx)("span",{title:"Checks whether required zTracker HTML templates are reachable from SillyTavern (helps debug 404s).",children:"Diagnostics"}),(0,b.jsx)(S,{className:"fa-solid fa-stethoscope",title:"Run diagnostics",onClick:o})]}),(0,b.jsx)("textarea",{className:"text_pole",readOnly:!0,value:r,rows:6,placeholder:"Click the stethoscope button to generate diagnostics (also prints to console.debug)."})]})]})};function An(e){return function(e){if(Array.isArray(e))return Fn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||zn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function In(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var s=r&&r.prototype instanceof l?r:l,u=Object.create(s.prototype);return jn(u,"_invoke",function(n,r,a){var o,l,s,u=0,c=a||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,l=0,s=e,d.n=n,i}};function p(n,r){for(l=n,s=r,t=0;!f&&u&&!a&&t<c.length;t++){var a,o=c[t],p=d.p,h=o[2];n>3?(a=h===r)&&(s=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(l=0,d.v=r,d.n=o[1]):p<h&&(a=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,d.n=h,l=0))}if(a||n>1)return i;throw f=!0,r}return function(a,c,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===c&&p(c,h),l=c,s=h;(t=l<2?e:s)||!f;){o||(l?l<3?(l>1&&(d.n=-1),p(l,s)):d.n=s:d.v=s);try{if(u=2,o){if(l||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,l<2&&(l=0)}else 1===l&&(t=o.return)&&t.call(o),l<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),l=1);o=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==i)break}catch(t){o=e,l=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,a,o),!0),u}var i={};function l(){}function s(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(jn(t={},r,function(){return this}),t),f=u.prototype=l.prototype=Object.create(c);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,jn(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,jn(f,"constructor",u),jn(u,"constructor",s),s.displayName="GeneratorFunction",jn(u,a,"GeneratorFunction"),jn(f),jn(f,a,"Generator"),jn(f,r,function(){return this}),jn(f,"toString",function(){return"[object Generator]"}),(In=function(){return{w:o,m:d}})()}function jn(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}jn=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){jn(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},jn(e,t,n,r)}function Mn(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function Dn(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Mn(o,r,a,i,l,"next",e)}function l(e){Mn(o,r,a,i,l,"throw",e)}i(void 0)})}}function Ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||zn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=zn(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function zn(e,t){if(e){if("string"==typeof e)return Fn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fn(e,t):void 0}}function Fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Bn(e){var t,n=e.split(/\r?\n/g).map(function(e){return e.trim()}).filter(Boolean),r=[],a=new Set,o=Rn(n);try{for(o.s();!(t=o.n()).done;){var i=t.value,l=i.toLowerCase();a.has(l)||(a.add(l),r.push(i))}}catch(e){o.e(e)}finally{o.f()}return r}function Hn(){var e,t=null!==(e=document.querySelector("select#world_editor_select"))&&void 0!==e?e:document.querySelector("select#world_info");if(!t)return[];var n,r=Array.from(t.options).map(function(e){var t;return(null!==(t=e.textContent)&&void 0!==t?t:"").trim()}).filter(Boolean).filter(function(e){return!/^---\s*pick\s*to\s*edit\s*---$/i.test(e)}),a=new Set,o=[],i=Rn(r);try{for(i.s();!(n=i.n()).done;){var l=n.value,s=l.toLowerCase();a.has(s)||(a.add(s),o.push(l))}}catch(e){i.e(e)}finally{i.f()}return o}var Un=function(e){var t,n,r,a,o,i=e.settings,l=e.updateAndRefresh,s=null!==(t=i.trackerWorldInfoPolicyMode)&&void 0!==t?t:dn.INCLUDE_ALL,u=(null!==(n=i.trackerWorldInfoAllowlistBookNames)&&void 0!==n?n:[]).join("\n"),c=(null!==(r=i.trackerWorldInfoAllowlistEntryIds)&&void 0!==r?r:[]).join("\n"),f=Ln((0,k.useState)([]),2),d=f[0],p=f[1],h=Ln((0,k.useState)(""),2),m=h[0],g=h[1],v=Ln((0,k.useState)(""),2),y=v[0],w=v[1],E=Ln((0,k.useState)(!1),2),_=E[0],P=E[1],T=Ln((0,k.useState)(""),2),C=T[0],N=T[1],O=(0,k.useCallback)(Dn(In().m(function e(){var t,n,r,a,o,i,l;return In().w(function(e){for(;;)switch(e.p=e.n){case 0:if(P(!0),N(""),e.p=1,t=Hn(),n=function(){var e=Dn(In().m(function e(){var t;return In().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,un(["global","chat","character","persona"],!0);case 1:return t=e.v,e.a(2,Object.keys(t).map(function(e){return e.trim()}).filter(Boolean))}},e)}));return function(){return e.apply(this,arguments)}}(),!(t.length>0)){e.n=2;break}i=t,e.n=4;break;case 2:return e.n=3,n();case 3:i=e.v;case 4:r=i.sort(function(e,t){return e.localeCompare(t)}),p(r),r.length>0?(a=r.includes(y),y&&a||w(r[0])):w(""),e.n=6;break;case 5:e.p=5,l=e.v,o=l instanceof Error?l.message:String(l),N(o),p([]),w("");case 6:return e.p=6,P(!1),e.f(6);case 7:return e.a(2)}},e,null,[[1,5,6,7]])})),[y]),A=(0,k.useMemo)(function(){var e=m.trim().toLowerCase();return e?d.filter(function(t){return t.toLowerCase().includes(e)}):d},[d,m]),I=(0,k.useCallback)(function(e){var t=e.trim();t&&l(function(e){var n,r=null!==(n=e.trackerWorldInfoAllowlistBookNames)&&void 0!==n?n:[];e.trackerWorldInfoAllowlistBookNames=Bn([].concat(An(r),[t]).join("\n"))})},[l]),j=(0,k.useCallback)(function(e){var t=e.trim().toLowerCase();l(function(e){var n,r=null!==(n=e.trackerWorldInfoAllowlistBookNames)&&void 0!==n?n:[];e.trackerWorldInfoAllowlistBookNames=r.filter(function(e){return e.trim().toLowerCase()!==t})})},[l]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsx)("label",{title:"Controls whether SillyTavern World Info is included when zTracker builds the prompt for tracker generation.",children:"World Info during tracker generation"}),(0,b.jsxs)("select",{className:"text_pole",title:"Controls whether SillyTavern World Info is included when zTracker builds the prompt for tracker generation.",value:s,onChange:function(e){return l(function(t){t.trackerWorldInfoPolicyMode=e.target.value})},children:[(0,b.jsx)("option",{value:dn.INCLUDE_ALL,children:"Allow all (default)"}),(0,b.jsx)("option",{value:dn.EXCLUDE_ALL,children:"Exclude all"}),(0,b.jsx)("option",{value:dn.ALLOWLIST,children:"Allow only specified books/UIDs"})]})]}),s===dn.ALLOWLIST&&(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsx)("label",{title:"World Info books (lorebooks) that are allowed when using the allowlist mode.",children:"Allowed World Info book names"}),(0,b.jsx)("div",{className:"notes",children:"Use the picker to add detected books, then optionally fine-tune via the textarea."}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:6},children:[(0,b.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[(0,b.jsx)(S,{title:"Refresh detected books",onClick:O,disabled:_,children:_?"Refreshing":"Refresh book list"}),(0,b.jsx)("input",{className:"text_pole",style:{minWidth:220},value:m,onChange:function(e){return g(e.target.value)},placeholder:"Search detected books",title:"Filter the detected lorebook list."}),(0,b.jsx)("select",{className:"text_pole",style:{minWidth:260},value:y,onChange:function(e){return w(e.target.value)},disabled:0===A.length,title:"Select a detected lorebook to add to the allowlist.",children:0===A.length?(0,b.jsx)("option",{value:"",children:"No books detected (click Refresh)"}):A.map(function(e){return(0,b.jsx)("option",{value:e,children:e},e)})}),(0,b.jsx)(S,{title:"Add selected book",onClick:function(){return I(y)},disabled:!y,children:"Add"})]}),C&&(0,b.jsxs)("div",{className:"notes",children:["Failed to load books: ",C]}),(0,b.jsx)("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:0===(null!==(a=i.trackerWorldInfoAllowlistBookNames)&&void 0!==a?a:[]).length?(0,b.jsx)("span",{className:"notes",children:"No allowlisted books yet."}):(null!==(o=i.trackerWorldInfoAllowlistBookNames)&&void 0!==o?o:[]).map(function(e){return(0,b.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",gap:6,padding:"2px 8px",border:"1px solid var(--SmartThemeBorderColor)",borderRadius:999},children:[(0,b.jsx)("span",{children:e}),(0,b.jsx)("button",{className:"menu_button",type:"button",title:"Remove",onClick:function(){return j(e)},style:{padding:"0 6px"},children:""})]},e)})}),(0,b.jsxs)("details",{children:[(0,b.jsx)("summary",{title:"Edit the allowlisted lorebook names directly (one per line). Matching is case-insensitive.",children:"Advanced: edit book names manually"}),(0,b.jsx)(x,{value:u,onChange:function(e){var t=Bn(e.target.value);l(function(e){e.trackerWorldInfoAllowlistBookNames=t})},rows:4,placeholder:"Example:\\nMy Global Lorebook\\nCharacter Lorebook"})]})]}),(0,b.jsx)("label",{title:"Allowed World Info entry IDs (UIDs). Use one per line, or separate with commas/spaces.",children:"Allowed World Info entry IDs (UIDs; one per line or comma/space separated)"}),(0,b.jsx)(x,{value:c,onChange:function(e){var t=function(e){var t,n=e.split(/[\s,]+/g).map(function(e){return e.trim()}).filter(Boolean),r=[],a=new Set,o=Rn(n);try{for(o.s();!(t=o.n()).done;){var i=t.value,l=Number(i);if(Number.isFinite(l)){var s=Math.trunc(l);s<0||a.has(s)||(a.add(s),r.push(s))}}}catch(e){o.e(e)}finally{o.f()}return r}(e.target.value);l(function(e){e.trackerWorldInfoAllowlistEntryIds=t})},rows:4,placeholder:"Example:\\n12\\n42\\n1337"})]})]})};function $n(e){return $n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$n(e)}function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach(function(t){Gn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Gn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=$n(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Yn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Xn=function(e){var t,n,r,a,o,i,l,s,u,c=e.settings,f=e.updateAndRefresh,d=(0,k.useMemo)(function(){var e,t=null!==(e=c.embedZTrackerSnapshotTransformPresets)&&void 0!==e?e:{};return Object.entries(t).map(function(e){var t=Wn(e,2);return{value:t[0],label:t[1].name}})},[c.embedZTrackerSnapshotTransformPresets]),p=null!==(t=c.embedZTrackerSnapshotTransformPreset)&&void 0!==t?t:"default",h=null===(n=c.embedZTrackerSnapshotTransformPresets)||void 0===n?void 0:n[p];return(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsx)("label",{title:"Header line to prepend before the embedded zTracker snapshot in normal generations.",children:"Embed snapshot header"}),(0,b.jsx)("input",{type:"text",className:"text_pole",placeholder:"Tracker:",title:"Header line to prepend before the embedded zTracker snapshot in normal generations. Set empty to omit.",value:null!==(r=c.embedZTrackerSnapshotHeader)&&void 0!==r?r:"Tracker:",onChange:function(e){return f(function(t){t.embedZTrackerSnapshotHeader=e.target.value})}}),(0,b.jsx)("div",{className:"notes",children:"Set to empty to omit the header line."}),(0,b.jsx)("label",{title:"Choose how embedded snapshots are formatted (optional regex transform + code fence settings).",children:"Embed snapshot transform preset"}),(0,b.jsx)(Qt,{label:"Embed snapshot transform preset",items:d,value:null!==(a=c.embedZTrackerSnapshotTransformPreset)&&void 0!==a?a:"default",onChange:function(e){var t,n=null!=e?e:"default";(null===(t=c.embedZTrackerSnapshotTransformPresets)||void 0===t?void 0:t[n])&&f(function(e){e.embedZTrackerSnapshotTransformPreset=n})},onItemsChange:function(e){f(function(t){var n,r,a,o,i=null!==(n=t.embedZTrackerSnapshotTransformPresets)&&void 0!==n?n:{},l=t.embedZTrackerSnapshotTransformPreset||"default",s=null!==(r=i[l])&&void 0!==r?r:i.default,u={};(e.forEach(function(e){var t=i[e.value];u[e.value]=qn(qn({},t||(s?structuredClone(s):{name:e.label,input:"pretty_json",pattern:"",flags:"g",replacement:"",codeFenceLang:"json"})),{},{name:e.label})}),t.embedZTrackerSnapshotTransformPresets=u,u[t.embedZTrackerSnapshotTransformPreset])||(t.embedZTrackerSnapshotTransformPreset=u.default?"default":null!==(a=null===(o=e[0])||void 0===o?void 0:o.value)&&void 0!==a?a:"default")})},readOnlyValues:["default"],enableCreate:!0,enableDelete:!0,enableRename:!0}),h?(0,b.jsxs)("div",{style:{marginTop:"0.5em"},children:[(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsx)("label",{title:"Controls what text the regex runs against (the raw snapshot).",children:"Transform input"}),(0,b.jsxs)("select",{className:"text_pole",title:"Controls what text the regex runs against.",value:null!==(o=h.input)&&void 0!==o?o:"pretty_json",onChange:function(e){return f(function(t){var n,r=null===(n=t.embedZTrackerSnapshotTransformPresets)||void 0===n?void 0:n[p];r&&(t.embedZTrackerSnapshotTransformPresets=qn(qn({},t.embedZTrackerSnapshotTransformPresets),{},Gn({},p,qn(qn({},r),{},{input:e.target.value}))))})},children:[(0,b.jsx)("option",{value:"pretty_json",children:"Pretty JSON"}),(0,b.jsx)("option",{value:"top_level_lines",children:"Top-level lines"})]})]}),(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsx)("label",{title:"Optional JavaScript regex pattern applied to the snapshot text.",children:"Regex pattern (JS)"}),(0,b.jsx)(x,{value:null!==(i=h.pattern)&&void 0!==i?i:"",onChange:function(e){return f(function(t){var n,r=null===(n=t.embedZTrackerSnapshotTransformPresets)||void 0===n?void 0:n[p];r&&(t.embedZTrackerSnapshotTransformPresets=qn(qn({},t.embedZTrackerSnapshotTransformPresets),{},Gn({},p,qn(qn({},r),{},{pattern:e.target.value}))))})},rows:2})]}),(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsx)("label",{title:"JavaScript regex flags (e.g. g, i, m).",children:"Regex flags"}),(0,b.jsx)("input",{type:"text",className:"text_pole",placeholder:"gmi",title:"JavaScript regex flags (e.g. g, i, m).",value:null!==(l=h.flags)&&void 0!==l?l:"",onChange:function(e){return f(function(t){var n,r=null===(n=t.embedZTrackerSnapshotTransformPresets)||void 0===n?void 0:n[p];r&&(t.embedZTrackerSnapshotTransformPresets=qn(qn({},t.embedZTrackerSnapshotTransformPresets),{},Gn({},p,qn(qn({},r),{},{flags:e.target.value}))))})}})]}),(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsx)("label",{title:"Replacement string used with the regex (supports capture groups like $1).",children:"Replacement"}),(0,b.jsx)(x,{value:null!==(s=h.replacement)&&void 0!==s?s:"",onChange:function(e){return f(function(t){var n,r=null===(n=t.embedZTrackerSnapshotTransformPresets)||void 0===n?void 0:n[p];r&&(t.embedZTrackerSnapshotTransformPresets=qn(qn({},t.embedZTrackerSnapshotTransformPresets),{},Gn({},p,qn(qn({},r),{},{replacement:e.target.value}))))})},rows:2})]}),(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsx)("label",{title:"Language tag used for the Markdown code fence when wrapping is enabled (e.g. json, text). Ignored if wrapping is disabled.",children:"Code fence language"}),(0,b.jsx)("input",{type:"text",className:"text_pole",placeholder:"json",title:"Language tag used for the Markdown code fence when wrapping is enabled (e.g. json, text). Ignored if wrapping is disabled.",value:null!==(u=h.codeFenceLang)&&void 0!==u?u:"",onChange:function(e){return f(function(t){var n,r=null===(n=t.embedZTrackerSnapshotTransformPresets)||void 0===n?void 0:n[p];r&&(t.embedZTrackerSnapshotTransformPresets=qn(qn({},t.embedZTrackerSnapshotTransformPresets),{},Gn({},p,qn(qn({},r),{},{codeFenceLang:e.target.value}))))})}})]}),(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsx)("label",{title:"When enabled, wraps the embedded snapshot in a Markdown code fence for readability (example: ```json ... ```).",children:"Wrap in code fence"}),(0,b.jsx)("input",{type:"checkbox",title:"When enabled, wraps the embedded snapshot in a Markdown code fence for readability (example: ```json ... ```).",checked:!1!==h.wrapInCodeFence,onChange:function(e){return f(function(t){var n,r=null===(n=t.embedZTrackerSnapshotTransformPresets)||void 0===n?void 0:n[p];r&&(t.embedZTrackerSnapshotTransformPresets=qn(qn({},t.embedZTrackerSnapshotTransformPresets),{},Gn({},p,qn(qn({},r),{},{wrapInCodeFence:e.target.checked}))))})}})]})]}):null]})};function Kn(e){return Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kn(e)}function Jn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var s=r&&r.prototype instanceof l?r:l,u=Object.create(s.prototype);return Qn(u,"_invoke",function(n,r,a){var o,l,s,u=0,c=a||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,l=0,s=e,d.n=n,i}};function p(n,r){for(l=n,s=r,t=0;!f&&u&&!a&&t<c.length;t++){var a,o=c[t],p=d.p,h=o[2];n>3?(a=h===r)&&(s=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(l=0,d.v=r,d.n=o[1]):p<h&&(a=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,d.n=h,l=0))}if(a||n>1)return i;throw f=!0,r}return function(a,c,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===c&&p(c,h),l=c,s=h;(t=l<2?e:s)||!f;){o||(l?l<3?(l>1&&(d.n=-1),p(l,s)):d.n=s:d.v=s);try{if(u=2,o){if(l||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,l<2&&(l=0)}else 1===l&&(t=o.return)&&t.call(o),l<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),l=1);o=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==i)break}catch(t){o=e,l=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,a,o),!0),u}var i={};function l(){}function s(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(Qn(t={},r,function(){return this}),t),f=u.prototype=l.prototype=Object.create(c);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Qn(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,Qn(f,"constructor",u),Qn(u,"constructor",s),s.displayName="GeneratorFunction",Qn(u,a,"GeneratorFunction"),Qn(f),Qn(f,a,"Generator"),Qn(f,r,function(){return this}),Qn(f,"toString",function(){return"[object Generator]"}),(Jn=function(){return{w:o,m:d}})()}function Qn(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}Qn=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){Qn(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},Qn(e,t,n,r)}function Zn(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?er(Object(n),!0).forEach(function(t){nr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Kn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Kn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Kn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ar(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ar(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var or=new class{constructor(e,t){en(this,"settingsKey"),en(this,"defaultSettings"),this.settingsKey=e,this.defaultSettings=t}async initializeSettings(e={}){const{strategy:t="recursive"}=e,n=this.defaultSettings.version,r=this.defaultSettings.formatVersion,a=SillyTavern.getContext().extensionSettings[this.settingsKey],o={version:{changed:!1,new:n??""},formatVersion:{changed:!1,new:r??""},oldSettings:null,newSettings:this.defaultSettings};if(!a)return SillyTavern.getContext().extensionSettings[this.settingsKey]=this.defaultSettings,this.saveSettings(),o;const i={...o,oldSettings:structuredClone(a),version:{changed:!1,old:a.version,new:a.version},formatVersion:{changed:!1,old:a.formatVersion,new:a.formatVersion}};if("recursive"===t){let e=function(t,n){let r=!1;for(const a of Object.keys(n))void 0===t[a]?(t[a]=n[a],r=!0):"object"==typeof n[a]&&null!==n[a]&&(t[a]=t[a]||{},e(t[a],n[a])&&(r=!0));return r};n&&a.version!==n&&(i.version.changed=!0,i.version.new=n,a.version=n),r&&"*"!==r&&a.formatVersion!==r&&(i.formatVersion.changed=!0,i.formatVersion.new=r,a.formatVersion=r),(e(a,this.defaultSettings)||i.version.changed||i.formatVersion.changed)&&this.saveSettings()}else if(Array.isArray(t)){n&&!a.version&&(a.version=n,i.version.changed=!0,i.version.new=n),r&&!a.formatVersion&&(a.formatVersion=r,i.formatVersion.changed=!0,i.formatVersion.new=r);let e=structuredClone(a),o=a.formatVersion;try{let n;do{n=!1;let r=t.find(e=>e.from===o);if(r&&r.to>o)e=await r.action(e),o=r.to,e.formatVersion=r.to,n=!0;else for(const r of t)if("*"===r.from&&r.to>o&&o!==r.to){e=await r.action(e),o=r.to,e.formatVersion=r.to,n=!0;break}}while(n);if(o!==a.formatVersion){i.formatVersion.changed=!0,i.formatVersion.new=o;const t=this.defaultSettings.version;t&&(e.version=t)}if(i.formatVersion.changed){for(const e of Object.keys(a))delete a[e];Object.assign(a,e),this.saveSettings()}}catch(e){throw console.error("Failed to apply version changes:",e),new Error(`Version migration failed: ${e instanceof Error?e.message:e}`,{cause:e})}}return i.newSettings=a,i}getSettings(){return SillyTavern.getContext().extensionSettings[this.settingsKey]}updateSetting(e,t){SillyTavern.getContext().extensionSettings[this.settingsKey][e]=t,this.saveSettings()}saveSettings(){SillyTavern.getContext().saveSettingsDebounced()}resetSettings(){SillyTavern.getContext().extensionSettings[this.settingsKey]=this.defaultSettings,this.saveSettings()}}(mn,wn),ir=function(){var e,t,n,r,a,o,i=(o=Sn((0,k.useState)(0),2)[1],(0,k.useCallback)(function(){return o(function(e){return e+1})},[])),l=or.getSettings(),s=rr((0,k.useState)(""),2),u=s[0],c=s[1],f=rr((0,k.useState)(null!==(e=JSON.stringify(null===(t=l.schemaPresets[l.schemaPreset])||void 0===t?void 0:t.value,null,2))&&void 0!==e?e:""),2),d=f[0],p=f[1],h=(0,k.useCallback)(function(e){e(or.getSettings()),or.saveSettings(),i()},[i]),m=(0,k.useMemo)(function(){return Object.entries(l.schemaPresets).map(function(e){var t=rr(e,2);return{value:t[0],label:t[1].name}})},[l.schemaPresets]),g=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Zn(o,r,a,i,l,"next",e)}function l(e){Zn(o,r,a,i,l,"throw",e)}i(void 0)})}}(Jn().m(function e(){var t;return Jn().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,SillyTavern.getContext().Popup.show.confirm("Restore Default","Are you sure you want to restore the default schema and HTML for this preset?");case 1:if(e.v){e.n=2;break}return e.a(2);case 2:t=l.schemaPreset,h(function(e){var n=e.schemaPresets[t];n&&(e.schemaPresets=tr(tr({},e.schemaPresets),{},nr({},t,tr(tr({},n),{},{value:bn,html:kn}))))}),p(JSON.stringify(bn,null,2));case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return(0,b.jsx)("div",{className:"ztracker-settings",children:(0,b.jsxs)("div",{className:"inline-drawer",children:[(0,b.jsxs)("div",{className:"inline-drawer-toggle inline-drawer-header",children:[(0,b.jsx)("b",{children:"zTracker"}),(0,b.jsx)("div",{className:"inline-drawer-icon fa-solid fa-circle-chevron-down down"})]}),(0,b.jsx)("div",{className:"inline-drawer-content",children:(0,b.jsxs)("div",{className:"ztracker-container",children:[(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsx)("label",{title:"Which SillyTavern Connection Profile zTracker uses when generating trackers.",children:"Connection Profile"}),(0,b.jsx)(F,{initialSelectedProfileId:l.profileId,onChange:function(e){return h(function(t){var n;t.profileId=null!==(n=null==e?void 0:e.id)&&void 0!==n?n:""})}})]}),(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsx)("label",{title:"Controls when zTracker automatically generates trackers: never, on incoming assistant messages, on your inputs, or both.",children:"Auto Mode"}),(0,b.jsxs)("select",{className:"text_pole",title:"Controls when zTracker automatically generates trackers: never, on incoming assistant messages, on your inputs, or both.",value:l.autoMode,onChange:function(e){return h(function(t){t.autoMode=e.target.value})},children:[(0,b.jsx)("option",{value:"none",children:"None"}),(0,b.jsx)("option",{value:"responses",children:"Process responses"}),(0,b.jsx)("option",{value:"inputs",children:"Process inputs"}),(0,b.jsx)("option",{value:"both",children:"Process both"})]})]}),(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsx)("label",{title:"When enabled, zTracker generates tracker fields sequentially (smaller requests) and enables per-part regeneration controls.",children:"Sequential generation"}),(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,b.jsx)("input",{type:"checkbox",checked:!!l.sequentialPartGeneration,onChange:function(e){return h(function(t){t.sequentialPartGeneration=e.target.checked})}}),"Generate tracker parts one-by-one"]})]}),(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsx)("label",{title:"Chooses how zTracker asks the model for structured output: use the native API format, or use JSON/XML prompt-engineering templates.",children:"Prompt Engineering"}),(0,b.jsxs)("select",{className:"text_pole",title:"Chooses how zTracker asks the model for structured output: use the native API format, or use JSON/XML prompt-engineering templates.",value:l.promptEngineeringMode,onChange:function(e){return h(function(t){t.promptEngineeringMode=e.target.value})},children:[(0,b.jsx)("option",{value:"native",children:"Native API"}),(0,b.jsx)("option",{value:"json",children:"Prompt Engineering (JSON)"}),(0,b.jsx)("option",{value:"xml",children:"Prompt Engineering (XML)"})]})]}),(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsx)("label",{title:"Selects the active schema preset used to parse and render trackers. You can create, rename, and delete presets.",children:"Schema Preset"}),(0,b.jsx)(Qt,{label:"Schema Preset",items:m,value:l.schemaPreset,onChange:function(e){var t=null!=e?e:"default",n=l.schemaPresets[t];n&&(h(function(e){e.schemaPreset=t}),p(JSON.stringify(n.value,null,2)))},onItemsChange:function(e){h(function(t){var n={};e.forEach(function(e){var r,a;n[e.value]=null!==(r=t.schemaPresets[e.value])&&void 0!==r?r:structuredClone(null!==(a=t.schemaPresets[t.schemaPreset])&&void 0!==a?a:t.schemaPresets.default),n[e.value].name=e.label}),t.schemaPresets=n})},readOnlyValues:["default"],enableCreate:!0,enableDelete:!0,enableRename:!0}),(0,b.jsxs)("div",{className:"title_restorable",children:[(0,b.jsx)("span",{title:"The JSON schema and HTML template used for tracker generation and rendering.",children:"Schema"}),(0,b.jsx)(S,{className:"fa-solid fa-undo",title:"Restore default",onClick:g})]}),(0,b.jsx)(x,{value:d,onChange:function(e){return function(e){p(e);try{var t=JSON.parse(e);h(function(e){var n=e.schemaPresets[e.schemaPreset];n&&(e.schemaPresets=tr(tr({},e.schemaPresets),{},nr({},e.schemaPreset,tr(tr({},n),{},{value:t}))))})}catch(e){}}(e.target.value)},rows:4}),(0,b.jsx)(x,{value:null!==(n=null===(r=l.schemaPresets[l.schemaPreset])||void 0===r?void 0:r.html)&&void 0!==n?n:"",onChange:function(e){return t=e.target.value,void h(function(e){var n=e.schemaPresets[e.schemaPreset];n&&(e.schemaPresets=tr(tr({},e.schemaPresets),{},nr({},e.schemaPreset,tr(tr({},n),{},{html:t}))))});var t},rows:4,placeholder:"Enter your schema HTML here..."})]}),(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsxs)("div",{className:"title_restorable",children:[(0,b.jsx)("span",{title:"Main prompt template used during tracker generation.",children:"Prompt"}),(0,b.jsx)(S,{className:"fa-solid fa-undo",title:"Restore main context template to default",onClick:function(){return h(function(e){e.prompt=gn})}})]}),(0,b.jsx)(x,{value:l.prompt,onChange:function(e){return h(function(t){t.prompt=e.target.value})},rows:4})]}),(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsxs)("div",{className:"title_restorable",children:[(0,b.jsx)("span",{title:"Prompt-engineering template used when Prompt Engineering is set to JSON.",children:"Prompt (JSON)"}),(0,b.jsx)(S,{className:"fa-solid fa-undo",title:"Restore main context template to default",onClick:function(){return h(function(e){e.promptJson=vn})}})]}),(0,b.jsx)(x,{value:l.promptJson,onChange:function(e){return h(function(t){t.promptJson=e.target.value})},rows:4})]}),(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsxs)("div",{className:"title_restorable",children:[(0,b.jsx)("span",{title:"Prompt-engineering template used when Prompt Engineering is set to XML.",children:"Prompt (XML)"}),(0,b.jsx)(S,{className:"fa-solid fa-undo",title:"Restore main context template to default",onClick:function(){return h(function(e){e.promptXml=yn})}})]}),(0,b.jsx)(x,{value:l.promptXml,onChange:function(e){return h(function(t){t.promptXml=e.target.value})},rows:4})]}),(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsx)("label",{title:"Max tokens zTracker requests for the model response during tracker generation.",children:"Max Response Tokens"}),(0,b.jsx)("input",{type:"number",className:"text_pole",min:"1",step:"1",title:"Max tokens zTracker requests for the model response during tracker generation.",value:l.maxResponseToken,onChange:function(e){return h(function(t){t.maxResponseToken=parseInt(e.target.value)||0})}})]}),(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsx)("label",{title:"How many recent chat messages to include when generating a tracker. 0 includes all messages; 1 includes only the last message.",children:"Include Last X Messages (0 means all, 1 means last)"}),(0,b.jsx)("input",{type:"number",className:"text_pole",min:"0",step:"1",title:"How many recent chat messages to include when generating a tracker. 0 includes all messages; 1 includes only the last message.",value:l.includeLastXMessages,onChange:function(e){return h(function(t){t.includeLastXMessages=parseInt(e.target.value)||0})}})]}),(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsx)("label",{title:"How many previous zTracker snapshots to embed into normal generations. 0 disables embedding.",children:"Include Last X zTracker Messages"}),(0,b.jsx)("input",{type:"number",className:"text_pole",min:"0",step:"1",title:"How many previous zTracker snapshots to embed into normal generations. 0 disables embedding.",value:l.includeLastXZTrackerMessages,onChange:function(e){return h(function(t){t.includeLastXZTrackerMessages=parseInt(e.target.value)||0})}})]}),(0,b.jsxs)("div",{className:"setting-row",children:[(0,b.jsx)("label",{title:"Which role to use for embedded zTracker snapshots in normal generations. This affects generate_interceptor only, not tracker generation.",children:"Embed zTracker snapshots as"}),(0,b.jsxs)("select",{className:"text_pole",title:"Only affects embedding into the generation chat array (generate_interceptor), not tracker generation.",value:null!==(a=l.embedZTrackerRole)&&void 0!==a?a:"user",onChange:function(e){return h(function(t){t.embedZTrackerRole=e.target.value})},children:[(0,b.jsx)("option",{value:"user",children:"User"}),(0,b.jsx)("option",{value:"system",children:"System"}),(0,b.jsx)("option",{value:"assistant",children:"Assistant"})]})]}),(0,b.jsx)(Xn,{settings:l,updateAndRefresh:h}),(0,b.jsx)(Un,{settings:l,updateAndRefresh:h}),(0,b.jsx)(On,{debugLogging:!!l.debugLogging,setDebugLogging:function(e){return h(function(t){t.debugLogging=e})},diagnosticsText:u,setDiagnosticsText:c})]})})]})})},lr=y(639),sr=y.n(lr);const ur={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,n){return e},captureMetaData:!1},cr=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",fr=new RegExp("^"+("["+cr+"]["+(cr+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040")+"]*")+"$");function dr(e,t){const n=[];let r=t.exec(e);for(;r;){const a=[];a.startIndex=t.lastIndex-r[0].length;const o=r.length;for(let e=0;e<o;e++)a.push(r[e]);n.push(a),r=t.exec(e)}return n}const pr=function(e){const t=fr.exec(e);return!(null==t)};let hr;hr="function"!=typeof Symbol?"@@xmlMetadata":Symbol("XML Node Metadata");class mr{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){"__proto__"===e&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e,t){"__proto__"===e.tagname&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),void 0!==t&&(this.child[this.child.length-1][hr]={startIndex:t})}static getMetaDataSymbol(){return hr}}function gr(e,t){const n={};if("O"!==e[t+3]||"C"!==e[t+4]||"T"!==e[t+5]||"Y"!==e[t+6]||"P"!==e[t+7]||"E"!==e[t+8])throw new Error("Invalid Tag instead of DOCTYPE");{t+=9;let r=1,a=!1,o=!1,i="";for(;t<e.length;t++)if("<"!==e[t]||o)if(">"===e[t]){if(o?"-"===e[t-1]&&"-"===e[t-2]&&(o=!1,r--):r--,0===r)break}else"["===e[t]?a=!0:i+=e[t];else{if(a&&Sr(e,"!ENTITY",t)){let r,a;t+=7,[r,a,t]=yr(e,t+1),-1===a.indexOf("&")&&(n[r]={regx:RegExp(`&${r};`,"g"),val:a})}else if(a&&Sr(e,"!ELEMENT",t)){t+=8;const{index:n}=wr(e,t+1);t=n}else if(a&&Sr(e,"!ATTLIST",t))t+=8;else if(a&&Sr(e,"!NOTATION",t)){t+=9;const{index:n}=br(e,t+1);t=n}else{if(!Sr(e,"!--",t))throw new Error("Invalid DOCTYPE");o=!0}r++,i=""}if(0!==r)throw new Error("Unclosed DOCTYPE")}return{entities:n,i:t}}const vr=(e,t)=>{for(;t<e.length&&/\s/.test(e[t]);)t++;return t};function yr(e,t){t=vr(e,t);let n="";for(;t<e.length&&!/\s/.test(e[t])&&'"'!==e[t]&&"'"!==e[t];)n+=e[t],t++;if(Er(n),t=vr(e,t),"SYSTEM"===e.substring(t,t+6).toUpperCase())throw new Error("External entities are not supported");if("%"===e[t])throw new Error("Parameter entities are not supported");let r="";return[t,r]=kr(e,t,"entity"),[n,r,--t]}function br(e,t){t=vr(e,t);let n="";for(;t<e.length&&!/\s/.test(e[t]);)n+=e[t],t++;Er(n),t=vr(e,t);const r=e.substring(t,t+6).toUpperCase();if("SYSTEM"!==r&&"PUBLIC"!==r)throw new Error(`Expected SYSTEM or PUBLIC, found "${r}"`);t+=r.length,t=vr(e,t);let a=null,o=null;if("PUBLIC"===r)[t,a]=kr(e,t,"publicIdentifier"),'"'!==e[t=vr(e,t)]&&"'"!==e[t]||([t,o]=kr(e,t,"systemIdentifier"));else if("SYSTEM"===r&&([t,o]=kr(e,t,"systemIdentifier"),!o))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:n,publicIdentifier:a,systemIdentifier:o,index:--t}}function kr(e,t,n){let r="";const a=e[t];if('"'!==a&&"'"!==a)throw new Error(`Expected quoted string, found "${a}"`);for(t++;t<e.length&&e[t]!==a;)r+=e[t],t++;if(e[t]!==a)throw new Error(`Unterminated ${n} value`);return[++t,r]}function wr(e,t){t=vr(e,t);let n="";for(;t<e.length&&!/\s/.test(e[t]);)n+=e[t],t++;if(!Er(n))throw new Error(`Invalid element name: "${n}"`);let r="";if("E"===e[t=vr(e,t)]&&Sr(e,"MPTY",t))t+=4;else if("A"===e[t]&&Sr(e,"NY",t))t+=2;else{if("("!==e[t])throw new Error(`Invalid Element Expression, found "${e[t]}"`);for(t++;t<e.length&&")"!==e[t];)r+=e[t],t++;if(")"!==e[t])throw new Error("Unterminated content model")}return{elementName:n,contentModel:r.trim(),index:t}}function Sr(e,t,n){for(let r=0;r<t.length;r++)if(t[r]!==e[n+r+1])return!1;return!0}function Er(e){if(pr(e))return e;throw new Error(`Invalid entity name ${e}`)}const xr=/^[-+]?0x[a-fA-F0-9]+$/,_r=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,Pr={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Tr(e,t={}){if(t=Object.assign({},Pr,t),!e||"string"!=typeof e)return e;let n=e.trim();if(void 0!==t.skipLike&&t.skipLike.test(n))return e;if("0"===e)return 0;if(t.hex&&xr.test(n))return function(e,t){if(parseInt)return parseInt(e,t);if(Number.parseInt)return Number.parseInt(e,t);if(window&&window.parseInt)return window.parseInt(e,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}(n,16);if(-1!==n.search(/.+[eE].+/))return function(e,t,n){if(!n.eNotation)return e;const r=t.match(Cr);if(r){let a=r[1]||"";const o=-1===r[3].indexOf("e")?"E":"e",i=r[2],l=a?e[i.length+1]===o:e[i.length]===o;return i.length>1&&l?e:1!==i.length||!r[3].startsWith(`.${o}`)&&r[3][0]!==o?n.leadingZeros&&!l?(t=(r[1]||"")+r[3],Number(t)):e:Number(t)}return e}(e,n,t);{const r=_r.exec(n);if(r){const a=r[1]||"",o=r[2];let i=function(e){if(e&&-1!==e.indexOf("."))return"."===(e=e.replace(/0+$/,""))?e="0":"."===e[0]?e="0"+e:"."===e[e.length-1]&&(e=e.substring(0,e.length-1)),e;return e}(r[3]);const l=a?"."===e[o.length+1]:"."===e[o.length];if(!t.leadingZeros&&(o.length>1||1===o.length&&!l))return e;{const r=Number(n),l=String(r);if(0===r)return r;if(-1!==l.search(/[eE]/))return t.eNotation?r:e;if(-1!==n.indexOf("."))return"0"===l||l===i||l===`${a}${i}`?r:e;let s=o?i:n;return o?s===l||a+s===l?r:e:s===l||s===a+l?r:e}}return e}}const Cr=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;class Nr{constructor(e){var t;this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,t)=>String.fromCodePoint(Number.parseInt(t,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,t)=>String.fromCodePoint(Number.parseInt(t,16))}},this.addExternalEntities=Or,this.parseXml=Dr,this.parseTextData=Ar,this.resolveNameSpace=Ir,this.buildAttributesMap=Mr,this.isItStopNode=Fr,this.replaceEntitiesValue=Rr,this.readStopNodeData=Ur,this.saveTextToParentTag=zr,this.addChild=Lr,this.ignoreAttributesFn="function"==typeof(t=this.options.ignoreAttributes)?t:Array.isArray(t)?e=>{for(const n of t){if("string"==typeof n&&e===n)return!0;if(n instanceof RegExp&&n.test(e))return!0}}:()=>!1}}function Or(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const r=t[n];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:e[r]}}}function Ar(e,t,n,r,a,o,i){if(void 0!==e&&(this.options.trimValues&&!r&&(e=e.trim()),e.length>0)){i||(e=this.replaceEntitiesValue(e));const r=this.options.tagValueProcessor(t,e,n,a,o);if(null==r)return e;if(typeof r!=typeof e||r!==e)return r;if(this.options.trimValues)return $r(e,this.options.parseTagValue,this.options.numberParseOptions);return e.trim()===e?$r(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function Ir(e){if(this.options.removeNSPrefix){const t=e.split(":"),n="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=n+t[1])}return e}const jr=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function Mr(e,t,n){if(!0!==this.options.ignoreAttributes&&"string"==typeof e){const n=dr(e,jr),r=n.length,a={};for(let e=0;e<r;e++){const r=this.resolveNameSpace(n[e][1]);if(this.ignoreAttributesFn(r,t))continue;let o=n[e][4],i=this.options.attributeNamePrefix+r;if(r.length)if(this.options.transformAttributeName&&(i=this.options.transformAttributeName(i)),"__proto__"===i&&(i="#__proto__"),void 0!==o){this.options.trimValues&&(o=o.trim()),o=this.replaceEntitiesValue(o);const e=this.options.attributeValueProcessor(r,o,t);a[i]=null==e?o:typeof e!=typeof o||e!==o?e:$r(o,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(a[i]=!0)}if(!Object.keys(a).length)return;if(this.options.attributesGroupName){const e={};return e[this.options.attributesGroupName]=a,e}return a}}const Dr=function(e){e=e.replace(/\r\n?/g,"\n");const t=new mr("!xml");let n=t,r="",a="";for(let o=0;o<e.length;o++){if("<"===e[o])if("/"===e[o+1]){const t=Br(e,">",o,"Closing Tag is not closed.");let i=e.substring(o+2,t).trim();if(this.options.removeNSPrefix){const e=i.indexOf(":");-1!==e&&(i=i.substr(e+1))}this.options.transformTagName&&(i=this.options.transformTagName(i)),n&&(r=this.saveTextToParentTag(r,n,a));const l=a.substring(a.lastIndexOf(".")+1);if(i&&-1!==this.options.unpairedTags.indexOf(i))throw new Error(`Unpaired tag can not be used as closing tag: </${i}>`);let s=0;l&&-1!==this.options.unpairedTags.indexOf(l)?(s=a.lastIndexOf(".",a.lastIndexOf(".")-1),this.tagsNodeStack.pop()):s=a.lastIndexOf("."),a=a.substring(0,s),n=this.tagsNodeStack.pop(),r="",o=t}else if("?"===e[o+1]){let t=Hr(e,o,!1,"?>");if(!t)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,n,a),this.options.ignoreDeclaration&&"?xml"===t.tagName||this.options.ignorePiTags);else{const e=new mr(t.tagName);e.add(this.options.textNodeName,""),t.tagName!==t.tagExp&&t.attrExpPresent&&(e[":@"]=this.buildAttributesMap(t.tagExp,a,t.tagName)),this.addChild(n,e,a,o)}o=t.closeIndex+1}else if("!--"===e.substr(o+1,3)){const t=Br(e,"--\x3e",o+4,"Comment is not closed.");if(this.options.commentPropName){const i=e.substring(o+4,t-2);r=this.saveTextToParentTag(r,n,a),n.add(this.options.commentPropName,[{[this.options.textNodeName]:i}])}o=t}else if("!D"===e.substr(o+1,2)){const t=gr(e,o);this.docTypeEntities=t.entities,o=t.i}else if("!["===e.substr(o+1,2)){const t=Br(e,"]]>",o,"CDATA is not closed.")-2,i=e.substring(o+9,t);r=this.saveTextToParentTag(r,n,a);let l=this.parseTextData(i,n.tagname,a,!0,!1,!0,!0);null==l&&(l=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:i}]):n.add(this.options.textNodeName,l),o=t+2}else{let i=Hr(e,o,this.options.removeNSPrefix),l=i.tagName;const s=i.rawTagName;let u=i.tagExp,c=i.attrExpPresent,f=i.closeIndex;this.options.transformTagName&&(l=this.options.transformTagName(l)),n&&r&&"!xml"!==n.tagname&&(r=this.saveTextToParentTag(r,n,a,!1));const d=n;d&&-1!==this.options.unpairedTags.indexOf(d.tagname)&&(n=this.tagsNodeStack.pop(),a=a.substring(0,a.lastIndexOf("."))),l!==t.tagname&&(a+=a?"."+l:l);const p=o;if(this.isItStopNode(this.options.stopNodes,a,l)){let t="";if(u.length>0&&u.lastIndexOf("/")===u.length-1)"/"===l[l.length-1]?(l=l.substr(0,l.length-1),a=a.substr(0,a.length-1),u=l):u=u.substr(0,u.length-1),o=i.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(l))o=i.closeIndex;else{const n=this.readStopNodeData(e,s,f+1);if(!n)throw new Error(`Unexpected end of ${s}`);o=n.i,t=n.tagContent}const r=new mr(l);l!==u&&c&&(r[":@"]=this.buildAttributesMap(u,a,l)),t&&(t=this.parseTextData(t,l,a,!0,c,!0,!0)),a=a.substr(0,a.lastIndexOf(".")),r.add(this.options.textNodeName,t),this.addChild(n,r,a,p)}else{if(u.length>0&&u.lastIndexOf("/")===u.length-1){"/"===l[l.length-1]?(l=l.substr(0,l.length-1),a=a.substr(0,a.length-1),u=l):u=u.substr(0,u.length-1),this.options.transformTagName&&(l=this.options.transformTagName(l));const e=new mr(l);l!==u&&c&&(e[":@"]=this.buildAttributesMap(u,a,l)),this.addChild(n,e,a,p),a=a.substr(0,a.lastIndexOf("."))}else{const e=new mr(l);this.tagsNodeStack.push(n),l!==u&&c&&(e[":@"]=this.buildAttributesMap(u,a,l)),this.addChild(n,e,a,p),n=e}r="",o=f}}else r+=e[o]}return t.child};function Lr(e,t,n,r){this.options.captureMetaData||(r=void 0);const a=this.options.updateTag(t.tagname,n,t[":@"]);!1===a||("string"==typeof a?(t.tagname=a,e.addChild(t,r)):e.addChild(t,r))}const Rr=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const n=this.docTypeEntities[t];e=e.replace(n.regx,n.val)}for(let t in this.lastEntities){const n=this.lastEntities[t];e=e.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const n=this.htmlEntities[t];e=e.replace(n.regex,n.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function zr(e,t,n,r){return e&&(void 0===r&&(r=0===t.child.length),void 0!==(e=this.parseTextData(e,t.tagname,n,!1,!!t[":@"]&&0!==Object.keys(t[":@"]).length,r))&&""!==e&&t.add(this.options.textNodeName,e),e=""),e}function Fr(e,t,n){const r="*."+n;for(const n in e){const a=e[n];if(r===a||t===a)return!0}return!1}function Br(e,t,n,r){const a=e.indexOf(t,n);if(-1===a)throw new Error(r);return a+t.length-1}function Hr(e,t,n,r=">"){const a=function(e,t,n=">"){let r,a="";for(let o=t;o<e.length;o++){let t=e[o];if(r)t===r&&(r="");else if('"'===t||"'"===t)r=t;else if(t===n[0]){if(!n[1])return{data:a,index:o};if(e[o+1]===n[1])return{data:a,index:o}}else"\t"===t&&(t=" ");a+=t}}(e,t+1,r);if(!a)return;let o=a.data;const i=a.index,l=o.search(/\s/);let s=o,u=!0;-1!==l&&(s=o.substring(0,l),o=o.substring(l+1).trimStart());const c=s;if(n){const e=s.indexOf(":");-1!==e&&(s=s.substr(e+1),u=s!==a.data.substr(e+1))}return{tagName:s,tagExp:o,closeIndex:i,attrExpPresent:u,rawTagName:c}}function Ur(e,t,n){const r=n;let a=1;for(;n<e.length;n++)if("<"===e[n])if("/"===e[n+1]){const o=Br(e,">",n,`${t} is not closed`);if(e.substring(n+2,o).trim()===t&&(a--,0===a))return{tagContent:e.substring(r,n),i:o};n=o}else if("?"===e[n+1]){n=Br(e,"?>",n+1,"StopNode is not closed.")}else if("!--"===e.substr(n+1,3)){n=Br(e,"--\x3e",n+3,"StopNode is not closed.")}else if("!["===e.substr(n+1,2)){n=Br(e,"]]>",n,"StopNode is not closed.")-2}else{const r=Hr(e,n,">");if(r){(r&&r.tagName)===t&&"/"!==r.tagExp[r.tagExp.length-1]&&a++,n=r.closeIndex}}}function $r(e,t,n){if(t&&"string"==typeof e){const t=e.trim();return"true"===t||"false"!==t&&Tr(e,n)}return function(e){return void 0!==e}(e)?e:""}const Vr=mr.getMetaDataSymbol();function qr(e,t){return Gr(e,t)}function Gr(e,t,n){let r;const a={};for(let o=0;o<e.length;o++){const i=e[o],l=Wr(i);let s="";if(s=void 0===n?l:n+"."+l,l===t.textNodeName)void 0===r?r=i[l]:r+=""+i[l];else{if(void 0===l)continue;if(i[l]){let e=Gr(i[l],t,s);const n=Xr(e,t);void 0!==i[Vr]&&(e[Vr]=i[Vr]),i[":@"]?Yr(e,i[":@"],s,t):1!==Object.keys(e).length||void 0===e[t.textNodeName]||t.alwaysCreateTextNode?0===Object.keys(e).length&&(t.alwaysCreateTextNode?e[t.textNodeName]="":e=""):e=e[t.textNodeName],void 0!==a[l]&&a.hasOwnProperty(l)?(Array.isArray(a[l])||(a[l]=[a[l]]),a[l].push(e)):t.isArray(l,s,n)?a[l]=[e]:a[l]=e}}}return"string"==typeof r?r.length>0&&(a[t.textNodeName]=r):void 0!==r&&(a[t.textNodeName]=r),a}function Wr(e){const t=Object.keys(e);for(let e=0;e<t.length;e++){const n=t[e];if(":@"!==n)return n}}function Yr(e,t,n,r){if(t){const a=Object.keys(t),o=a.length;for(let i=0;i<o;i++){const o=a[i];r.isArray(o,n+"."+o,!0,!0)?e[o]=[t[o]]:e[o]=t[o]}}}function Xr(e,t){const{textNodeName:n}=t,r=Object.keys(e).length;return 0===r||!(1!==r||!e[n]&&"boolean"!=typeof e[n]&&0!==e[n])}const Kr={allowBooleanAttributes:!1,unpairedTags:[]};function Jr(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function Qr(e,t){const n=t;for(;t<e.length;t++)if("?"==e[t]||" "==e[t]){const r=e.substr(n,t-n);if(t>5&&"xml"===r)return ia("InvalidXml","XML declaration allowed only at the start of the document.",ua(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}continue}return t}function Zr(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let n=1;for(t+=8;t<e.length;t++)if("<"===e[t])n++;else if(">"===e[t]&&(n--,0===n))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}const ea='"',ta="'";function na(e,t){let n="",r="",a=!1;for(;t<e.length;t++){if(e[t]===ea||e[t]===ta)""===r?r=e[t]:r!==e[t]||(r="");else if(">"===e[t]&&""===r){a=!0;break}n+=e[t]}return""===r&&{value:n,index:t,tagClosed:a}}const ra=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function aa(e,t){const n=dr(e,ra),r={};for(let e=0;e<n.length;e++){if(0===n[e][1].length)return ia("InvalidAttr","Attribute '"+n[e][2]+"' has no space in starting.",ca(n[e]));if(void 0!==n[e][3]&&void 0===n[e][4])return ia("InvalidAttr","Attribute '"+n[e][2]+"' is without value.",ca(n[e]));if(void 0===n[e][3]&&!t.allowBooleanAttributes)return ia("InvalidAttr","boolean attribute '"+n[e][2]+"' is not allowed.",ca(n[e]));const a=n[e][2];if(!la(a))return ia("InvalidAttr","Attribute '"+a+"' is an invalid name.",ca(n[e]));if(r.hasOwnProperty(a))return ia("InvalidAttr","Attribute '"+a+"' is repeated.",ca(n[e]));r[a]=1}return!0}function oa(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let n=/\d/;for("x"===e[t]&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(";"===e[t])break;return-1}return t}function ia(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function la(e){return pr(e)}function sa(e){return pr(e)}function ua(e,t){const n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function ca(e){return e.startIndex+e[1].length}var fa=new class{constructor(e){this.externalEntities={},this.options=function(e){return Object.assign({},ur,e)}(e)}parse(e,t){if("string"==typeof e);else{if(!e.toString)throw new Error("XML data is accepted in String or Bytes[] form.");e=e.toString()}if(t){!0===t&&(t={});const n=function(e,t){t=Object.assign({},Kr,t);const n=[];let r=!1,a=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let o=0;o<e.length;o++)if("<"===e[o]&&"?"===e[o+1]){if(o+=2,o=Qr(e,o),o.err)return o}else{if("<"!==e[o]){if(Jr(e[o]))continue;return ia("InvalidChar","char '"+e[o]+"' is not expected.",ua(e,o))}{let i=o;if(o++,"!"===e[o]){o=Zr(e,o);continue}{let l=!1;"/"===e[o]&&(l=!0,o++);let s="";for(;o<e.length&&">"!==e[o]&&" "!==e[o]&&"\t"!==e[o]&&"\n"!==e[o]&&"\r"!==e[o];o++)s+=e[o];if(s=s.trim(),"/"===s[s.length-1]&&(s=s.substring(0,s.length-1),o--),!sa(s)){let t;return t=0===s.trim().length?"Invalid space after '<'.":"Tag '"+s+"' is an invalid name.",ia("InvalidTag",t,ua(e,o))}const u=na(e,o);if(!1===u)return ia("InvalidAttr","Attributes for '"+s+"' have open quote.",ua(e,o));let c=u.value;if(o=u.index,"/"===c[c.length-1]){const n=o-c.length;c=c.substring(0,c.length-1);const a=aa(c,t);if(!0!==a)return ia(a.err.code,a.err.msg,ua(e,n+a.err.line));r=!0}else if(l){if(!u.tagClosed)return ia("InvalidTag","Closing tag '"+s+"' doesn't have proper closing.",ua(e,o));if(c.trim().length>0)return ia("InvalidTag","Closing tag '"+s+"' can't have attributes or invalid starting.",ua(e,i));if(0===n.length)return ia("InvalidTag","Closing tag '"+s+"' has not been opened.",ua(e,i));{const t=n.pop();if(s!==t.tagName){let n=ua(e,t.tagStartPos);return ia("InvalidTag","Expected closing tag '"+t.tagName+"' (opened in line "+n.line+", col "+n.col+") instead of closing tag '"+s+"'.",ua(e,i))}0==n.length&&(a=!0)}}else{const l=aa(c,t);if(!0!==l)return ia(l.err.code,l.err.msg,ua(e,o-c.length+l.err.line));if(!0===a)return ia("InvalidXml","Multiple possible root nodes found.",ua(e,o));-1!==t.unpairedTags.indexOf(s)||n.push({tagName:s,tagStartPos:i}),r=!0}for(o++;o<e.length;o++)if("<"===e[o]){if("!"===e[o+1]){o++,o=Zr(e,o);continue}if("?"!==e[o+1])break;if(o=Qr(e,++o),o.err)return o}else if("&"===e[o]){const t=oa(e,o);if(-1==t)return ia("InvalidChar","char '&' is not expected.",ua(e,o));o=t}else if(!0===a&&!Jr(e[o]))return ia("InvalidXml","Extra text at the end",ua(e,o));"<"===e[o]&&o--}}}return r?1==n.length?ia("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",ua(e,n[0].tagStartPos)):!(n.length>0)||ia("InvalidXml","Invalid '"+JSON.stringify(n.map(e=>e.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):ia("InvalidXml","Start tag expected.",1)}(e,t);if(!0!==n)throw Error(`${n.err.msg}:${n.err.line}:${n.err.col}`)}const n=new Nr(this.options);n.addExternalEntities(this.externalEntities);const r=n.parseXml(e);return this.options.preserveOrder||void 0===r?r:qr(r,this.options)}addEntity(e,t){if(-1!==t.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==e.indexOf("&")||-1!==e.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===t)throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}static getMetaDataSymbol(){return mr.getMetaDataSymbol()}}({ignoreAttributes:!0,textNodeName:"#text",trimValues:!0,allowBooleanAttributes:!0});function da(e,t){if(t&&e){var n=function(n){"array"===t.properties[n].type&&e[n]&&!Array.isArray(e[n])&&(e[n]=[e[n]]),"object"===t.properties[n].type&&da(e[n],t.properties[n]),"array"===t.properties[n].type&&"object"===t.properties[n].items.type&&(Array.isArray(e[n])?e[n].forEach(function(e){return da(e,t.properties[n].items)}):da(e[n],t.properties[n].items))};for(var r in t.properties)n(r)}}function pa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.match(/```(?:\w+\n|\n)([\s\S]*?)```/),a=r?r[1].trim():e.trim();try{switch(t){case"xml":var o=fa.parse(a);return o.root&&(o=o.root),n.schema&&da(o,n.schema),o;case"json":return JSON.parse(a);default:throw new Error("Unsupported format specified: ".concat(t))}}catch(n){throw console.error("Error parsing response in format '".concat(t,"':"),n),console.error("Raw content length:","string"==typeof e?e.length:0),"xml"===t&&n.message.includes("Invalid XML")?new Error("Model response is not valid XML."):"json"===t&&n instanceof SyntaxError?new Error("Model response is not valid JSON."):new Error("Failed to parse response as ".concat(t,": ").concat(n.message))}}function ha(e){return ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ha(e)}function ma(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n="",r="  ".repeat(t),a=function(a){if(e.hasOwnProperty(a)){var o=e[a];Array.isArray(o)?o.forEach(function(e){"object"===ha(e)&&null!==e?(n+="".concat(r,"<").concat(a,">\n"),n+=ma(e,t+1),n+="".concat(r,"</").concat(a,">\n")):n+="".concat(r,"<").concat(a,">").concat(e,"</").concat(a,">\n")}):"object"===ha(o)&&null!==o?(n+="".concat(r,"<").concat(a,">\n"),n+=ma(o,t+1),n+="".concat(r,"</").concat(a,">\n")):n+="".concat(r,"<").concat(a,">").concat(o,"</").concat(a,">\n")}};for(var o in e)a(o);return n}function ga(e,t){var n=va(e);return"xml"===t?ma(n).trim():JSON.stringify(n,null,2)}function va(e){if(e.example)return e.example;switch(e.type){case"object":var t={};if(e.properties)for(var n in e.properties)t[n]=va(e.properties[n]);return t;case"array":return e.items?[va(e.items)]:[];case"string":return e.description||"string";case"number":return 0;case"boolean":return!1;default:return null}}function ya(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ba(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ba(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ka(e){return e!==dn.INCLUDE_ALL}function wa(e){return e.trim().toLowerCase()}function Sa(e){var t,n=new Set(e.allowlistBookNames.map(wa)),r=new Set(e.allowlistEntryIds.map(function(e){return Math.trunc(e)}).filter(function(e){return e>=0})),a=Object.keys(e.worldInfos).sort(function(e,t){return e.localeCompare(t)}),o=[],i=ya(a);try{var l=function(){var a,i=t.value,l=n.has(wa(i)),s=(null!==(a=e.worldInfos[i])&&void 0!==a?a:[]).filter(function(e){return!e.disable&&(l||r.has(Math.trunc(e.uid)))});if(0===s.length)return 1;var u,c=ya(s);try{for(c.s();!(u=c.n()).done;){var f,d=(null!==(f=u.value.content)&&void 0!==f?f:"").trim();d&&o.push(d)}}catch(e){c.e(e)}finally{c.f()}o.push("")};for(i.s();!(t=i.n()).done;)l()}catch(e){i.e(e)}finally{i.f()}var s=o.join("\n").trim();return s||""}function Ea(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var s=r&&r.prototype instanceof l?r:l,u=Object.create(s.prototype);return xa(u,"_invoke",function(n,r,a){var o,l,s,u=0,c=a||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,l=0,s=e,d.n=n,i}};function p(n,r){for(l=n,s=r,t=0;!f&&u&&!a&&t<c.length;t++){var a,o=c[t],p=d.p,h=o[2];n>3?(a=h===r)&&(s=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(l=0,d.v=r,d.n=o[1]):p<h&&(a=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,d.n=h,l=0))}if(a||n>1)return i;throw f=!0,r}return function(a,c,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===c&&p(c,h),l=c,s=h;(t=l<2?e:s)||!f;){o||(l?l<3?(l>1&&(d.n=-1),p(l,s)):d.n=s:d.v=s);try{if(u=2,o){if(l||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,l<2&&(l=0)}else 1===l&&(t=o.return)&&t.call(o),l<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),l=1);o=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==i)break}catch(t){o=e,l=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,a,o),!0),u}var i={};function l(){}function s(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(xa(t={},r,function(){return this}),t),f=u.prototype=l.prototype=Object.create(c);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,xa(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,xa(f,"constructor",u),xa(u,"constructor",s),s.displayName="GeneratorFunction",xa(u,a,"GeneratorFunction"),xa(f),xa(f,a,"Generator"),xa(f,r,function(){return this}),xa(f,"toString",function(){return"[object Generator]"}),(Ea=function(){return{w:o,m:d}})()}function xa(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}xa=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){xa(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},xa(e,t,n,r)}function _a(e){return _a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_a(e)}function Pa(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function Ta(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Pa(o,r,a,i,l,"next",e)}function l(e){Pa(o,r,a,i,l,"throw",e)}i(void 0)})}}function Ca(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Oa(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function Na(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||Oa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oa(e,t){if(e){if("string"==typeof e)return Aa(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Aa(e,t):void 0}}function Aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ja(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=_a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ma(e,t){for(var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(n),!0).forEach(function(t){ja(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ia(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),r=0,a=Object.entries(t);r<a.length;r++){var o,i=Na(a[r],2),l=i[0],s=i[1],u=null!==(o=n[l])&&void 0!==o?o:[];if(0!==u.length){var c,f=new Set(u.map(function(e){return Math.trunc(e.uid)})),d=u.slice(),p=Ca(s);try{for(p.s();!(c=p.n()).done;){var h=c.value,m=Math.trunc(h.uid);f.has(m)||(f.add(m),d.push(h))}}catch(e){p.e(e)}finally{p.f()}n[l]=d}else n[l]=s}return n}function Da(e){return La.apply(this,arguments)}function La(){return La=Ta(Ea().m(function e(t){var n,r,a,o,i,l,s,u,c,f,d;return Ea().w(function(e){for(;;)switch(e.p=e.n){case 0:return a=null!==(n=t.allowlistBookNames)&&void 0!==n?n:[],o=null!==(r=t.allowlistEntryIds)&&void 0!==r?r:[],i={},e.p=1,e.n=2,t.getActiveWorldInfos();case 2:if(c=l=e.v,!(u=null!==c)){e.n=3;break}u=void 0!==l;case 3:if(!u){e.n=4;break}f=l,e.n=5;break;case 4:f={};case 5:i=f,e.n=7;break;case 6:e.p=6,d=e.v,t.debug&&console.debug("zTracker: getActiveWorldInfos failed",d);case 7:if(!(a.length>0)){e.n=9;break}return s={},e.n=8,Promise.all(a.map(function(){var e=Ta(Ea().m(function e(n){var r;return Ea().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.loadBookByName(n);case 1:if(r=e.v){e.n=2;break}return e.a(2);case 2:s[r.name]=r.entries;case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()));case 8:i=Ma(i,s);case 9:return e.a(2,Sa({allowlistBookNames:a,allowlistEntryIds:o,worldInfos:i}))}},e,null,[[1,6]])})),La.apply(this,arguments)}function Ra(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return za(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?za(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function za(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Fa(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var s=r&&r.prototype instanceof l?r:l,u=Object.create(s.prototype);return Ba(u,"_invoke",function(n,r,a){var o,l,s,u=0,c=a||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,l=0,s=e,d.n=n,i}};function p(n,r){for(l=n,s=r,t=0;!f&&u&&!a&&t<c.length;t++){var a,o=c[t],p=d.p,h=o[2];n>3?(a=h===r)&&(s=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(l=0,d.v=r,d.n=o[1]):p<h&&(a=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,d.n=h,l=0))}if(a||n>1)return i;throw f=!0,r}return function(a,c,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===c&&p(c,h),l=c,s=h;(t=l<2?e:s)||!f;){o||(l?l<3?(l>1&&(d.n=-1),p(l,s)):d.n=s:d.v=s);try{if(u=2,o){if(l||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,l<2&&(l=0)}else 1===l&&(t=o.return)&&t.call(o),l<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),l=1);o=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==i)break}catch(t){o=e,l=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,a,o),!0),u}var i={};function l(){}function s(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(Ba(t={},r,function(){return this}),t),f=u.prototype=l.prototype=Object.create(c);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Ba(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,Ba(f,"constructor",u),Ba(u,"constructor",s),s.displayName="GeneratorFunction",Ba(u,a,"GeneratorFunction"),Ba(f),Ba(f,a,"Generator"),Ba(f,r,function(){return this}),Ba(f,"toString",function(){return"[object Generator]"}),(Fa=function(){return{w:o,m:d}})()}function Ba(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}Ba=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){Ba(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},Ba(e,t,n,r)}function Ha(e){return Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ha(e)}function Ua(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function $a(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Ua(o,r,a,i,l,"next",e)}function l(e){Ua(o,r,a,i,l,"throw",e)}i(void 0)})}}var Va=null;function qa(){return Ga.apply(this,arguments)}function Ga(){return(Ga=$a(Fa().m(function e(){return Fa().w(function(e){for(;;)if(0===e.n)return Va||(Va=$a(Fa().m(function e(){var t,n,r,a;return Fa().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fetch("/csrf-token",{cache:"no-cache"});case 1:if((n=e.v).ok){e.n=2;break}throw new Error("Failed to fetch CSRF token (".concat(n.status,")"));case 2:return e.n=3,n.json();case 3:if(r=e.v,a=String(null!==(t=null==r?void 0:r.token)&&void 0!==t?t:"").trim()){e.n=4;break}throw new Error("CSRF token missing in /csrf-token response");case 4:return e.a(2,a)}},e)}))()),e.a(2,Va)},e)}))).apply(this,arguments)}function Wa(e,t){if(!t||"object"!==Ha(t)||Array.isArray(t))return null;var n=Number.isFinite(Number(t.uid))?Number(t.uid):e,r=Array.isArray(t.key)?t.key.map(function(e){return String(e)}).filter(Boolean):[],a=Array.isArray(t.keysecondary)?t.keysecondary.map(function(e){return String(e)}).filter(Boolean):void 0,o="boolean"==typeof t.disable?t.disable:!1===t.enabled;return{uid:n,key:r,keysecondary:a,content:"string"==typeof t.content?t.content:"",comment:"string"==typeof t.comment?t.comment:void 0,disable:o}}function Ya(e,t){return Xa.apply(this,arguments)}function Xa(){return(Xa=$a(Fa().m(function e(t,n){var r,a,o,i,l,s,u,c,f,d,p,h,m,g;return Fa().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=String(null!=t?t:"").trim()){e.n=1;break}return e.a(2,null);case 1:return e.p=1,e.n=2,qa();case 2:return a=e.v,e.n=3,fetch("/api/worldinfo/get",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":a},body:JSON.stringify({name:r}),cache:"no-cache"});case 3:if((o=e.v).ok){e.n=4;break}return null!=n&&n.debug&&console.debug("zTracker: loadWorldInfoBookByName failed",r,o.status),e.a(2,null);case 4:return e.n=5,o.json();case 5:if(i=e.v,(l=null==i?void 0:i.entries)&&"object"===Ha(l)&&!Array.isArray(l)){e.n=6;break}return null!=n&&n.debug&&console.debug("zTracker: lorebook response missing entries",r,i),e.a(2,null);case 6:for(s=[],u=0,c=Object.entries(l);u<c.length;u++)f=Ra(c[u],2),d=f[0],p=f[1],h=Number.isFinite(Number(d))?Number(d):-1,(m=Wa(h,p))&&s.push(m);return e.a(2,{name:r,entries:s});case 7:return e.p=7,g=e.v,null!=n&&n.debug&&console.debug("zTracker: loadWorldInfoBookByName threw",r,g),e.a(2,null)}},e,null,[[1,7]])}))).apply(this,arguments)}function Ka(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ja(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ja(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ja(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Qa(e){return Qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qa(e)}function Za(e){return!!e&&"object"===Qa(e)&&!Array.isArray(e)}function eo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(Array.isArray(e))return 0===e.length?"".concat(t,"(empty)\n"):e.map(function(e){return Za(e)||Array.isArray(e)?"".concat(t,"-\n").concat(eo(e,"".concat(t,"  "))):"".concat(t,"- ").concat(JSON.stringify(e),"\n")}).join("");if(Za(e)){var n=Object.entries(e);return 0===n.length?"".concat(t,"(empty)\n"):n.map(function(e){var n=Ka(e,2),r=n[0],a=n[1];return Za(a)||Array.isArray(a)?"".concat(t).concat(r,":\n").concat(eo(a,"".concat(t,"  "))):"".concat(t).concat(r,": ").concat(JSON.stringify(a),"\n")}).join("")}return"".concat(t).concat(JSON.stringify(e),"\n")}function to(e,t){var n,r,a,o,i=t.embedZTrackerSnapshotTransformPresets,l=t.embedZTrackerSnapshotTransformPreset,s=l&&i&&i[l]||(null==i?void 0:i.default),u=null!==(n=null==s?void 0:s.input)&&void 0!==n?n:"pretty_json",c="top_level_lines"===u?function(e){if(!Za(e))return eo(e);var t=Object.entries(e).map(function(e){var t=Ka(e,2),n=t[0],r=t[1];return Za(r)||Array.isArray(r)?"".concat(n,":\n").concat(eo(r,"  ")).trimEnd():"".concat(n,": ").concat(JSON.stringify(r))}).join("\n\n");return"".concat(t,"\n")}(e):JSON.stringify(null!=e?e:{},null,2),f=null!==(r=null==s?void 0:s.pattern)&&void 0!==r?r:"",d=null!==(a=null==s?void 0:s.flags)&&void 0!==a?a:"",p=null!==(o=null==s?void 0:s.replacement)&&void 0!==o?o:"",h=(null==s?void 0:s.codeFenceLang)||("pretty_json"===u?"json":"text"),m="boolean"==typeof(null==s?void 0:s.wrapInCodeFence)?s.wrapInCodeFence:"minimal"!==l;if(!f.trim())return{lang:h,text:c,wrapInCodeFence:m};try{var g=new RegExp(f,d);return{lang:h,text:c.replace(g,p),wrapInCodeFence:m}}catch(e){return{lang:h,text:c,wrapInCodeFence:m}}}function no(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ro(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ro(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ro(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ao(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function oo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ao(Object(n),!0).forEach(function(t){io(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ao(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function io(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=lo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=lo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lo(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lo(e){return lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lo(e)}var so="schemaKey",uo="value",co="html",fo="partsOrder";function po(e){return String(e).replaceAll("&","&amp;").replaceAll('"',"&quot;").replaceAll("'","&#39;").replaceAll("<","&lt;").replaceAll(">","&gt;")}function ho(e,t){var n,r,a,o,i,l,s,u,c,f,d=t.context,p=null!==(n=t.document)&&void 0!==n?n:globalThis.document,h=null!==(r=t.handlebars)&&void 0!==r?r:sr();if(!d)throw new Error("renderTracker: context is required");if(!p)throw new Error("renderTracker: document is required");if(!h)throw new Error("renderTracker: Handlebars reference is required");var m=null===(a=d.chat)||void 0===a?void 0:a[e],g=p.querySelector('.mes[mesid="'.concat(e,'"]'));if(null==g||null===(o=g.querySelector(".mes_ztracker"))||void 0===o||o.remove(),null!=m&&null!==(i=m.extra)&&void 0!==i&&i[mn]){var v=m.extra[mn][uo],y=m.extra[mn][co];if(v&&y&&g){var b=h.compile(y,{noEscape:!0,strict:!0})({data:v}),k=p.createElement("div");k.className="mes_ztracker",k.innerHTML=b;var w=null!==(l=null===(s=m.extra)||void 0===s||null===(s=s[mn])||void 0===s?void 0:s[fo])&&void 0!==l?l:Object.keys(null!=v?v:{}),S=null!==(u=null===(c=m.extra)||void 0===c||null===(c=c[mn])||void 0===c?void 0:c.partsMeta)&&void 0!==u?u:{},E=w.map(function(e){var t=po(e),n=null==v?void 0:v[e],r=Array.isArray(n)?'<div class="ztracker-part-items" title="Regenerate individual items">'.concat(n.map(function(n,r){var a,o,i=po(function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:28;if("string"==typeof e)t=e;else if(e&&"object"===lo(e)){var r=e.name;t="string"==typeof r&&r.trim()?r:"[object]"}else t=String(e);return(t=t.replaceAll("\n"," ").trim()).length>n?"".concat(t.slice(0,n-1),""):t}(n)),l=n&&"object"===lo(n)&&"string"==typeof n.name?n.name:"",s=l?' data-ztracker-name="'.concat(po(l),'"'):"",u="string"==typeof(null==S||null===(a=S[e])||void 0===a?void 0:a.idKey)&&S[e].idKey.trim()?S[e].idKey.trim():"name",c=n&&"object"===lo(n)&&"string"==typeof n[u]?n[u]:"",f=u&&c?' data-ztracker-idkey="'.concat(po(u),'" data-ztracker-idvalue="').concat(po(c),'"'):"",d=l?"Regenerate ".concat(t," (").concat(po(l),")"):"Regenerate ".concat(t,"[").concat(r,"]"),p=(Array.isArray(null==S||null===(o=S[e])||void 0===o?void 0:o.fields)?S[e].fields:[]).map(function(e){var n=po(e),a=l?"Regenerate ".concat(t," (").concat(po(l),").").concat(n):"Regenerate ".concat(t,"[").concat(r,"].").concat(n);return'<div class="ztracker-array-item-field-regenerate-button" data-ztracker-part="'.concat(t,'" data-ztracker-index="').concat(r,'" data-ztracker-field="').concat(n,'"').concat(s).concat(f,' title="').concat(a,'">').concat(n,"</div>")}).join(""),h=p?'<div class="ztracker-array-item-fields">'.concat(p,"</div>"):"";return'<div class="ztracker-array-item-row">\n                <div class="ztracker-array-item-regenerate-button" data-ztracker-part="'.concat(t,'" data-ztracker-index="').concat(r,'"').concat(s).concat(f,' title="').concat(d,'">').concat(i,"</div>\n                ").concat(h,"\n              </div>")}).join(""),"</div>"):"";return'<div class="ztracker-part-row">\n        <div class="ztracker-part-regenerate-button" data-ztracker-part="'.concat(t,'" title="Regenerate ').concat(t,'">').concat(t,"</div>\n        ").concat(r,"\n      </div>")}).join(""),x=p.createElement("div");x.className="ztracker-controls",x.innerHTML='\n    <div class="ztracker-regenerate-button fa-solid fa-arrows-rotate" title="Regenerate Tracker"></div>\n    <details class="ztracker-parts-details" title="Regenerate individual parts">\n      <summary class="ztracker-parts-summary fa-solid fa-list"></summary>\n      <div class="ztracker-parts-list">'.concat(E,'</div>\n    </details>\n    <div class="ztracker-edit-button fa-solid fa-code" title="Edit Tracker Data"></div>\n    <div class="ztracker-delete-button fa-solid fa-trash-can" title="Delete Tracker"></div>\n  '),k.prepend(x),null===(f=g.querySelector(".mes_text"))||void 0===f||f.before(k)}}}function mo(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"You",a=structuredClone(e),o=null!==(n=t.embedZTrackerRole)&&void 0!==n?n:"user";if(t.includeLastXZTrackerMessages>0)for(var i=0;i<t.includeLastXZTrackerMessages;i++){for(var l=null,s=-1,u=a.length-2;u>=0;u--){var c,f,d=a[u],p="source"in d?null===(c=d.source)||void 0===c?void 0:c.extra:d.extra;if(!d.zTrackerFound&&null!=p&&null!==(f=p[mn])&&void 0!==f&&f[uo]){d.zTrackerFound=!0,l=d,s=u;break}}if(l){var h,m,g,v="source"in l?null===(h=l.source)||void 0===h?void 0:h.extra:l.extra,y=to((null==v||null===(m=v[mn])||void 0===m?void 0:m[uo])||{},t),b=y.lang,k=y.text,w=y.wrapInCodeFence,S=null!==(g=t.embedZTrackerSnapshotHeader)&&void 0!==g?g:"Tracker:",E=S?"".concat(S,"\n"):"",x=w?"".concat(E,"```").concat(b,"\n").concat(k,"\n```"):"".concat(E).concat(k);a.splice(s+1,0,oo(oo({content:x,role:o},"user"===o?{name:r}:{}),{},{is_user:"user"===o,is_system:"system"===o,mes:x}))}}return a}function go(e,t){var n,r;if(!e)throw new Error("applyTrackerUpdateAndRender: message is required");if(null==t||!t.render)throw new Error("applyTrackerUpdateAndRender: render callback is required");var a=!(null===(n=e.extra)||void 0===n||!n[mn]),o=a?structuredClone(null===(r=e.extra)||void 0===r?void 0:r[mn]):void 0;if(e.extra=e.extra||{},e.extra[mn]=e.extra[mn]||{},t.extensionData)for(var i=0,l=Object.entries(t.extensionData);i<l.length;i++){var s=no(l[i],2),u=s[0],c=s[1];e.extra[mn][u]=c}e.extra[mn][uo]=t.trackerData,e.extra[mn][co]=t.trackerHtml;try{t.render()}catch(t){throw a?e.extra[mn]=o:delete e.extra[mn],t}}function vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function yo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vo(Object(n),!0).forEach(function(t){bo(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function bo(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=xo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xo(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ko(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||So(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wo(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=So(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function So(e,t){if(e){if("string"==typeof e)return Eo(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Eo(e,t):void 0}}function Eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function xo(e){return xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xo(e)}function _o(e){return"string"==typeof e?e.trim()?[e]:[]:Array.isArray(e)?e.filter(function(e){return"string"==typeof e}).map(function(e){return e.trim()}).filter(Boolean):[]}function Po(e){var t=function(e){var t=null==e?void 0:e.properties;return t&&"object"===xo(t)?Object.keys(t):[]}(e);if(t.length<=1)return t;var n=null==e?void 0:e.properties;if(!n||"object"!==xo(n))return t;var r,a=new Set(t),o=new Map,i=wo(t);try{for(i.s();!(r=i.n()).done;){var l=r.value,s=n[l],u=_o(null==s?void 0:s["x-ztracker-dependsOn"]).filter(function(e){return a.has(e)});o.set(l,new Set(u))}}catch(e){i.e(e)}finally{i.f()}var c,f=new Map,d=new Map,p=wo(t);try{for(p.s();!(c=p.n()).done;){var h=c.value;f.set(h,0),d.set(h,new Set)}}catch(e){p.e(e)}finally{p.f()}var m,g=wo(o.entries());try{for(g.s();!(m=g.n()).done;){var v,y=ko(m.value,2),b=y[0],k=wo(y[1]);try{for(k.s();!(v=k.n()).done;){var w,S=v.value;f.set(b,(null!==(w=f.get(b))&&void 0!==w?w:0)+1),d.get(S).add(b)}}catch(e){k.e(e)}finally{k.f()}}}catch(e){g.e(e)}finally{g.f()}var E=new Map(t.map(function(e,t){return[e,t]})),x=t.filter(function(e){var t;return 0===(null!==(t=f.get(e))&&void 0!==t?t:0)});x.sort(function(e,t){return E.get(e)-E.get(t)});for(var _=[];x.length;){var P,T=x.shift();_.push(T);var C,N=wo(null!==(P=d.get(T))&&void 0!==P?P:[]);try{for(N.s();!(C=N.n()).done;){var O,A=C.value,I=(null!==(O=f.get(A))&&void 0!==O?O:0)-1;f.set(A,I),0===I&&(x.push(A),x.sort(function(e,t){return E.get(e)-E.get(t)}))}}catch(e){N.e(e)}finally{N.f()}}return _.length!==t.length?t:_}function To(e,t){var n,r,a,o=null==e||null===(n=e.properties)||void 0===n?void 0:n[t];if(!o)throw new Error("Unknown schema part: ".concat(t));var i={$schema:null!==(r=null==e?void 0:e.$schema)&&void 0!==r?r:"http://json-schema.org/draft-07/schema#",title:"".concat(null!==(a=null==e?void 0:e.title)&&void 0!==a?a:"SceneTracker","Part"),type:"object",properties:bo({},t,o),required:[t]};return null!=e&&e.definitions&&(i.definitions=e.definitions),null!=e&&e.$defs&&(i.$defs=e.$defs),i}function Co(e,t){var n,r,a,o=null==e||null===(n=e.properties)||void 0===n?void 0:n[t];if(!o)throw new Error("Unknown schema part: ".concat(t));var i=null==o?void 0:o.items;if(!i)throw new Error("Schema part is not an array with items: ".concat(t));var l={$schema:null!==(r=null==e?void 0:e.$schema)&&void 0!==r?r:"http://json-schema.org/draft-07/schema#",title:"".concat(null!==(a=null==e?void 0:e.title)&&void 0!==a?a:"SceneTracker").concat(t,"Item"),type:"object",properties:{item:i},required:["item"]};return null!=e&&e.definitions&&(l.definitions=e.definitions),null!=e&&e.$defs&&(l.$defs=e.$defs),l}function No(e,t,n){var r,a,o,i=null==e||null===(r=e.properties)||void 0===r?void 0:r[t];if(!i)throw new Error("Unknown schema part: ".concat(t));var l=null==i?void 0:i.items;if(!l)throw new Error("Schema part is not an array with items: ".concat(t));if("object"!==(null==l?void 0:l.type))throw new Error("Schema array items are not an object: ".concat(t));var s=null==l?void 0:l.properties;if(!s||"object"!==xo(s))throw new Error("Schema array items missing properties: ".concat(t));var u=s[n];if(!u)throw new Error("Unknown array item field: ".concat(t,".").concat(n));var c={$schema:null!==(a=null==e?void 0:e.$schema)&&void 0!==a?a:"http://json-schema.org/draft-07/schema#",title:"".concat(null!==(o=null==e?void 0:e.title)&&void 0!==o?o:"SceneTracker").concat(t,"Item").concat(n,"Field"),type:"object",properties:{value:u},required:["value"]};return null!=e&&e.definitions&&(c.definitions=e.definitions),null!=e&&e.$defs&&(c.$defs=e.$defs),c}function Oo(e,t,n){if(!n||"object"!==xo(n))throw new Error("Part response must be an object");if(!(t in n))throw new Error("Part response missing key: ".concat(t));return yo(yo({},e&&"object"===xo(e)?e:{}),{},bo({},t,n[t]))}function Ao(e,t,n,r){var a=e&&"object"===xo(e)?structuredClone(e):{},o=a[t];if(!Array.isArray(o))throw new Error("Tracker field is not an array: ".concat(t));if(n<0||n>=o.length)throw new Error("Array index out of range for ".concat(t,": ").concat(n));return o[n]=r,a}function Io(e,t,n,r,a){var o=e&&"object"===xo(e)?structuredClone(e):{},i=o[t];if(!Array.isArray(i))throw new Error("Tracker field is not an array: ".concat(t));if(n<0||n>=i.length)throw new Error("Array index out of range for ".concat(t,": ").concat(n));var l=i[n];if(!l||"object"!==xo(l)||Array.isArray(l))throw new Error("Array item is not an object at ".concat(t,"[").concat(n,"]"));if(!r)throw new Error("Field key is required");return l[r]=a,i[n]=l,o}function jo(e,t){if(!Array.isArray(e))return-1;if(!t)return-1;var n=e.findIndex(function(e){return e&&"object"===xo(e)&&"string"==typeof e.name&&e.name===t});if(-1!==n)return n;var r=t.toLowerCase(),a=[];return e.forEach(function(e,t){e&&"object"===xo(e)&&"string"==typeof e.name&&e.name.toLowerCase()===r&&a.push(t)}),1===a.length?a[0]:-1}function Mo(e,t,n){if(!Array.isArray(e))return-1;if(!t)return-1;if(!n)return-1;var r=e.findIndex(function(e){return e&&"object"===xo(e)&&"string"==typeof e[t]&&e[t]===n});if(-1!==r)return r;var a=n.toLowerCase(),o=[];return e.forEach(function(e,n){e&&"object"===xo(e)&&"string"==typeof e[t]&&e[t].toLowerCase()===a&&o.push(n)}),1===o.length?o[0]:-1}function Do(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var s=r&&r.prototype instanceof l?r:l,u=Object.create(s.prototype);return Lo(u,"_invoke",function(n,r,a){var o,l,s,u=0,c=a||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,l=0,s=e,d.n=n,i}};function p(n,r){for(l=n,s=r,t=0;!f&&u&&!a&&t<c.length;t++){var a,o=c[t],p=d.p,h=o[2];n>3?(a=h===r)&&(s=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(l=0,d.v=r,d.n=o[1]):p<h&&(a=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,d.n=h,l=0))}if(a||n>1)return i;throw f=!0,r}return function(a,c,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===c&&p(c,h),l=c,s=h;(t=l<2?e:s)||!f;){o||(l?l<3?(l>1&&(d.n=-1),p(l,s)):d.n=s:d.v=s);try{if(u=2,o){if(l||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,l<2&&(l=0)}else 1===l&&(t=o.return)&&t.call(o),l<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),l=1);o=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==i)break}catch(t){o=e,l=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,a,o),!0),u}var i={};function l(){}function s(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(Lo(t={},r,function(){return this}),t),f=u.prototype=l.prototype=Object.create(c);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Lo(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,Lo(f,"constructor",u),Lo(u,"constructor",s),s.displayName="GeneratorFunction",Lo(u,a,"GeneratorFunction"),Lo(f),Lo(f,a,"Generator"),Lo(f,r,function(){return this}),Lo(f,"toString",function(){return"[object Generator]"}),(Do=function(){return{w:o,m:d}})()}function Lo(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}Lo=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){Lo(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},Lo(e,t,n,r)}function Ro(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function zo(e){var t=xn({importMetaUrl:e.importMetaUrl,fallbackFolderName:e.fallbackFolderName}),n="/scripts/extensions/third-party/".concat(t);return new URL("".concat(n,"/").concat(e.templatePathNoExt,".html"),window.location.origin).toString()}function Fo(e){return Bo.apply(this,arguments)}function Bo(){return Bo=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Ro(o,r,a,i,l,"next",e)}function l(e){Ro(o,r,a,i,l,"throw",e)}i(void 0)})}}(Do().m(function e(t){var n,r,a,o;return Do().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=zo(t),e.p=1,e.n=2,fetch(n,{cache:"no-store"});case 2:return r=e.v,e.a(2,{templatePathNoExt:t.templatePathNoExt,url:n,ok:r.ok,status:r.status});case 3:return e.p=3,o=e.v,a=o instanceof Error?o.message:String(o),e.a(2,{templatePathNoExt:t.templatePathNoExt,url:n,ok:!1,status:null,error:a})}},e,null,[[1,3]])})),Bo.apply(this,arguments)}function Ho(e){return function(e){var t=xn(e);return"third-party/".concat(t)}({importMetaUrl:e.importMetaUrl,fallbackFolderName:e.fallbackFolderName})}function Uo(e){try{return!!e.getSettings().debugLogging}catch(e){return!1}}function $o(e){var t;if(Uo(e)){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];(t=console).debug.apply(t,["zTracker:"].concat(r))}}function Vo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}(e,t)||Go(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qo(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Go(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function Go(e,t){if(e){if("string"==typeof e)return Wo(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wo(e,t):void 0}}function Wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Yo(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var s=r&&r.prototype instanceof l?r:l,u=Object.create(s.prototype);return Xo(u,"_invoke",function(n,r,a){var o,l,s,u=0,c=a||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,l=0,s=e,d.n=n,i}};function p(n,r){for(l=n,s=r,t=0;!f&&u&&!a&&t<c.length;t++){var a,o=c[t],p=d.p,h=o[2];n>3?(a=h===r)&&(s=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(l=0,d.v=r,d.n=o[1]):p<h&&(a=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,d.n=h,l=0))}if(a||n>1)return i;throw f=!0,r}return function(a,c,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===c&&p(c,h),l=c,s=h;(t=l<2?e:s)||!f;){o||(l?l<3?(l>1&&(d.n=-1),p(l,s)):d.n=s:d.v=s);try{if(u=2,o){if(l||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,l<2&&(l=0)}else 1===l&&(t=o.return)&&t.call(o),l<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),l=1);o=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==i)break}catch(t){o=e,l=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,a,o),!0),u}var i={};function l(){}function s(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(Xo(t={},r,function(){return this}),t),f=u.prototype=l.prototype=Object.create(c);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Xo(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,Xo(f,"constructor",u),Xo(u,"constructor",s),s.displayName="GeneratorFunction",Xo(u,a,"GeneratorFunction"),Xo(f),Xo(f,a,"Generator"),Xo(f,r,function(){return this}),Xo(f,"toString",function(){return"[object Generator]"}),(Yo=function(){return{w:o,m:d}})()}function Xo(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}Xo=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){Xo(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},Xo(e,t,n,r)}function Ko(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function Jo(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Ko(o,r,a,i,l,"next",e)}function l(e){Ko(o,r,a,i,l,"throw",e)}i(void 0)})}}function Qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qo(Object(n),!0).forEach(function(t){ei(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ei(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ti(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ti(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ti(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ti(e){return ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ti(e)}var ni=(e=>(e.APP_READY="app_ready",e.EXTRAS_CONNECTED="extras_connected",e.MESSAGE_SWIPED="message_swiped",e.MESSAGE_SENT="message_sent",e.MESSAGE_RECEIVED="message_received",e.MESSAGE_EDITED="message_edited",e.MESSAGE_DELETED="message_deleted",e.MESSAGE_UPDATED="message_updated",e.MESSAGE_FILE_EMBEDDED="message_file_embedded",e.MORE_MESSAGES_LOADED="more_messages_loaded",e.IMPERSONATE_READY="impersonate_ready",e.CHAT_CHANGED="chat_id_changed",e.GENERATION_AFTER_COMMANDS="GENERATION_AFTER_COMMANDS",e.GENERATION_STARTED="generation_started",e.GENERATION_STOPPED="generation_stopped",e.GENERATION_ENDED="generation_ended",e.EXTENSIONS_FIRST_LOAD="extensions_first_load",e.EXTENSION_SETTINGS_LOADED="extension_settings_loaded",e.SETTINGS_LOADED="settings_loaded",e.SETTINGS_UPDATED="settings_updated",e.GROUP_UPDATED="group_updated",e.MOVABLE_PANELS_RESET="movable_panels_reset",e.SETTINGS_LOADED_BEFORE="settings_loaded_before",e.SETTINGS_LOADED_AFTER="settings_loaded_after",e.CHATCOMPLETION_SOURCE_CHANGED="chatcompletion_source_changed",e.CHATCOMPLETION_MODEL_CHANGED="chatcompletion_model_changed",e.OAI_PRESET_CHANGED_BEFORE="oai_preset_changed_before",e.OAI_PRESET_CHANGED_AFTER="oai_preset_changed_after",e.OAI_PRESET_EXPORT_READY="oai_preset_export_ready",e.OAI_PRESET_IMPORT_READY="oai_preset_import_ready",e.WORLDINFO_SETTINGS_UPDATED="worldinfo_settings_updated",e.WORLDINFO_UPDATED="worldinfo_updated",e.CHARACTER_EDITED="character_edited",e.CHARACTER_PAGE_LOADED="character_page_loaded",e.CHARACTER_GROUP_OVERLAY_STATE_CHANGE_BEFORE="character_group_overlay_state_change_before",e.CHARACTER_GROUP_OVERLAY_STATE_CHANGE_AFTER="character_group_overlay_state_change_after",e.USER_MESSAGE_RENDERED="user_message_rendered",e.CHARACTER_MESSAGE_RENDERED="character_message_rendered",e.FORCE_SET_BACKGROUND="force_set_background",e.CHAT_DELETED="chat_deleted",e.CHAT_CREATED="chat_created",e.GROUP_CHAT_DELETED="group_chat_deleted",e.GROUP_CHAT_CREATED="group_chat_created",e.GENERATE_BEFORE_COMBINE_PROMPTS="generate_before_combine_prompts",e.GENERATE_AFTER_COMBINE_PROMPTS="generate_after_combine_prompts",e.GENERATE_AFTER_DATA="generate_after_data",e.GROUP_MEMBER_DRAFTED="group_member_drafted",e.GROUP_WRAPPER_STARTED="group_wrapper_started",e.GROUP_WRAPPER_FINISHED="group_wrapper_finished",e.WORLD_INFO_ACTIVATED="world_info_activated",e.TEXT_COMPLETION_SETTINGS_READY="text_completion_settings_ready",e.CHAT_COMPLETION_SETTINGS_READY="chat_completion_settings_ready",e.CHAT_COMPLETION_PROMPT_READY="chat_completion_prompt_ready",e.CHARACTER_FIRST_MESSAGE_SELECTED="character_first_message_selected",e.CHARACTER_DELETED="characterDeleted",e.CHARACTER_DUPLICATED="character_duplicated",e.CHARACTER_RENAMED="character_renamed",e.SMOOTH_STREAM_TOKEN_RECEIVED="stream_token_received",e.STREAM_TOKEN_RECEIVED="stream_token_received",e.STREAM_REASONING_DONE="stream_reasoning_done",e.FILE_ATTACHMENT_DELETED="file_attachment_deleted",e.WORLDINFO_FORCE_ACTIVATE="worldinfo_force_activate",e.OPEN_CHARACTER_LIBRARY="open_character_library",e.ONLINE_STATUS_CHANGED="online_status_changed",e.IMAGE_SWIPED="image_swiped",e.CONNECTION_PROFILE_LOADED="connection_profile_loaded",e.TOOL_CALLS_PERFORMED="tool_calls_performed",e.TOOL_CALLS_RENDERED="tool_calls_rendered",e))(ni||{});function ri(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var s=r&&r.prototype instanceof l?r:l,u=Object.create(s.prototype);return ai(u,"_invoke",function(n,r,a){var o,l,s,u=0,c=a||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return o=t,l=0,s=e,d.n=n,i}};function p(n,r){for(l=n,s=r,t=0;!f&&u&&!a&&t<c.length;t++){var a,o=c[t],p=d.p,h=o[2];n>3?(a=h===r)&&(s=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(l=0,d.v=r,d.n=o[1]):p<h&&(a=n<3||o[0]>r||r>h)&&(o[4]=n,o[5]=r,d.n=h,l=0))}if(a||n>1)return i;throw f=!0,r}return function(a,c,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===c&&p(c,h),l=c,s=h;(t=l<2?e:s)||!f;){o||(l?l<3?(l>1&&(d.n=-1),p(l,s)):d.n=s:d.v=s);try{if(u=2,o){if(l||(a="next"),t=o[a]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,l<2&&(l=0)}else 1===l&&(t=o.return)&&t.call(o),l<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),l=1);o=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==i)break}catch(t){o=e,l=1,s=t}finally{u=1}}return{value:t,done:f}}}(n,a,o),!0),u}var i={};function l(){}function s(){}function u(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(ai(t={},r,function(){return this}),t),f=u.prototype=l.prototype=Object.create(c);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,ai(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=u,ai(f,"constructor",u),ai(u,"constructor",s),s.displayName="GeneratorFunction",ai(u,a,"GeneratorFunction"),ai(f),ai(f,a,"Generator"),ai(f,r,function(){return this}),ai(f,"toString",function(){return"[object Generator]"}),(ri=function(){return{w:o,m:d}})()}function ai(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}ai=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){ai(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},ai(e,t,n,r)}function oi(e){return function(e){if(Array.isArray(e))return ii(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ii(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ii(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ii(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function li(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}var si=[pn.RESPONSES,pn.BOTH],ui=[pn.INPUT,pn.BOTH];function ci(e){return Math.max(0,Math.min(255,Math.round(e)))}function fi(e){var t=(e||"").trim().toLowerCase();if(!t)return null;if("transparent"===t)return{r:0,g:0,b:0,a:0};var n=t.match(/^rgba?\(([^)]+)\)$/);if(!n)return null;var r=n[1].split(",").map(function(e){return e.trim()});if(r.length<3)return null;var a=Number(r[0]),o=Number(r[1]),i=Number(r[2]),l=r.length>=4?Number(r[3]):1;return[a,o,i,l].some(function(e){return Number.isNaN(e)})?null:{r:ci(a),g:ci(o),b:ci(i),a:Math.max(0,Math.min(1,l))}}function di(){var e,t,n,r;if("undefined"!=typeof document){var a=function(e){for(var t=e;t;){var n=fi(getComputedStyle(t).backgroundColor);if(n&&n.a>.05)return n;t=t.parentElement}var r=fi(getComputedStyle(document.body).backgroundColor);if(r&&r.a>.05)return r;var a=fi(getComputedStyle(document.documentElement).backgroundColor);return a&&a.a>.05?a:{r:0,g:0,b:0,a:1}}(null!==(e=null!==(t=null!==(n=null!==(r=document.querySelector("#chat"))&&void 0!==r?r:document.querySelector("#chatLog"))&&void 0!==n?n:document.querySelector(".chat"))&&void 0!==t?t:document.querySelector(".mes"))&&void 0!==e?e:document.body);if(a){var o,i=(.2126*(o=a).r+.7152*o.g+.0722*o.b)/255>.6,l=i?.96:.92,s=document.documentElement;s.style.setProperty("--ztracker-menu-bg","rgba(".concat(a.r,", ").concat(a.g,", ").concat(a.b,", ").concat(l,")")),s.style.setProperty("--ztracker-menu-border",i?"rgba(0, 0, 0, 0.18)":"rgba(255, 255, 255, 0.12)"),s.style.setProperty("--ztracker-menu-part-bg",i?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.06)"),s.style.setProperty("--ztracker-menu-item-bg",i?"rgba(0, 0, 0, 0.03)":"rgba(255, 255, 255, 0.03)"),s.style.setProperty("--ztracker-menu-hover-bg",i?"rgba(0, 0, 0, 0.08)":"rgba(255, 255, 255, 0.10)")}}}function pi(){if("undefined"!=typeof document&&"undefined"!=typeof MutationObserver){var e,t=new MutationObserver(function(){return e&&window.clearTimeout(e),void(e=window.setTimeout(function(){e=void 0,di()},50))});t.observe(document.documentElement,{attributes:!0,attributeFilter:["class","style"]}),t.observe(document.body,{attributes:!0,attributeFilter:["class","style"]}),di()}}function hi(){return hi=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){li(o,r,a,i,l,"next",e)}function l(e){li(o,r,a,i,l,"throw",e)}i(void 0)})}}(ri().m(function e(t){var n,r,a,o,i,l,s;return ri().w(function(e){for(;;)switch(e.n){case 0:return r=t.globalContext,a=t.settingsManager,o=t.actions,i=t.renderTrackerWithDeps,pi(),(l=document.createElement("div")).title="zTracker",l.className="mes_button mes_ztracker_button fa-solid fa-truck-moving interactable",l.tabIndex=0,null===(n=document.querySelector("#message_template .mes_buttons .extraMesButtons"))||void 0===n||n.prepend(l),document.addEventListener("click",function(e){var t=e.target,n=t.closest(".mes");if(n){var r=Number(n.getAttribute("mesid"));if(!isNaN(r)){var a=t.closest(".ztracker-array-item-field-regenerate-button");if(a){var i,l,s,u,c,f,d=null!==(i=a.getAttribute("data-ztracker-part"))&&void 0!==i?i:"",p=null!==(l=a.getAttribute("data-ztracker-index"))&&void 0!==l?l:"",h=Number(p),m=null!==(s=a.getAttribute("data-ztracker-name"))&&void 0!==s?s:"",g=null!==(u=a.getAttribute("data-ztracker-idkey"))&&void 0!==u?u:"",v=null!==(c=a.getAttribute("data-ztracker-idvalue"))&&void 0!==c?c:"",y=null!==(f=a.getAttribute("data-ztracker-field"))&&void 0!==f?f:"";d&&y&&g&&v&&"generateTrackerArrayItemFieldByIdentity"in o?o.generateTrackerArrayItemFieldByIdentity(r,d,g,v,y):d&&y&&m&&"generateTrackerArrayItemFieldByName"in o?o.generateTrackerArrayItemFieldByName(r,d,m,y):d&&y&&!isNaN(h)&&"generateTrackerArrayItemField"in o&&o.generateTrackerArrayItemField(r,d,h,y)}else{var b=t.closest(".ztracker-array-item-regenerate-button");if(b){var k,w,S,E,x,_=null!==(k=b.getAttribute("data-ztracker-part"))&&void 0!==k?k:"",P=null!==(w=b.getAttribute("data-ztracker-index"))&&void 0!==w?w:"",T=Number(P),C=null!==(S=b.getAttribute("data-ztracker-name"))&&void 0!==S?S:"",N=null!==(E=b.getAttribute("data-ztracker-idkey"))&&void 0!==E?E:"",O=null!==(x=b.getAttribute("data-ztracker-idvalue"))&&void 0!==x?x:"";_&&N&&O&&"generateTrackerArrayItemByIdentity"in o?o.generateTrackerArrayItemByIdentity(r,_,N,O):_&&C?o.generateTrackerArrayItemByName(r,_,C):_&&!isNaN(T)&&o.generateTrackerArrayItem(r,_,T)}else{var A=t.closest(".ztracker-part-regenerate-button");if(A){var I,j=null!==(I=A.getAttribute("data-ztracker-part"))&&void 0!==I?I:"";j&&o.generateTrackerPart(r,j)}else t.classList.contains("mes_ztracker_button")?o.generateTracker(r):t.classList.contains("ztracker-edit-button")?o.editTracker(r):t.classList.contains("ztracker-regenerate-button")?o.generateTracker(r):t.classList.contains("ztracker-delete-button")&&o.deleteTracker(r)}}}}}),e.n=1,o.renderExtensionTemplates();case 1:s=a.getSettings(),r.eventSource.on(ni.CHARACTER_MESSAGE_RENDERED,function(e){return si.includes(s.autoMode)&&o.generateTracker(e)}),r.eventSource.on(ni.USER_MESSAGE_RENDERED,function(e){return ui.includes(s.autoMode)&&o.generateTracker(e)}),r.eventSource.on(ni.CHAT_CHANGED,function(){var e=r.saveChat,t=!1;r.chat.forEach(function(e,n){try{i(n)}catch(a){var r;console.error("Error rendering zTracker on message ".concat(n,", removing data:"),a),Vt("error","A zTracker template failed to render. Removing tracker from the message."),null!=e&&null!==(r=e.extra)&&void 0!==r&&r[mn]&&(delete e.extra[mn],t=!0)}}),t&&e()}),globalThis.ztrackerGenerateInterceptor=function(e){var t=mo(e,a.getSettings());e.length=0,e.push.apply(e,oi(t))};case 2:return e.a(2)}},e)})),hi.apply(this,arguments)}var mi=SillyTavern.getContext(),gi=new class{constructor(){nn(this,"requestMap"),this.requestMap=new Map}async abortRequest(e){var t;const n=this.requestMap.get(e);if(n){if(n.abortController)try{n.abortController.abort()}catch{}null!=(t=n.options)&&t.onFinish&&await n.options.onFinish(e),this.requestMap.delete(e)}}async generateRequest(e,t){var n;const r=SillyTavern.getContext(),a=r.uuidv4(),o=(null==(n=null==e?void 0:e.custom)?void 0:n.stream)??!1;if(this.requestMap.set(a,{abortController:null==t?void 0:t.abortController,isStream:o,options:t}),o)try{const n=await r.ConnectionManagerRequestService.sendRequest(e.profileId,e.prompt,e.maxTokens,e.custom,e.overridePayload);let o;null!=t&&t.onStart&&await t.onStart(a);for await(const e of n())o=e,null!=t&&t.onEntry&&await t.onEntry(a,e);null!=t&&t.onFinish&&await t.onFinish(a,o)}catch(e){null!=t&&t.onFinish&&await t.onFinish(a,void 0,e)}finally{this.requestMap.delete(a)}else try{null!=t&&t.onStart&&await t.onStart(a);const n=await r.ConnectionManagerRequestService.sendRequest(e.profileId,e.prompt,e.maxTokens,e.custom,e.overridePayload);this.requestMap.get(a)&&(null!=t&&t.onEntry&&await t.onEntry(a,n),null!=t&&t.onFinish&&await t.onFinish(a,n))}catch(e){null!=t&&t.onFinish&&await t.onFinish(a,void 0,e)}finally{this.requestMap.delete(a)}return a}getActiveRequest(e){var t;return null==(t=this.requestMap.get(e))?void 0:t.abortController}getAllActiveRequests(){const e=new Map;for(const[t,n]of this.requestMap)e.set(t,n.abortController);return e}},vi=new Map,yi=function(e){return ho(e,{context:mi,document,handlebars:sr()})};sr().helpers.join||sr().registerHelper("join",function(e,t){return Array.isArray(e)?e.join("string"==typeof t?t:", "):""}),or.initializeSettings().then(function(){var e=function(e){var t=e.globalContext,n=e.settingsManager,r=e.generator,a=e.pendingRequests,o=e.renderTrackerWithDeps,i=e.importMetaUrl,l=new Map;function s(e){var t={},n=null==e?void 0:e.properties;if(!n||"object"!==ti(n))return t;for(var r=function(){var r=o[a],i=n[r];if("array"===(null==i?void 0:i.type)){var l,s,u=function(e,t){var n,r=null==e||null===(n=e.properties)||void 0===n?void 0:n[t],a=null==r?void 0:r["x-ztracker-idKey"];return"string"==typeof a&&a.trim()?a.trim():"name"}(e,r),c="object"===(null==i||null===(l=i.items)||void 0===l?void 0:l.type)?null==i||null===(s=i.items)||void 0===s?void 0:s.properties:void 0,f=c&&"object"===ti(c)?Object.keys(c).filter(function(e){return e!==u&&"name"!==e}):void 0;t[r]=Zo({idKey:u},null!=f&&f.length?{fields:f}:{})}},a=0,o=Object.keys(n);a<o.length;a++)r();return t}function u(e){var t=document.querySelector('.mes[mesid="'.concat(e,'"]')),n=null==t?void 0:t.querySelector(".mes_ztracker");if(!n)return[];var r=n.querySelectorAll("details");return Array.from(r).map(function(e){return e.open})}function c(e,t){if(t.length){var n=document.querySelector('.mes[mesid="'.concat(e,'"]')),r=null==n?void 0:n.querySelector(".mes_ztracker");r&&r.querySelectorAll("details").forEach(function(e,n){void 0!==t[n]&&(e.open=t[n])})}}function f(e){if(!a.has(e))return!1;var t=a.get(e);r.abortRequest(t);var n=l.get(e);return n&&(n.cancelled=!0),Vt("info","Tracker generation cancelled."),!0}function d(e,t){return function(n,o){return new Promise(function(i,l){var s=new AbortController;r.generateRequest({profileId:t.profileId,prompt:n,maxTokens:t.maxResponseToken,custom:{signal:s.signal},overridePayload:Zo({},o)},{abortController:s,onStart:function(t){a.set(e,t)},onFinish:function(t,n,r){return a.delete(e),r?l(r):n?void i(n):l(new DOMException("Request aborted by user","AbortError"))}})})}}function p(e,t,n){if(t&&"object"===ti(t))try{var r=JSON.stringify(t,null,2);e.push({role:"system",content:"".concat(n,"\n\n```json\n").concat(r,"\n```")})}catch(e){}}function h(e){return m.apply(this,arguments)}function m(){return(m=Jo(Yo().m(function e(r){var a,o,i,l,s,u,c,f,d,p,h,m,g,v,y,b,k,w,S,E,x,_,P,T,N,O,A;return Yo().w(function(e){for(;;)switch(e.p=e.n){case 0:if(l=t.chat[r]){e.n=1;break}throw new Error("Message with ID ".concat(r," not found."));case 1:if((s=n.getSettings()).profileId){e.n=2;break}throw new Error("Please select a connection profile in settings.");case 2:if(u=SillyTavern.getContext(),c=u.chatMetadata,f=t.extensionSettings,d=t.CONNECT_API_MAP,c[mn]=c[mn]||{},c[mn][so]=c[mn][so]||s.schemaPreset,p=s.schemaPresets[s.schemaPreset].value,h=s.schemaPresets[s.schemaPreset].html,m=null===(a=f.connectionManager)||void 0===a||null===(a=a.profiles)||void 0===a?void 0:a.find(function(e){return e.id===s.profileId})){e.n=3;break}throw new Error("Selected connection profile not found. Please re-select a profile in zTracker settings.");case 3:if(m.api){e.n=4;break}throw new Error("Selected connection profile is missing an API. Please edit the profile in SillyTavern settings.");case 4:if(null!=(g=d[m.api])&&g.selected){e.n=5;break}throw new Error("Unsupported or unknown API for prompt building: ".concat(String(m.api)));case 5:return v=-1!==(v=C.characters.findIndex(function(e){return e.avatar===l.original_avatar}))?v:void 0,y=null!==(o=s.trackerWorldInfoPolicyMode)&&void 0!==o?o:dn.INCLUDE_ALL,b=ka(y),e.n=6,sn(g.selected,{targetCharacterId:v,messageIndexesBetween:{end:r,start:s.includeLastXMessages>0?Math.max(0,r-s.includeLastXMessages):0},presetName:null==m?void 0:m.preset,contextName:null==m?void 0:m.context,instructName:null==m?void 0:m.instruct,syspromptName:null==m?void 0:m.sysprompt,includeNames:!!M.selected_group,ignoreWorldInfo:b});case 6:if(k=e.v,w=mo(k.result,s),$o(n,"prompt built",{ignoreWorldInfo:b,messageCount:w.length,roles:w.map(function(e){return e.role})}),y!==dn.ALLOWLIST){e.n=10;break}if(x=null!==(S=s.trackerWorldInfoAllowlistBookNames)&&void 0!==S?S:[],_=null!==(E=s.trackerWorldInfoAllowlistEntryIds)&&void 0!==E?E:[],!(x.length>0||_.length>0)){e.n=10;break}return e.p=7,$o(n,"allowlist injection starting",{allowlistBookNames:x,allowlistEntryIds:_,characterId:v}),e.n=8,Da({allowlistBookNames:x,allowlistEntryIds:_,debug:!!s.debugLogging,getActiveWorldInfos:function(){return un(["global","chat","character","persona"],!0,v)},loadBookByName:function(e){return Ya(e,{debug:!!s.debugLogging})}});case 8:(P=e.v)?(T=w.findIndex(function(e){return"system"!==e.role}),N=-1===T?w.length:T,w.splice(N,0,{role:"system",content:P}),$o(n,"allowlist injected",{insertAt:N,systemCount:w.filter(function(e){return"system"===e.role}).length,injectedLength:P.length,allowlistBookNames:x,preview:P.slice(0,200)})):$o(n,"allowlist produced empty worldInfoText",{allowlistBookNames:x,allowlistEntryIds:_}),e.n=10;break;case 9:e.p=9,A=e.v,console.warn("zTracker: failed to load allowlisted World Info; proceeding without it.",A);case 10:return O=null==l||null===(i=l.extra)||void 0===i||null===(i=i[mn])||void 0===i?void 0:i[uo],e.a(2,{message:l,settings:s,chatJsonValue:p,chatHtmlValue:h,messages:w,existingTracker:O})}},e,null,[[7,9]])}))).apply(this,arguments)}function g(){return(g=Jo(Yo().m(function e(n){var r,a;return Yo().w(function(e){for(;;)switch(e.n){case 0:if(null!=(a=t.chat[n])&&null!==(r=a.extra)&&void 0!==r&&r[mn]){e.n=1;break}return e.a(2);case 1:return e.n=2,t.Popup.show.confirm("Delete Tracker","Are you sure you want to delete the tracker data for this message? This cannot be undone.");case 2:if(!e.v){e.n=4;break}return delete a.extra[mn],e.n=3,t.saveChat();case 3:o(n),Vt("success","Tracker data deleted.");case 4:return e.a(2)}},e)}))).apply(this,arguments)}function v(){return v=Jo(Yo().m(function e(n){var r,a,i,l;return Yo().w(function(e){for(;;)switch(e.n){case 0:if(null!=(a=t.chat[n])&&null!==(r=a.extra)&&void 0!==r&&null!==(r=r[mn])&&void 0!==r&&r[uo]){e.n=1;break}return e.a(2);case 1:i=a.extra[mn][uo],t.callGenericPopup('\n        <div style="display: flex; flex-direction: column; gap: 8px;">\n            <label for="ztracker-edit-textarea">Edit Tracker JSON:</label>\n            <textarea id="ztracker-edit-textarea" class="text_pole" rows="15" style="width: 100%; resize: vertical;"></textarea>\n        </div>\n    ',_.CONFIRM,"Edit Tracker",{okButton:"Save",onClose:function(){var e=Jo(Yo().m(function e(r){var i,l,s,u,c,f,d,p;return Yo().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r.result!==P.AFFIRMATIVE){e.n=4;break}if(!(i=r.content.querySelector("#ztracker-edit-textarea"))){e.n=4;break}return e.p=1,l=JSON.parse(i.value),a.extra[mn][uo]=l,e.n=2,t.saveChat();case 2:s=[],u=document.querySelector('.mes[mesid="'.concat(n,'"]')),(c=null==u?void 0:u.querySelector(".mes_ztracker"))&&(f=c.querySelectorAll("details"),s=Array.from(f).map(function(e){return e.open})),o(n),s.length>0&&(d=null==u?void 0:u.querySelector(".mes_ztracker"))&&d.querySelectorAll("details").forEach(function(e,t){void 0!==s[t]&&(e.open=s[t])}),Vt("success","Tracker data updated."),e.n=4;break;case 3:e.p=3,p=e.v,console.error("Error parsing new tracker data:",p),Vt("error","Invalid JSON. Changes were not saved.");case 4:return e.a(2)}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}()}),(l=document.querySelector("#ztracker-edit-textarea"))&&(l.value=JSON.stringify(i,null,2));case 2:return e.a(2)}},e)})),v.apply(this,arguments)}function y(e){return b.apply(this,arguments)}function b(){return(b=Jo(Yo().m(function e(r){var a,i,l,m,g,v,y,b,k,w,S,E,x,_,P,T,C,N,O,A,I,j,M;return Yo().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!f(r)){e.n=1;break}return e.a(2);case 1:return a=t.saveChat,$o(n,"generateTracker start",{mesId:r,mode:n.getSettings().promptEngineeringMode}),i=document.querySelector('.mes[mesid="'.concat(r,'"]')),l=null==i?void 0:i.querySelector(".mes_ztracker_button"),m=null==i?void 0:i.querySelector(".ztracker-regenerate-button"),g=u(r),e.p=2,null==l||l.classList.add("spinning"),null==m||m.classList.add("spinning"),e.n=3,h(r);case 3:if(v=e.v,y=v.message,b=v.settings,k=v.chatJsonValue,w=v.chatHtmlValue,S=v.messages,E=v.existingTracker,x=Po(k),_=s(k),P=d(r,b),b.promptEngineeringMode!==fn.NATIVE){e.n=5;break}return p(S,E,"Current tracker for this message (use as reference):"),S.push({content:b.prompt,role:"user"}),e.n=4,P(S,{json_schema:{name:"SceneTracker",strict:!0,value:k}});case 4:C=e.v,T=null==C?void 0:C.content,e.n=8;break;case 5:return N=b.promptEngineeringMode,O="json"===N?b.promptJson:b.promptXml,A=ga(k,N),p(S,E,"Current tracker for this message (use as reference):"),I=sr().compile(O,{noEscape:!0,strict:!0})({schema:JSON.stringify(k,null,2),example_response:A}),S.push({content:I,role:"user"}),e.n=6,P(S);case 6:if(null!=(j=e.v)&&j.content){e.n=7;break}throw new Error("No response content received.");case 7:T=pa(j.content,N,{schema:k});case 8:if(T&&0!==Object.keys(T).length){e.n=9;break}throw new Error("Empty response from zTracker.");case 9:return e.p=9,go(y,{trackerData:T,trackerHtml:w,extensionData:ei(ei({},fo,x),"partsMeta",_),render:function(){return o(r)}}),c(r,g),e.n=10,a();case 10:e.n=12;break;case 11:throw e.p=11,e.v,o(r),new Error("Generated data failed to render with the current template. Not saved.");case 12:e.n=14;break;case 13:e.p=13,"AbortError"!==(M=e.v).name&&(console.error("Error generating tracker:",M),Vt("error","Tracker generation failed: ".concat(M.message)));case 14:return e.p=14,null==l||l.classList.remove("spinning"),null==m||m.classList.remove("spinning"),e.f(14);case 15:return e.a(2)}},e,null,[[9,11],[2,13,14,15]])}))).apply(this,arguments)}function k(e){return w.apply(this,arguments)}function w(){return(w=Jo(Yo().m(function e(n){var r,a,i,m,g,v,y,b,k,w,S,E,x,_,P,T,C,N,O,A,I,j,M,D,L,R,z,F,B,H,U,$;return Yo().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!f(n)){e.n=1;break}return e.a(2);case 1:return r=t.saveChat,a=document.querySelector('.mes[mesid="'.concat(n,'"]')),i=null==a?void 0:a.querySelector(".mes_ztracker_button"),m=null==a?void 0:a.querySelector(".ztracker-regenerate-button"),g=u(n),v={cancelled:!1},l.set(n,v),e.p=2,null==i||i.classList.add("spinning"),null==m||m.classList.add("spinning"),e.n=3,h(n);case 3:if(y=e.v,b=y.message,k=y.settings,w=y.chatJsonValue,S=y.chatHtmlValue,E=y.messages,x=y.existingTracker,_=Po(w),P=s(w),0!==_.length){e.n=4;break}throw new Error("Schema has no top-level properties to generate.");case 4:T=d(n,k),p(C=structuredClone(E),x,"Current tracker for this message (use as reference):"),N={},O=qo(_),e.p=5,O.s();case 6:if((A=O.n()).done){e.n=15;break}if(I=A.value,!v.cancelled){e.n=7;break}return e.a(3,15);case 7:if(j=To(w,I),M=structuredClone(C),N&&Object.keys(N).length>0&&p(M,N,"Tracker so far in this sequential run (keep consistent and build on it):"),D=void 0,k.promptEngineeringMode!==fn.NATIVE){e.n=9;break}return M.push({role:"user",content:"".concat(k.prompt,'\n\nGenerate ONLY the field "').concat(I,'". Return a single JSON object matching the provided schema.')}),e.n=8,T(M,{json_schema:{name:"SceneTrackerPart",strict:!0,value:j}});case 8:L=e.v,D=null==L?void 0:L.content,e.n=12;break;case 9:return R=k.promptEngineeringMode,z="json"===R?k.promptJson:k.promptXml,F=ga(j,R),B=sr().compile(z,{noEscape:!0,strict:!0})({schema:JSON.stringify(j,null,2),example_response:F}),M.push({content:B,role:"user"}),e.n=10,T(M);case 10:if(null!=(H=e.v)&&H.content){e.n=11;break}throw new Error("No response content received.");case 11:D=pa(H.content,R,{schema:j});case 12:if(D&&0!==Object.keys(D).length){e.n=13;break}throw new Error("Empty response while generating part: ".concat(I));case 13:N=Oo(N,I,D);case 14:e.n=6;break;case 15:e.n=17;break;case 16:e.p=16,U=e.v,O.e(U);case 17:return e.p=17,O.f(),e.f(17);case 18:if(!v.cancelled){e.n=19;break}return e.a(2);case 19:if(N&&0!==Object.keys(N).length){e.n=20;break}throw new Error("Empty response from zTracker.");case 20:return e.p=20,go(b,{trackerData:N,trackerHtml:S,extensionData:ei(ei({},fo,_),"partsMeta",P),render:function(){return o(n)}}),c(n,g),e.n=21,r();case 21:e.n=23;break;case 22:throw e.p=22,e.v,o(n),new Error("Generated data failed to render with the current template. Not saved.");case 23:e.n=25;break;case 24:e.p=24,"AbortError"!==($=e.v).name&&(console.error("Error generating tracker (sequential):",$),Vt("error","Tracker generation failed: ".concat($.message)));case 25:return e.p=25,l.delete(n),null==i||i.classList.remove("spinning"),null==m||m.classList.remove("spinning"),e.f(25);case 26:return e.a(2)}},e,null,[[20,22],[5,16,17,18],[2,24,25,26]])}))).apply(this,arguments)}function S(){return(S=Jo(Yo().m(function e(n,r){var a,i,l,m,g,v,y,b,k,w,S,E,x,_,P,T,C,N,O,A,I,j,M,D,L;return Yo().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!f(n)){e.n=1;break}return e.a(2);case 1:return a=t.saveChat,i=document.querySelector('.mes[mesid="'.concat(n,'"]')),l=null==i?void 0:i.querySelector('.ztracker-part-regenerate-button[data-ztracker-part="'.concat(CSS.escape(r),'"]')),m=u(n),e.p=2,null==l||l.classList.add("spinning"),e.n=3,h(n);case 3:if(v=e.v,y=v.message,b=v.settings,k=v.chatJsonValue,w=v.chatHtmlValue,S=v.messages,(E=null==y||null===(g=y.extra)||void 0===g||null===(g=g[mn])||void 0===g?void 0:g[uo])&&"object"===ti(E)){e.n=4;break}throw new Error("No existing tracker found for this message. Generate a full tracker first.");case 4:if(x=Po(k),_=s(k),P=To(k,r),T=d(n,b),p(S,E,"Current tracker for this message (keep consistent):"),b.promptEngineeringMode!==fn.NATIVE){e.n=6;break}return S.push({role:"user",content:"".concat(b.prompt,'\n\nGenerate ONLY the field "').concat(r,'". Return a single JSON object matching the provided schema.')}),e.n=5,T(S,{json_schema:{name:"SceneTrackerPart",strict:!0,value:P}});case 5:N=e.v,C=null==N?void 0:N.content,e.n=9;break;case 6:return O=b.promptEngineeringMode,A="json"===O?b.promptJson:b.promptXml,I=ga(P,O),j=sr().compile(A,{noEscape:!0,strict:!0})({schema:JSON.stringify(P,null,2),example_response:I}),S.push({content:j,role:"user"}),e.n=7,T(S);case 7:if(null!=(M=e.v)&&M.content){e.n=8;break}throw new Error("No response content received.");case 8:C=pa(M.content,O,{schema:P});case 9:if(C&&0!==Object.keys(C).length){e.n=10;break}throw new Error("Empty response while generating part: ".concat(r));case 10:return D=Oo(E,r,C),e.p=11,go(y,{trackerData:D,trackerHtml:w,extensionData:ei(ei({},fo,x),"partsMeta",_),render:function(){return o(n)}}),c(n,m),e.n=12,a();case 12:Vt("success","Updated: ".concat(r)),e.n=14;break;case 13:throw e.p=13,e.v,o(n),new Error("Generated data failed to render with the current template. Not saved.");case 14:e.n=16;break;case 15:e.p=15,"AbortError"!==(L=e.v).name&&(console.error("Error generating tracker part:",L),Vt("error","Tracker generation failed: ".concat(L.message)));case 16:return e.p=16,null==l||l.classList.remove("spinning"),e.f(16);case 17:return e.a(2)}},e,null,[[11,13],[2,15,16,17]])}))).apply(this,arguments)}function E(){return E=Jo(Yo().m(function e(n,r,a){var i,l,m,g,v,y,b,k,w,S,E,x,_,P,T,C,N,O,A,I,j,M,D,L,R,z,F,B;return Yo().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!f(n)){e.n=1;break}return e.a(2);case 1:return i=t.saveChat,l=document.querySelector('.mes[mesid="'.concat(n,'"]')),m=null==l?void 0:l.querySelector('.ztracker-array-item-regenerate-button[data-ztracker-part="'.concat(CSS.escape(r),'"][data-ztracker-index="').concat(a,'"]')),g=u(n),e.p=2,null==m||m.classList.add("spinning"),e.n=3,h(n);case 3:if(b=e.v,k=b.message,w=b.settings,S=b.chatJsonValue,E=b.chatHtmlValue,x=b.messages,(_=null==k||null===(v=k.extra)||void 0===v||null===(v=v[mn])||void 0===v?void 0:v[uo])&&"object"===ti(_)){e.n=4;break}throw new Error("No existing tracker found for this message. Generate a full tracker first.");case 4:if(P=null==_?void 0:_[r],Array.isArray(P)){e.n=5;break}throw new Error("Tracker field is not an array: ".concat(r));case 5:if(!(a<0||a>=P.length)){e.n=6;break}throw new Error("Array index out of range for ".concat(r,": ").concat(a));case 6:if(T=Po(S),C=s(S),N=Co(S,r),O=d(n,w),p(x,_,"Current tracker for this message (keep consistent):"),p(x,{part:r,index:a,currentItem:P[a]},"Regenerate ONLY this array item:"),w.promptEngineeringMode!==fn.NATIVE){e.n=8;break}return x.push({role:"user",content:"".concat(w.prompt,"\n\nRegenerate ONLY ").concat(r,"[").concat(a,'] as an object under key "item". Return a single JSON object matching the provided schema.')}),e.n=7,O(x,{json_schema:{name:"SceneTrackerItem",strict:!0,value:N}});case 7:I=e.v,A=null==I?void 0:I.content,e.n=11;break;case 8:return j=w.promptEngineeringMode,M="json"===j?w.promptJson:w.promptXml,D=ga(N,j),L=sr().compile(M,{noEscape:!0,strict:!0})({schema:JSON.stringify(N,null,2),example_response:D}),x.push({content:L,role:"user"}),e.n=9,O(x);case 9:if(null!=(R=e.v)&&R.content){e.n=10;break}throw new Error("No response content received.");case 10:A=pa(R.content,j,{schema:N});case 11:if(void 0!==(z=null===(y=A)||void 0===y?void 0:y.item)){e.n=12;break}throw new Error("Item response missing key: item");case 12:return F=Ao(_,r,a,z),e.p=13,go(k,{trackerData:F,trackerHtml:E,extensionData:ei(ei({},fo,T),"partsMeta",C),render:function(){return o(n)}}),c(n,g),e.n=14,i();case 14:Vt("success","Updated: ".concat(r,"[").concat(a,"]")),e.n=16;break;case 15:throw e.p=15,e.v,o(n),new Error("Generated data failed to render with the current template. Not saved.");case 16:e.n=18;break;case 17:e.p=17,"AbortError"!==(B=e.v).name&&(console.error("Error generating tracker array item:",B),Vt("error","Tracker generation failed: ".concat(B.message)));case 18:return e.p=18,null==m||m.classList.remove("spinning"),e.f(18);case 19:return e.a(2)}},e,null,[[13,15],[2,17,18,19]])})),E.apply(this,arguments)}function x(){return x=Jo(Yo().m(function e(n,r,a){var i,l,m,g,v,y,b,k,w,S,E,x,_,P,T,C,N,O,A,I,j,M,D,L,R,z,F,B,H,U,$,V;return Yo().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!f(n)){e.n=1;break}return e.a(2);case 1:return i=t.saveChat,l=document.querySelector('.mes[mesid="'.concat(n,'"]')),m=null==l?void 0:l.querySelector('.ztracker-array-item-regenerate-button[data-ztracker-part="'.concat(CSS.escape(r),'"][data-ztracker-name="').concat(CSS.escape(a),'"]')),g=u(n),e.p=2,null==m||m.classList.add("spinning"),e.n=3,h(n);case 3:if(b=e.v,k=b.message,w=b.settings,S=b.chatJsonValue,E=b.chatHtmlValue,x=b.messages,(_=null==k||null===(v=k.extra)||void 0===v||null===(v=v[mn])||void 0===v?void 0:v[uo])&&"object"===ti(_)){e.n=4;break}throw new Error("No existing tracker found for this message. Generate a full tracker first.");case 4:if(P=null==_?void 0:_[r],Array.isArray(P)){e.n=5;break}throw new Error("Tracker field is not an array: ".concat(r));case 5:if(-1!==(T=jo(P,a))){e.n=6;break}throw new Error("No array item found by name in ".concat(r,": ").concat(a));case 6:if(C=P[T],N=C&&"object"===ti(C)&&"string"==typeof C.name,O=Po(S),A=s(S),I=Co(S,r),j=d(n,w),p(x,_,"Current tracker for this message (keep consistent):"),p(x,{part:r,matchBy:"name",name:a,index:T,currentItem:C},"Regenerate ONLY this array item (matched by name):"),D=N?'\n\nIMPORTANT: Preserve the item name exactly as "'.concat(a,'".'):"",w.promptEngineeringMode!==fn.NATIVE){e.n=8;break}return x.push({role:"user",content:"".concat(w.prompt,"\n\nRegenerate ONLY the ").concat(r,' item with name "').concat(a,'" as an object under key "item". Return a single JSON object matching the provided schema.').concat(D)}),e.n=7,j(x,{json_schema:{name:"SceneTrackerItem",strict:!0,value:I}});case 7:L=e.v,M=null==L?void 0:L.content,e.n=11;break;case 8:return R=w.promptEngineeringMode,z="json"===R?w.promptJson:w.promptXml,F=ga(I,R),B=sr().compile(z,{noEscape:!0,strict:!0})({schema:JSON.stringify(I,null,2),example_response:F}),x.push({content:"".concat(B).concat(D),role:"user"}),e.n=9,j(x);case 9:if(null!=(H=e.v)&&H.content){e.n=10;break}throw new Error("No response content received.");case 10:M=pa(H.content,R,{schema:I});case 11:if(void 0!==(U=null===(y=M)||void 0===y?void 0:y.item)){e.n=12;break}throw new Error("Item response missing key: item");case 12:return N&&U&&"object"===ti(U)&&(U.name=a),$=Ao(_,r,T,U),e.p=13,go(k,{trackerData:$,trackerHtml:E,extensionData:ei(ei({},fo,O),"partsMeta",A),render:function(){return o(n)}}),c(n,g),e.n=14,i();case 14:Vt("success","Updated: ".concat(r," (").concat(a,")")),e.n=16;break;case 15:throw e.p=15,e.v,o(n),new Error("Generated data failed to render with the current template. Not saved.");case 16:e.n=18;break;case 17:e.p=17,"AbortError"!==(V=e.v).name&&(console.error("Error generating tracker array item (by name):",V),Vt("error","Tracker generation failed: ".concat(V.message)));case 18:return e.p=18,null==m||m.classList.remove("spinning"),e.f(18);case 19:return e.a(2)}},e,null,[[13,15],[2,17,18,19]])})),x.apply(this,arguments)}function T(){return T=Jo(Yo().m(function e(n,r,a,i){var l,m,g,v,y,b,k,w,S,E,x,_,P,T,C,N,O,A,I,j,M,D,L,R,z,F,B,H,U,$,V,q;return Yo().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!f(n)){e.n=1;break}return e.a(2);case 1:return l=t.saveChat,m=document.querySelector('.mes[mesid="'.concat(n,'"]')),g=null==m?void 0:m.querySelector('.ztracker-array-item-regenerate-button[data-ztracker-part="'.concat(CSS.escape(r),'"][data-ztracker-idkey="').concat(CSS.escape(a),'"][data-ztracker-idvalue="').concat(CSS.escape(i),'"]')),v=u(n),e.p=2,null==g||g.classList.add("spinning"),e.n=3,h(n);case 3:if(k=e.v,w=k.message,S=k.settings,E=k.chatJsonValue,x=k.chatHtmlValue,_=k.messages,(P=null==w||null===(y=w.extra)||void 0===y||null===(y=y[mn])||void 0===y?void 0:y[uo])&&"object"===ti(P)){e.n=4;break}throw new Error("No existing tracker found for this message. Generate a full tracker first.");case 4:if(T=null==P?void 0:P[r],Array.isArray(T)){e.n=5;break}throw new Error("Tracker field is not an array: ".concat(r));case 5:if(-1!==(C=Mo(T,a,i))){e.n=6;break}throw new Error("No array item found by ".concat(a," in ").concat(r,": ").concat(i));case 6:if(N=T[C],O=N&&"object"===ti(N)&&"string"==typeof N[a],A=Po(E),I=s(E),j=Co(E,r),M=d(n,S),p(_,P,"Current tracker for this message (keep consistent):"),p(_,{part:r,matchBy:a,idValue:i,index:C,currentItem:N},"Regenerate ONLY this array item (matched by identity):"),L=O?"\n\nIMPORTANT: Preserve the identity field ".concat(a,' exactly as "').concat(i,'".'):"",S.promptEngineeringMode!==fn.NATIVE){e.n=8;break}return _.push({role:"user",content:"".concat(S.prompt,"\n\nRegenerate ONLY the ").concat(r," item with ").concat(a,' "').concat(i,'" as an object under key "item". Return a single JSON object matching the provided schema.').concat(L)}),e.n=7,M(_,{json_schema:{name:"SceneTrackerItem",strict:!0,value:j}});case 7:R=e.v,D=null==R?void 0:R.content,e.n=11;break;case 8:return z=S.promptEngineeringMode,F="json"===z?S.promptJson:S.promptXml,B=ga(j,z),H=sr().compile(F,{noEscape:!0,strict:!0})({schema:JSON.stringify(j,null,2),example_response:B}),_.push({content:"".concat(H).concat(L),role:"user"}),e.n=9,M(_);case 9:if(null!=(U=e.v)&&U.content){e.n=10;break}throw new Error("No response content received.");case 10:D=pa(U.content,z,{schema:j});case 11:if(void 0!==($=null===(b=D)||void 0===b?void 0:b.item)){e.n=12;break}throw new Error("Item response missing key: item");case 12:return O&&$&&"object"===ti($)&&($[a]=i),V=Ao(P,r,C,$),e.p=13,go(w,{trackerData:V,trackerHtml:x,extensionData:ei(ei({},fo,A),"partsMeta",I),render:function(){return o(n)}}),c(n,v),e.n=14,l();case 14:Vt("success","Updated: ".concat(r," (").concat(a,"=").concat(i,")")),e.n=16;break;case 15:throw e.p=15,e.v,o(n),new Error("Generated data failed to render with the current template. Not saved.");case 16:e.n=18;break;case 17:e.p=17,"AbortError"!==(q=e.v).name&&(console.error("Error generating tracker array item (by identity):",q),Vt("error","Tracker generation failed: ".concat(q.message)));case 18:return e.p=18,null==g||g.classList.remove("spinning"),e.f(18);case 19:return e.a(2)}},e,null,[[13,15],[2,17,18,19]])})),T.apply(this,arguments)}function N(e,t,n,r){return O.apply(this,arguments)}function O(){return O=Jo(Yo().m(function e(n,r,a,i){var l,m,g,v,y,b,k,w,S,E,x,_,P,T,C,N,O,A,I,j,M,D,L,R,z,F,B,H,U;return Yo().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!f(n)){e.n=1;break}return e.a(2);case 1:return l=t.saveChat,m=document.querySelector('.mes[mesid="'.concat(n,'"]')),g=null==m?void 0:m.querySelector('.ztracker-array-item-field-regenerate-button[data-ztracker-part="'.concat(CSS.escape(r),'"][data-ztracker-index="').concat(a,'"][data-ztracker-field="').concat(CSS.escape(i),'"]')),v=u(n),e.p=2,null==g||g.classList.add("spinning"),e.n=3,h(n);case 3:if(k=e.v,w=k.message,S=k.settings,E=k.chatJsonValue,x=k.chatHtmlValue,_=k.messages,(P=null==w||null===(y=w.extra)||void 0===y||null===(y=y[mn])||void 0===y?void 0:y[uo])&&"object"===ti(P)){e.n=4;break}throw new Error("No existing tracker found for this message. Generate a full tracker first.");case 4:if(T=null==P?void 0:P[r],Array.isArray(T)){e.n=5;break}throw new Error("Tracker field is not an array: ".concat(r));case 5:if(!(a<0||a>=T.length)){e.n=6;break}throw new Error("Array index out of range for ".concat(r,": ").concat(a));case 6:if((C=T[a])&&"object"===ti(C)&&!Array.isArray(C)){e.n=7;break}throw new Error("Array item is not an object at ".concat(r,"[").concat(a,"]"));case 7:if(N=Po(E),O=s(E),A=No(E,r,i),I=d(n,S),p(_,P,"Current tracker for this message (keep consistent):"),p(_,{part:r,index:a,field:i,currentItem:C},"Regenerate ONLY this field within this array item:"),S.promptEngineeringMode!==fn.NATIVE){e.n=9;break}return _.push({role:"user",content:"".concat(S.prompt,"\n\nRegenerate ONLY ").concat(r,"[").concat(a,"].").concat(i,'. Return a single JSON object with key "value" that matches the provided schema. Do not change or rename the array item; only update that field.')}),e.n=8,I(_,{json_schema:{name:"SceneTrackerItemField",strict:!0,value:A}});case 8:M=e.v,j=null==M?void 0:M.content,e.n=12;break;case 9:return D=S.promptEngineeringMode,L="json"===D?S.promptJson:S.promptXml,R=ga(A,D),z=sr().compile(L,{noEscape:!0,strict:!0})({schema:JSON.stringify(A,null,2),example_response:R}),_.push({content:z,role:"user"}),e.n=10,I(_);case 10:if(null!=(F=e.v)&&F.content){e.n=11;break}throw new Error("No response content received.");case 11:j=pa(F.content,D,{schema:A});case 12:if(void 0!==(B=null===(b=j)||void 0===b?void 0:b.value)){e.n=13;break}throw new Error("Field response missing key: value");case 13:return H=Io(P,r,a,i,B),e.p=14,go(w,{trackerData:H,trackerHtml:x,extensionData:ei(ei({},fo,N),"partsMeta",O),render:function(){return o(n)}}),c(n,v),e.n=15,l();case 15:Vt("success","Updated: ".concat(r,"[").concat(a,"].").concat(i)),e.n=17;break;case 16:throw e.p=16,e.v,o(n),new Error("Generated data failed to render with the current template. Not saved.");case 17:e.n=19;break;case 18:e.p=18,"AbortError"!==(U=e.v).name&&(console.error("Error generating tracker array item field:",U),Vt("error","Tracker generation failed: ".concat(U.message)));case 19:return e.p=19,null==g||g.classList.remove("spinning"),e.f(19);case 20:return e.a(2)}},e,null,[[14,16],[2,18,19,20]])})),O.apply(this,arguments)}function A(){return A=Jo(Yo().m(function e(n,r,a,o){var i,l,s,u,c;return Yo().w(function(e){for(;;)switch(e.n){case 0:if(l=t.chat[n],s=null==l||null===(i=l.extra)||void 0===i||null===(i=i[mn])||void 0===i?void 0:i[uo],u=null==s?void 0:s[r],Array.isArray(u)){e.n=1;break}return Vt("error","Tracker field is not an array: ".concat(r)),e.a(2);case 1:if(-1!==(c=jo(u,a))){e.n=2;break}return Vt("error","No array item found by name in ".concat(r,": ").concat(a)),e.a(2);case 2:return e.a(2,N(n,r,c,o))}},e)})),A.apply(this,arguments)}function I(){return I=Jo(Yo().m(function e(n,r,a,o,i){var l,s,u,c,f;return Yo().w(function(e){for(;;)switch(e.n){case 0:if(s=t.chat[n],u=null==s||null===(l=s.extra)||void 0===l||null===(l=l[mn])||void 0===l?void 0:l[uo],c=null==u?void 0:u[r],Array.isArray(c)){e.n=1;break}return Vt("error","Tracker field is not an array: ".concat(r)),e.a(2);case 1:if(-1!==(f=Mo(c,a,o))){e.n=2;break}return Vt("error","No array item found by ".concat(a," in ").concat(r,": ").concat(o)),e.a(2);case 2:return e.a(2,N(n,r,f,i))}},e)})),I.apply(this,arguments)}function j(){return(j=Jo(Yo().m(function e(t){return Yo().w(function(e){for(;;)switch(e.n){case 0:if(!n.getSettings().sequentialPartGeneration){e.n=1;break}return e.a(2,k(t));case 1:return e.a(2,y(t))}},e)}))).apply(this,arguments)}function D(){return(D=Jo(Yo().m(function e(){var r,a,o,l,s,u,c,f;return Yo().w(function(e){for(;;)switch(e.p=e.n){case 0:return a=document.querySelector("#extensionsMenu"),(o=document.createElement("div")).id="ztracker_menu_buttons",o.className="extension_container",null==a||a.appendChild(o),l=Ho({importMetaUrl:i,fallbackFolderName:hn}),$o(n,"Initializing UI",{extensionName:hn,extensionRoot:l,buttonsTemplatePath:s="dist/templates/buttons",buttonsTemplateUrl:zo({importMetaUrl:i,fallbackFolderName:hn,templatePathNoExt:s})}),e.p=1,e.n=2,t.renderExtensionTemplateAsync(l,s);case 2:u=e.v,o.insertAdjacentHTML("beforeend",u),e.n=6;break;case 3:if(e.p=3,f=e.v,console.error("zTracker: failed to render extension menu buttons template",{extensionName:hn,extensionRoot:l,templatePath:s,expectedUrl:zo({importMetaUrl:i,fallbackFolderName:hn,templatePathNoExt:s}),error:f}),!Uo(n)){e.n=5;break}return e.n=4,Promise.all([Fo({importMetaUrl:i,fallbackFolderName:hn,templatePathNoExt:"templates/buttons"}),Fo({importMetaUrl:i,fallbackFolderName:hn,templatePathNoExt:"dist/templates/buttons"}),Fo({importMetaUrl:i,fallbackFolderName:hn,templatePathNoExt:"templates/modify_schema_popup"}),Fo({importMetaUrl:i,fallbackFolderName:hn,templatePathNoExt:"dist/templates/modify_schema_popup"})]);case 4:c=e.v,$o(n,"Template availability checks",c),globalThis.zTrackerDiagnostics={templateChecks:c};case 5:Vt("error","zTracker failed to load one or more HTML templates. See console for diagnostics.");case 6:null==a||null===(r=a.querySelector("#ztracker_modify_schema_preset"))||void 0===r||r.addEventListener("click",Jo(Yo().m(function e(){return Yo().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,L();case 1:return e.a(2)}},e)})));case 7:return e.a(2)}},e,null,[[1,3]])}))).apply(this,arguments)}function L(){return R.apply(this,arguments)}function R(){return(R=Jo(Yo().m(function e(){var r,a,o,l,s,u,c,f,d,p;return Yo().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=n.getSettings(),a=SillyTavern.getContext(),(o=a.chatMetadata)[mn]||(o[mn]={}),o[mn][so]||(o[mn][so]="default",a.saveMetadataDebounced()),l=o[mn][so],s={presets:Object.entries(r.schemaPresets).map(function(e){var t=Vo(e,2),n=t[0];return{key:n,name:t[1].name,selected:n===l}})},u=Ho({importMetaUrl:i,fallbackFolderName:hn}),c="dist/templates/modify_schema_popup",e.p=1,e.n=2,t.renderExtensionTemplateAsync(u,c,s);case 2:f=e.v,e.n=6;break;case 3:if(e.p=3,p=e.v,console.error("zTracker: failed to render modify schema popup template",{extensionName:hn,extensionRoot:u,templatePath:c,expectedUrl:zo({importMetaUrl:i,fallbackFolderName:hn,templatePathNoExt:c}),error:p}),!Uo(n)){e.n=5;break}return e.n=4,Promise.all([Fo({importMetaUrl:i,fallbackFolderName:hn,templatePathNoExt:"templates/modify_schema_popup"}),Fo({importMetaUrl:i,fallbackFolderName:hn,templatePathNoExt:"dist/templates/modify_schema_popup"})]);case 4:d=e.v,$o(n,"Template availability checks",d),globalThis.zTrackerDiagnostics={templateChecks:d};case 5:return Vt("error","zTracker failed to load the Modify Schema popup template. See console for diagnostics."),e.a(2);case 6:return e.n=7,t.callGenericPopup(f,_.CONFIRM,"",{okButton:"Save",onClose:function(e){if(e.result===P.AFFIRMATIVE){var t=document.getElementById("ztracker-chat-schema-select");if(t){var n=t.value;n!==l&&(o[mn][so]=n,a.saveMetadataDebounced(),Vt("success",'Chat schema preset updated to "'.concat(r.schemaPresets[n].name,'".')))}}}});case 7:return e.a(2)}},e,null,[[1,3]])}))).apply(this,arguments)}return{deleteTracker:function(e){return g.apply(this,arguments)},editTracker:function(e){return v.apply(this,arguments)},generateTracker:function(e){return j.apply(this,arguments)},generateTrackerPart:function(e,t){return S.apply(this,arguments)},generateTrackerArrayItem:function(e,t,n){return E.apply(this,arguments)},generateTrackerArrayItemByName:function(e,t,n){return x.apply(this,arguments)},generateTrackerArrayItemByIdentity:function(e,t,n,r){return T.apply(this,arguments)},generateTrackerArrayItemField:N,generateTrackerArrayItemFieldByName:function(e,t,n,r){return A.apply(this,arguments)},generateTrackerArrayItemFieldByIdentity:function(e,t,n,r,a){return I.apply(this,arguments)},modifyChatMetadata:L,renderExtensionTemplates:function(){return D.apply(this,arguments)}}}({globalContext:mi,settingsManager:or,generator:gi,pendingRequests:vi,renderTrackerWithDeps:yi,importMetaUrl:"file:///C:/Users/deeberto/git/SillyTavern-zTracker/src/index.tsx"});!function(){var e=document.getElementById("extensions_settings");if(e){var t=document.getElementById("ztracker-react-settings-root");t||((t=document.createElement("div")).id="ztracker-react-settings-root",e.appendChild(t)),(0,w.createRoot)(t).render((0,b.jsx)(k.StrictMode,{children:(0,b.jsx)(ir,{})}))}else console.error("zTracker: Extension settings container not found.")}(),function(e){hi.apply(this,arguments)}({globalContext:mi,settingsManager:or,actions:e,renderTrackerWithDeps:yi})}).catch(function(e){console.error(e),Vt("error","zTracker data migration failed. Check console for details.")});